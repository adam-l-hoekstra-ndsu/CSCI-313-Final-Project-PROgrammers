var KM=Object.defineProperty,QM=Object.defineProperties;var YM=Object.getOwnPropertyDescriptors;var Ew=Object.getOwnPropertySymbols,ZM=Object.getPrototypeOf,JM=Object.prototype.hasOwnProperty,XM=Object.prototype.propertyIsEnumerable,eP=Reflect.get;var Iw=(n,e,t)=>e in n?KM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})JM.call(e,t)&&Iw(n,t,e[t]);if(Ew)for(var t of Ew(e))XM.call(e,t)&&Iw(n,t,e[t]);return n},Se=(n,e)=>QM(n,YM(e));var li=(n,e,t)=>eP(ZM(n),t,e);var C=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});function dm(n,e){return Object.is(n,e)}var It=null,vu=!1,hm=1,Rn=Symbol("SIGNAL");function Ee(n){let e=It;return It=n,e}function fm(){return It}var nc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rc(n){if(vu)throw new Error("");if(It===null)return;It.consumerOnSignalRead(n);let e=It.nextProducerIndex++;if(wu(It),e<It.producerNode.length&&It.producerNode[e]!==n&&tc(It)){let t=It.producerNode[e];Iu(t,It.producerIndexOfThis[e])}It.producerNode[e]!==n&&(It.producerNode[e]=n,It.producerIndexOfThis[e]=tc(It)?Cw(n,It,e):0),It.producerLastReadVersion[e]=n.version}function ww(){hm++}function pm(n){if(!(tc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hm)){if(!n.producerMustRecompute(n)&&!vm(n)){um(n);return}n.producerRecomputeValue(n),um(n)}}function mm(n){if(n.liveConsumerNode===void 0)return;let e=vu;vu=!0;try{for(let t of n.liveConsumerNode)t.dirty||tP(t)}finally{vu=e}}function gm(){return It?.consumerAllowSignalWrites!==!1}function tP(n){n.dirty=!0,mm(n),n.consumerMarkedDirty?.(n)}function um(n){n.dirty=!1,n.lastCleanEpoch=hm}function Eu(n){return n&&(n.nextProducerIndex=0),Ee(n)}function ym(n,e){if(Ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Iu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vm(n){wu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(pm(t),r!==t.version))return!0}return!1}function _m(n){if(wu(n),tc(n))for(let e=0;e<n.producerNode.length;e++)Iu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Cw(n,e,t){if(bw(n),n.liveConsumerNode.length===0&&Tw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Cw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Iu(n,e){if(bw(n),n.liveConsumerNode.length===1&&Tw(n))for(let r=0;r<n.producerNode.length;r++)Iu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];wu(i),i.producerIndexOfThis[r]=e}}function tc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function wu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Tw(n){return n.producerNode!==void 0}function Em(n,e){let t=Object.create(nP);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(pm(t),rc(t),t.value===_u)throw t.error;return t.value};return r[Rn]=t,r}var cm=Symbol("UNSET"),lm=Symbol("COMPUTING"),_u=Symbol("ERRORED"),nP=Se(H({},nc),{value:cm,dirty:!0,error:null,equal:dm,kind:"computed",producerMustRecompute(n){return n.value===cm||n.value===lm},producerRecomputeValue(n){if(n.value===lm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=lm;let t=Eu(n),r,i=!1;try{r=n.computation(),Ee(null),i=e!==cm&&e!==_u&&r!==_u&&n.equal(e,r)}catch(o){r=_u,n.error=o}finally{ym(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function rP(){throw new Error}var Sw=rP;function Dw(n){Sw(n)}function Im(n){Sw=n}var iP=null;function wm(n,e){let t=Object.create(Cu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(rc(t),t.value);return r[Rn]=t,r}function ic(n,e){gm()||Dw(n),n.equal(n.value,e)||(n.value=e,oP(n))}function Cm(n,e){gm()||Dw(n),ic(n,e(n.value))}var Cu=Se(H({},nc),{equal:dm,value:void 0,kind:"signal"});function oP(n){n.version++,ww(),mm(n),iP?.()}function bm(n){let e=Ee(null);try{return n()}finally{Ee(e)}}var Tm;function oc(){return Tm}function Dr(n){let e=Tm;return Tm=n,e}var bu=Symbol("NotFound");function pe(n){return typeof n=="function"}function Qo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tu=Qo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function to(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var at=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof Tu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Aw(o)}catch(s){e=e??[],s instanceof Tu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Aw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&to(t,e)}remove(e){let{_finalizers:t}=this;t&&to(t,e),e instanceof n&&e._removeParent(this)}};at.EMPTY=(()=>{let n=new at;return n.closed=!0,n})();var Sm=at.EMPTY;function Su(n){return n instanceof at||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function Aw(n){pe(n)?n():n.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yo={setTimeout(n,e,...t){let{delegate:r}=Yo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Yo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Du(n){Yo.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(n);else throw n})}function sc(){}var xw=Dm("C",void 0,void 0);function Rw(n){return Dm("E",void 0,n)}function Mw(n){return Dm("N",n,void 0)}function Dm(n,e,t){return{kind:n,value:e,error:t}}var no=null;function Zo(n){if($n.useDeprecatedSynchronousErrorHandling){let e=!no;if(e&&(no={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=no;if(no=null,t)throw r}}else n()}function Pw(n){$n.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=n)}var ro=class extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Su(e)&&e.add(this)):this.destination=dP}static create(e,t,r){return new Jo(e,t,r)}next(e){this.isStopped?xm(Mw(e),this):this._next(e)}error(e){this.isStopped?xm(Rw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xm(xw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lP=Function.prototype.bind;function Am(n,e){return lP.call(n,e)}var Rm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Au(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Au(r)}else Au(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Au(t)}}},Jo=class extends ro{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Am(e.next,o),error:e.error&&Am(e.error,o),complete:e.complete&&Am(e.complete,o)}):i=e}this.destination=new Rm(i)}};function Au(n){$n.useDeprecatedSynchronousErrorHandling?Pw(n):Du(n)}function uP(n){throw n}function xm(n,e){let{onStoppedNotification:t}=$n;t&&Yo.setTimeout(()=>t(n,e))}var dP={closed:!0,next:sc,error:uP,complete:sc};var Xo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function En(n){return n}function xu(...n){return Mm(n)}function Mm(n){return n.length===0?En:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=fP(t)?t:new Jo(t,r,i);return Zo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Nw(r),new r((i,o)=>{let s=new Jo({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xo](){return this}pipe(...t){return Mm(t)(this)}toPromise(t){return t=Nw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Nw(n){var e;return(e=n??$n.Promise)!==null&&e!==void 0?e:Promise}function hP(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function fP(n){return n&&n instanceof ro||hP(n)&&Su(n)}function Pm(n){return pe(n?.lift)}function Le(n){return e=>{if(Pm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new Nm(n,e,t,r,i)}var Nm=class extends ro{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function es(){return Le((n,e)=>{let t=null;n._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ts=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;let t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return es()(this)}};var kw=Qo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pt=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ru(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kw}next(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Sm:(this.currentObservers=null,o.push(t),new at(()=>{this.currentObservers=null,to(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Ru(e,t),n})(),Ru=class extends pt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Sm}};var kt=class extends pt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var km={now(){return(km.delegate||Date).now()},delegate:void 0};var Mu=class extends at{constructor(e,t){super()}schedule(e,t=0){return this}};var ac={setInterval(n,e,...t){let{delegate:r}=ac;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ac;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ns=class extends Mu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ac.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ac.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,to(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var rs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};rs.now=km.now;var is=class extends rs{constructor(e,t=rs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Om=new is(ns);var Pu=class extends ns{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nu=class extends is{};var Fm=new Nu(Pu);var ln=new Ie(n=>n.complete());function Ow(n){return n&&pe(n.schedule)}function Fw(n){return n[n.length-1]}function ku(n){return pe(Fw(n))?n.pop():void 0}function ui(n){return Ow(Fw(n))?n.pop():void 0}function Vm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Lw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(y){s(y)}}function l(h){try{u(r.throw(h))}catch(y){s(y)}}function u(h){h.done?o(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Vw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function io(n){return this instanceof io?(this.v=n,this):new io(n)}function jw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(M){return Promise.resolve(M).then(E,y)}}function a(E,M){r[E]&&(i[E]=function(V){return new Promise(function(F,Q){o.push([E,V,F,Q])>1||l(E,V)})},M&&(i[E]=M(i[E])))}function l(E,M){try{u(r[E](M))}catch(V){I(o[0][3],V)}}function u(E){E.value instanceof io?Promise.resolve(E.value.v).then(h,y):I(o[0][2],E)}function h(E){l("next",E)}function y(E){l("throw",E)}function I(E,M){E(M),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Bw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Vw=="function"?Vw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Ou=n=>n&&typeof n.length=="number"&&typeof n!="function";function Fu(n){return pe(n?.then)}function Vu(n){return pe(n[Xo])}function Lu(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function ju(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bu=pP();function Uu(n){return pe(n?.[Bu])}function $u(n){return jw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield io(t.read());if(i)return yield io(void 0);yield yield io(r)}}finally{t.releaseLock()}})}function Hu(n){return pe(n?.getReader)}function mt(n){if(n instanceof Ie)return n;if(n!=null){if(Vu(n))return mP(n);if(Ou(n))return gP(n);if(Fu(n))return yP(n);if(Lu(n))return Uw(n);if(Uu(n))return vP(n);if(Hu(n))return _P(n)}throw ju(n)}function mP(n){return new Ie(e=>{let t=n[Xo]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gP(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yP(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Du)})}function vP(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Uw(n){return new Ie(e=>{EP(n,e).catch(t=>e.error(t))})}function _P(n){return Uw($u(n))}function EP(n,e){var t,r,i,o;return Lw(this,void 0,void 0,function*(){try{for(t=Bw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function un(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function di(n,e=0){return Le((t,r)=>{t.subscribe(Ne(r,i=>un(r,n,()=>r.next(i),e),()=>un(r,n,()=>r.complete(),e),i=>un(r,n,()=>r.error(i),e)))})}function hi(n,e=0){return Le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $w(n,e){return mt(n).pipe(hi(e),di(e))}function Hw(n,e){return mt(n).pipe(hi(e),di(e))}function qw(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zw(n,e){return new Ie(t=>{let r;return un(t,e,()=>{r=n[Bu](),un(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function qu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{un(t,e,()=>{let r=n[Symbol.asyncIterator]();un(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Gw(n,e){return qu($u(n),e)}function Ww(n,e){if(n!=null){if(Vu(n))return $w(n,e);if(Ou(n))return qw(n,e);if(Fu(n))return Hw(n,e);if(Lu(n))return qu(n,e);if(Uu(n))return zw(n,e);if(Hu(n))return Gw(n,e)}throw ju(n)}function nt(n,e){return e?Ww(n,e):mt(n)}function le(...n){let e=ui(n);return nt(n,e)}function os(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function Lm(n){return!!n&&(n instanceof Ie||pe(n.lift)&&pe(n.subscribe))}var Ar=Qo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(n,e){return Le((t,r)=>{let i=0;t.subscribe(Ne(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:IP}=Array;function wP(n,e){return IP(e)?n(...e):n(e)}function zu(n){return ue(e=>wP(n,e))}var{isArray:CP}=Array,{getPrototypeOf:bP,prototype:TP,keys:SP}=Object;function Gu(n){if(n.length===1){let e=n[0];if(CP(e))return{args:e,keys:null};if(DP(e)){let t=SP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DP(n){return n&&typeof n=="object"&&bP(n)===TP}function Wu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function oo(...n){let e=ui(n),t=ku(n),{args:r,keys:i}=Gu(n);if(r.length===0)return nt([],e);let o=new Ie(AP(r,e,i?s=>Wu(i,s):En));return t?o.pipe(zu(t)):o}function AP(n,e,t=En){return r=>{Kw(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Kw(e,()=>{let u=nt(n[l],e),h=!1;u.subscribe(Ne(r,y=>{o[l]=y,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Kw(n,e,t){n?un(t,n,e):e()}function Qw(n,e,t,r,i,o,s,a){let l=[],u=0,h=0,y=!1,I=()=>{y&&!l.length&&!u&&e.complete()},E=V=>u<r?M(V):l.push(V),M=V=>{o&&e.next(V),u++;let F=!1;mt(t(V,h++)).subscribe(Ne(e,Q=>{i?.(Q),o?E(Q):e.next(Q)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;l.length&&u<r;){let Q=l.shift();s?un(e,s,()=>M(Q)):M(Q)}I()}catch(Q){e.error(Q)}}))};return n.subscribe(Ne(e,E,()=>{y=!0,I()})),()=>{a?.()}}function wt(n,e,t=1/0){return pe(e)?wt((r,i)=>ue((o,s)=>e(r,o,i,s))(mt(n(r,i))),t):(typeof e=="number"&&(t=e),Le((r,i)=>Qw(r,i,n,t)))}function Yw(n=1/0){return wt(En,n)}function Zw(){return Yw(1)}function ss(...n){return Zw()(nt(n,ui(n)))}function Ku(n){return new Ie(e=>{mt(n()).subscribe(e)})}function jm(...n){let e=ku(n),{args:t,keys:r}=Gu(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let y=!1;mt(t[h]).subscribe(Ne(o,I=>{y||(y=!0,u--),a[h]=I},()=>l--,void 0,()=>{(!l||!y)&&(u||o.next(r?Wu(r,a):a),o.complete())}))}});return e?i.pipe(zu(e)):i}function Mn(n,e){return Le((t,r)=>{let i=0;t.subscribe(Ne(r,o=>n.call(e,o,i++)&&r.next(o)))})}function fi(n){return Le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ne(t,void 0,void 0,s=>{o=mt(n(s,fi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Jw(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Ne(s,h=>{let y=u++;l=a?n(l,h,y):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function as(n,e){return pe(e)?wt(n,e,1):wt(n,1)}function pi(n){return Le((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Hn(n){return n<=0?()=>ln:Le((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qu(n=xP){return Le((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xP(){return new Ar}function cc(n){return Le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function xr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mn((i,o)=>n(i,o,r)):En,Hn(1),t?pi(e):Qu(()=>new Ar))}function cs(n){return n<=0?()=>ln:Le((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mn((i,o)=>n(i,o,r)):En,cs(1),t?pi(e):Qu(()=>new Ar))}function Yu(n,e){return Le(Jw(n,e,arguments.length>=2,!0))}function Zu(...n){let e=ui(n);return Le((t,r)=>{(e?ss(n,t,e):ss(n,t)).subscribe(r)})}function In(n,e){return Le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ne(r,l=>{i?.unsubscribe();let u=0,h=o++;mt(n(l,h)).subscribe(i=Ne(r,y=>r.next(e?e(l,y,h,u++):y),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Um(n){return Le((e,t)=>{mt(n).subscribe(Ne(t,()=>t.complete(),sc)),!t.closed&&e.subscribe(t)})}function Ot(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ne(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):En}var jC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(MP(e,t)),this.code=e}};function RP(n){return`NG0${Math.abs(n)}`}function MP(n,e){return`${RP(n)}${e?": "+e:""}`}var BC=Symbol("InputSignalNode#UNSET"),PP=Se(H({},Cu),{transformFn:void 0,applyValueToInputSignal(n,e){ic(n,e)}});function UC(n,e){let t=Object.create(PP);t.value=n,t.transformFn=e?.transform;function r(){if(rc(t),t.value===BC){let i=null;throw new te(-950,i)}return t.value}return r[Rn]=t,r}function Cc(n){return{toString:n}.toString()}var Ju="__parameters__";function NP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kP(n,e,t){return Cc(()=>{let r=NP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let y=l.hasOwnProperty(Ju)?l[Ju]:Object.defineProperty(l,Ju,{value:[]})[Ju];for(;y.length<=h;)y.push(null);return(y[h]=y[h]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rg=globalThis;function Qe(n){for(let e in n)if(n[e]===Qe)return e;throw Error("Could not find renamed property on target object.")}function OP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function hn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(hn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Xw(n,e){return n?e?`${n} ${e}`:n:e||""}var FP=Qe({__forward_ref__:Qe});function or(n){return n.__forward_ref__=or,n.toString=function(){return hn(this())},n}function Zt(n){return $C(n)?n():n}function $C(n){return typeof n=="function"&&n.hasOwnProperty(FP)&&n.__forward_ref__===or}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nd(n){return eC(n,qC)||eC(n,zC)}function HC(n){return Nd(n)!==null}function eC(n,e){return n.hasOwnProperty(e)?n[e]:null}function VP(n){let e=n&&(n[qC]||n[zC]);return e||null}function tC(n){return n&&(n.hasOwnProperty(nC)||n.hasOwnProperty(LP))?n[nC]:null}var qC=Qe({\u0275prov:Qe}),nC=Qe({\u0275inj:Qe}),zC=Qe({ngInjectableDef:Qe}),LP=Qe({ngInjectorDef:Qe}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function GC(n){return n&&!!n.\u0275providers}var jP=Qe({\u0275cmp:Qe}),BP=Qe({\u0275dir:Qe}),UP=Qe({\u0275pipe:Qe}),$P=Qe({\u0275mod:Qe}),sd=Qe({\u0275fac:Qe}),hc=Qe({__NG_ELEMENT_ID__:Qe}),rC=Qe({__NG_ENV_ID__:Qe});function Rr(n){return typeof n=="string"?n:n==null?"":String(n)}function HP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Rr(n)}function WC(n,e){throw new te(-200,n)}function Gg(n,e){throw new te(-201,!1)}var we=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(we||{}),ig;function KC(){return ig}function dn(n){let e=ig;return ig=n,e}function QC(n,e,t){let r=Nd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&we.Optional)return null;if(e!==void 0)return e;Gg(n,"Injector")}var qP={},so=qP,og="__NG_DI_FLAG__",ad=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?bu:so,r)}},cd="ngTempTokenPath",zP="ngTokenPath",GP=/\n/gm,WP="\u0275",iC="__source";function KP(n,e=we.Default){if(oc()===void 0)throw new te(-203,!1);if(oc()===null)return QC(n,void 0,e);{let t=oc(),r;return t instanceof ad?r=t.injector:r=t,r.get(n,e&we.Optional?null:void 0,e)}}function de(n,e=we.Default){return(KC()||KP)(Zt(n),e)}function b(n,e=we.Default){return de(n,kd(e))}function kd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sg(n){let e=[];for(let t=0;t<n.length;t++){let r=Zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=we.Default;for(let s=0;s<r.length;s++){let a=r[s],l=YP(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function QP(n,e){return n[og]=e,n.prototype[og]=e,n}function YP(n){return n[og]}function ZP(n,e,t,r){let i=n[cd];throw e[iC]&&i.unshift(e[iC]),n.message=JP(`
`+n.message,i,t,r),n[zP]=i,n[cd]=null,n}function JP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==WP?n.slice(2):n;let i=hn(e);if(Array.isArray(e))i=e.map(hn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):hn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(GP,`
  `)}`}var kn=QP(kP("Optional"),8);function co(n,e){let t=n.hasOwnProperty(sd);return t?n[sd]:null}function Wg(n,e){n.forEach(t=>Array.isArray(t)?Wg(t,e):e(t))}function YC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ld(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function XP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function eN(n,e,t){let r=bc(n,e);return r>=0?n[r|1]=t:(r=~r,XP(n,r,e,t)),r}function $m(n,e){let t=bc(n,e);if(t>=0)return n[t|1]}function bc(n,e){return tN(n,e,1)}function tN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var lo={},Pn=[],fc=new ee(""),ZC=new ee("",-1),JC=new ee(""),ud=class{get(e,t=so){if(t===so){let r=new Error(`NullInjectorError: No provider for ${hn(e)}!`);throw r.name="NullInjectorError",r}return t}};function XC(n,e){let t=n[$P]||null;if(!t&&e===!0)throw new Error(`Type ${hn(n)} does not have '\u0275mod' property.`);return t}function uo(n){return n[jP]||null}function nN(n){return n[BP]||null}function rN(n){return n[UP]||null}function kr(n){return{\u0275providers:n}}function iN(...n){return{\u0275providers:eb(!0,n),\u0275fromNgModule:!0}}function eb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Wg(e,s=>{let a=s;ag(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tb(i,o),t}function tb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Kg(i,o=>{e(o,r)})}}function ag(n,e,t,r){if(n=Zt(n),!n)return!1;let i=null,o=tC(n),s=!o&&uo(n);if(!o&&!s){let l=n.ngModule;if(o=tC(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)ag(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Wg(o.imports,h=>{ag(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&tb(u,e)}if(!a){let u=co(i)||(()=>new i);e({provide:i,useFactory:u,deps:Pn},i),e({provide:JC,useValue:i,multi:!0},i),e({provide:fc,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;Kg(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Kg(n,e){for(let t of n)GC(t)&&(t=t.\u0275providers),Array.isArray(t)?Kg(t,e):e(t)}var oN=Qe({provide:String,useValue:Qe});function nb(n){return n!==null&&typeof n=="object"&&oN in n}function sN(n){return!!(n&&n.useExisting)}function aN(n){return!!(n&&n.useFactory)}function fs(n){return typeof n=="function"}function cN(n){return!!n.useClass}var Od=new ee(""),td={},oC={},Hm;function Qg(){return Hm===void 0&&(Hm=new ud),Hm}var Xt=class{},pc=class extends Xt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,lg(e,s=>this.processProvider(s)),this.records.set(ZC,ls(void 0,this)),i.has("environment")&&this.records.set(Xt,ls(void 0,this));let o=this.records.get(Od);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(JC,Pn,we.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?bu:so,r)}destroy(){uc(this),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return uc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){uc(this);let t=Dr(this),r=dn(void 0),i;try{return e()}finally{Dr(t),dn(r)}}get(e,t=so,r=we.Default){if(uc(this),e.hasOwnProperty(rC))return e[rC](this);r=kd(r);let i,o=Dr(this),s=dn(void 0);try{if(!(r&we.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=fN(e)&&Nd(e);u&&this.injectableDefInScope(u)?l=ls(cg(e),td):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&we.Self?Qg():this.parent;return t=r&we.Optional&&t===so?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cd]=a[cd]||[]).unshift(hn(e)),o)throw a;return ZP(a,e,"R3InjectorError",this.source)}else throw a}finally{dn(s),Dr(o)}}resolveInjectorInitializers(){let e=Ee(null),t=Dr(this),r=dn(void 0),i;try{let o=this.get(fc,Pn,we.Self);for(let s of o)s()}finally{Dr(t),dn(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(hn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Zt(e);let t=fs(e)?e:Zt(e&&e.provide),r=uN(e);if(!fs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ls(void 0,td,!0),i.factory=()=>sg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ee(null);try{return t.value===oC?WC(hn(e)):t.value===td&&(t.value=oC,t.value=t.factory()),typeof t.value=="object"&&t.value&&hN(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function cg(n){let e=Nd(n),t=e!==null?e.factory:co(n);if(t!==null)return t;if(n instanceof ee)throw new te(204,!1);if(n instanceof Function)return lN(n);throw new te(204,!1)}function lN(n){if(n.length>0)throw new te(204,!1);let t=VP(n);return t!==null?()=>t.factory(n):()=>new n}function uN(n){if(nb(n))return ls(void 0,n.useValue);{let e=rb(n);return ls(e,td)}}function rb(n,e,t){let r;if(fs(n)){let i=Zt(n);return co(i)||cg(i)}else if(nb(n))r=()=>Zt(n.useValue);else if(aN(n))r=()=>n.useFactory(...sg(n.deps||[]));else if(sN(n))r=()=>de(Zt(n.useExisting));else{let i=Zt(n&&(n.useClass||n.provide));if(dN(n))r=()=>new i(...sg(n.deps));else return co(i)||cg(i)}return r}function uc(n){if(n.destroyed)throw new te(205,!1)}function ls(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dN(n){return!!n.deps}function hN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function fN(n){return typeof n=="function"||typeof n=="object"&&n instanceof ee}function lg(n,e){for(let t of n)Array.isArray(t)?lg(t,e):t&&GC(t)?lg(t.\u0275providers,e):e(t)}function nn(n,e){let t;n instanceof pc?(uc(n),t=n):t=new ad(n);let r,i=Dr(t),o=dn(void 0);try{return e()}finally{Dr(i),dn(o)}}function ib(){return KC()!==void 0||oc()!=null}function ob(n){if(!ib())throw new te(-203,!1)}function pN(n){return typeof n=="function"}var Or=0,Ce=1,ge=2,en=3,zn=4,Kn=5,mc=6,dd=7,bt=8,ps=9,Mr=10,gt=11,gc=12,sC=13,Cs=14,Gn=15,ms=16,us=17,gs=18,Fd=19,sb=20,mi=21,qm=22,hd=23,Nn=24,zm=25,tn=26,ab=1;var ho=7,fd=8,pd=9,Jt=10;function gi(n){return Array.isArray(n)&&typeof n[ab]=="object"}function Fr(n){return Array.isArray(n)&&n[ab]===!0}function cb(n){return(n.flags&4)!==0}function bs(n){return n.componentOffset>-1}function Yg(n){return(n.flags&1)===1}function tr(n){return!!n.template}function md(n){return(n[ge]&512)!==0}function Tc(n){return(n[ge]&256)===256}var ug=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var vi=(()=>{let n=()=>ub;return n.ngInherit=!0,n})();function ub(n){return n.type.prototype.ngOnChanges&&(n.setInput=gN),mN}function mN(){let n=hb(this),e=n?.current;if(e){let t=n.previous;if(t===lo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gN(n,e,t,r,i){let o=this.declaredInputs[r],s=hb(n)||yN(n,{previous:lo,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new ug(u&&u.currentValue,t,l===lo),lb(n,e,i,t)}var db="__ngSimpleChanges__";function hb(n){return n[db]||null}function yN(n,e){return n[db]=e}var aC=null;var Ye=function(n,e=null,t){aC?.(n,e,t)},vN="svg",_N="math";function nr(n){for(;Array.isArray(n);)n=n[Or];return n}function fb(n,e){return nr(e[n])}function sr(n,e){return nr(e[n.index])}function Zg(n,e){return n.data[e]}function pb(n,e){return n[e]}function rr(n,e){let t=e[n];return gi(t)?t:t[Or]}function Jg(n){return(n[ge]&128)===128}function EN(n){return Fr(n[en])}function ys(n,e){return e==null?null:n[e]}function mb(n){n[us]=0}function gb(n){n[ge]&1024||(n[ge]|=1024,Jg(n)&&Ld(n))}function IN(n,e){for(;n>0;)e=e[Cs],n--;return e}function Vd(n){return!!(n[ge]&9216||n[Nn]?.dirty)}function dg(n){n[Mr].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),Vd(n)&&Ld(n)}function Ld(n){n[Mr].changeDetectionScheduler?.notify(0);let e=fo(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!Jg(e)));)e=fo(e)}function yb(n,e){if(Tc(n))throw new te(911,!1);n[mi]===null&&(n[mi]=[]),n[mi].push(e)}function wN(n,e){if(n[mi]===null)return;let t=n[mi].indexOf(e);t!==-1&&n[mi].splice(t,1)}function fo(n){let e=n[en];return Fr(e)?e[en]:e}function vb(n){return n[dd]??=[]}function _b(n){return n.cleanup??=[]}var be={lFrame:Ab(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hg=!1;function CN(){return be.lFrame.elementDepthCount}function bN(){be.lFrame.elementDepthCount++}function TN(){be.lFrame.elementDepthCount--}function Eb(){return be.bindingsEnabled}function SN(){return be.skipHydrationRootTNode!==null}function DN(n){return be.skipHydrationRootTNode===n}function AN(){be.skipHydrationRootTNode=null}function ke(){return be.lFrame.lView}function Ht(){return be.lFrame.tView}function B(n){return be.lFrame.contextLView=n,n[bt]}function U(n){return be.lFrame.contextLView=null,n}function On(){let n=Ib();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ib(){return be.lFrame.currentTNode}function xN(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Sc(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function wb(){return be.lFrame.isParent}function RN(){be.lFrame.isParent=!1}function MN(){return be.lFrame.contextLView}function Cb(){return hg}function cC(n){let e=hg;return hg=n,e}function Dc(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bb(){return be.lFrame.bindingIndex}function PN(n){return be.lFrame.bindingIndex=n}function Ts(){return be.lFrame.bindingIndex++}function Xg(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function NN(){return be.lFrame.inI18n}function kN(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,fg(e)}function ON(){return be.lFrame.currentDirectiveIndex}function fg(n){be.lFrame.currentDirectiveIndex=n}function FN(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Tb(n){be.lFrame.currentQueryIndex=n}function VN(n){let e=n[Ce];return e.type===2?e.declTNode:e.type===1?n[Kn]:null}function Sb(n,e,t){if(t&we.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&we.Host);)if(i=VN(o),i===null||(o=o[Cs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=be.lFrame=Db();return r.currentTNode=e,r.lView=n,!0}function ey(n){let e=Db(),t=n[Ce];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Db(){let n=be.lFrame,e=n===null?null:n.child;return e===null?Ab(n):e}function Ab(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xb(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Rb=xb;function ty(){let n=xb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function LN(n){return(be.lFrame.contextLView=IN(n,be.lFrame.contextLView))[bt]}function Vr(){return be.lFrame.selectedIndex}function po(n){be.lFrame.selectedIndex=n}function jd(){let n=be.lFrame;return Zg(n.tView,n.selectedIndex)}function jN(){return be.lFrame.currentNamespace}var Mb=!0;function ny(){return Mb}function ry(n){Mb=n}function BN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ub(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Pb(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function nd(n,e,t){Nb(n,e,3,t)}function rd(n,e,t,r){(n[ge]&3)===t&&Nb(n,e,t,r)}function Gm(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function Nb(n,e,t,r){let i=r!==void 0?n[us]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[us]+=65536),(a<o||o==-1)&&(UN(n,t,e,l),n[us]=(n[us]&4294901760)+l+2),l++}function lC(n,e){Ye(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),Ye(5,n,e)}}function UN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ge]>>14<n[us]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,lC(a,o)):lC(a,o)}var hs=-1,mo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function $N(n){return(n.flags&8)!==0}function HN(n){return(n.flags&16)!==0}function qN(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];zN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function kb(n){return n===3||n===4||n===6}function zN(n){return n.charCodeAt(0)===64}function yc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?uC(n,t,i,null,e[++r]):uC(n,t,i,null,null))}}return n}function uC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Ob(n){return n!==hs}function gd(n){return n&32767}function GN(n){return n>>16}function yd(n,e){let t=GN(n),r=e;for(;t>0;)r=r[Cs],t--;return r}var pg=!0;function vd(n){let e=pg;return pg=n,e}var WN=256,Fb=WN-1,Vb=5,KN=0,er={};function QN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(hc)&&(r=t[hc]),r==null&&(r=t[hc]=KN++);let i=r&Fb,o=1<<i;e.data[n+(i>>Vb)]|=o}function _d(n,e){let t=Lb(n,e);if(t!==-1)return t;let r=e[Ce];r.firstCreatePass&&(n.injectorIndex=e.length,Wm(r.data,n),Wm(e,null),Wm(r.blueprint,null));let i=iy(n,e),o=n.injectorIndex;if(Ob(i)){let s=gd(i),a=yd(i,e),l=a[Ce].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Wm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Lb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function iy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Hb(i),r===null)return hs;if(t++,i=i[Cs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hs}function mg(n,e,t){QN(n,e,t)}function YN(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(kb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function jb(n,e,t){if(t&we.Optional||n!==void 0)return n;Gg(e,"NodeInjector")}function Bb(n,e,t,r){if(t&we.Optional&&r===void 0&&(r=null),(t&(we.Self|we.Host))===0){let i=n[ps],o=dn(void 0);try{return i?i.get(e,r,t&we.Optional):QC(e,r,t&we.Optional)}finally{dn(o)}}return jb(r,e,t)}function Ub(n,e,t,r=we.Default,i){if(n!==null){if(e[ge]&2048&&!(r&we.Self)){let s=tk(n,e,t,r,er);if(s!==er)return s}let o=$b(n,e,t,r,er);if(o!==er)return o}return Bb(e,t,r,i)}function $b(n,e,t,r,i){let o=XN(t);if(typeof o=="function"){if(!Sb(e,n,r))return r&we.Host?jb(i,t,r):Bb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&we.Optional))Gg(t);else return s}finally{Rb()}}else if(typeof o=="number"){let s=null,a=Lb(n,e),l=hs,u=r&we.Host?e[Gn][Kn]:null;for((a===-1||r&we.SkipSelf)&&(l=a===-1?iy(n,e):e[a+8],l===hs||!hC(r,!1)?a=-1:(s=e[Ce],a=gd(l),e=yd(l,e)));a!==-1;){let h=e[Ce];if(dC(o,a,h.data)){let y=ZN(a,e,t,s,r,u);if(y!==er)return y}l=e[a+8],l!==hs&&hC(r,e[Ce].data[a+8]===u)&&dC(o,a,e)?(s=h,a=gd(l),e=yd(l,e)):a=-1}}return i}function ZN(n,e,t,r,i,o){let s=e[Ce],a=s.data[n+8],l=r==null?bs(a)&&pg:r!=s&&(a.type&3)!==0,u=i&we.Host&&o===a,h=JN(a,s,t,l,u);return h!==null?Ed(e,s,h,a):er}function JN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,y=r?a:a+h,I=i?a+h:u;for(let E=y;E<I;E++){let M=s[E];if(E<l&&t===M||E>=l&&M.type===t)return E}if(i){let E=s[l];if(E&&tr(E)&&E.type===t)return l}return null}function Ed(n,e,t,r){let i=n[t],o=e.data;if(i instanceof mo){let s=i;s.resolving&&WC(HP(o[t]));let a=vd(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?dn(s.injectImpl):null,h=Sb(n,r,we.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&BN(t,o[t],e)}finally{u!==null&&dn(u),vd(a),s.resolving=!1,Rb()}}return i}function XN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(hc)?n[hc]:void 0;return typeof e=="number"?e>=0?e&Fb:ek:e}function dC(n,e,t){let r=1<<n;return!!(t[e+(n>>Vb)]&r)}function hC(n,e){return!(n&we.Self)&&!(n&we.Host&&e)}var ao=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ub(this._tNode,this._lView,e,kd(r),t)}};function ek(){return new ao(On(),ke())}function Lr(n){return Cc(()=>{let e=n.prototype.constructor,t=e[sd]||gg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[sd]||gg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function gg(n){return $C(n)?()=>{let e=gg(Zt(n));return e&&e()}:co(n)}function tk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!md(s);){let a=$b(o,s,t,r|we.Self,er);if(a!==er)return a;let l=o.parent;if(!l){let u=s[sb];if(u){let h=u.get(t,er,r);if(h!==er)return h}l=Hb(s),s=s[Cs]}o=l}return i}function Hb(n){let e=n[Ce],t=e.type;return t===2?e.declTNode:t===1?n[Kn]:null}function oy(n){return YN(On(),n)}function fC(n,e=null,t=null,r){let i=qb(n,e,t,r);return i.resolveInjectorInitializers(),i}function qb(n,e=null,t=null,r,i=new Set){let o=[t||Pn,iN(n)];return r=r||(typeof n=="object"?void 0:hn(n)),new pc(o,e||Qg(),r||null,i)}var Ft=class n{static THROW_IF_NOT_FOUND=so;static NULL=new ud;static create(e,t){if(Array.isArray(e))return fC({name:""},t,e,"");{let r=e.name??"";return fC({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>de(ZC)});static __NG_ELEMENT_ID__=-1};var nk=new ee("");nk.__NG_ELEMENT_ID__=n=>{let e=On();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&we.Optional)return null;throw new te(204,!1)};var zb=!1,Ac=(()=>{class n{static __NG_ELEMENT_ID__=rk;static __NG_ENV_ID__=t=>t}return n})(),yg=class extends Ac{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return yb(this._lView,e),()=>wN(this._lView,e)}};function rk(){return new yg(ke())}var vs=class{},sy=new ee("",{providedIn:"root",factory:()=>!1});var Gb=new ee(""),Wb=new ee(""),vo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new kt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Bd=(()=>{class n{internalPendingTasks=b(vo);scheduler=b(vs);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return C(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),vg=class extends pt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ib()&&(this.destroyRef=b(Ac,{optional:!0})??void 0,this.pendingTasks=b(vo,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof at&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ct=vg;function Id(...n){}function Kb(n){let e,t;function r(){n=Id;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pC(n){return queueMicrotask(()=>n()),()=>{n=Id}}var ay="isAngularZone",wd=ay+"_ID",ik=0,We=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ct(!1);onMicrotaskEmpty=new Ct(!1);onStable=new Ct(!1);onError=new Ct(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=zb}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ak(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ay)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ok,Id,Id);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ok={};function cy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Kb(()=>{n.callbackScheduled=!1,_g(n),n.isCheckStableRunning=!0,cy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),_g(n)}function ak(n){let e=()=>{sk(n)},t=ik++;n._inner=n._inner.fork({name:"angular",properties:{[ay]:!0,[wd]:t,[wd+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(ck(l))return r.invokeTask(o,s,a,l);try{return mC(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gC(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return mC(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!lk(l)&&e(),gC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,_g(n),cy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function _g(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gC(n){n._nesting--,cy(n)}var Eg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ct;onMicrotaskEmpty=new Ct;onStable=new Ct;onError=new Ct;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function ck(n){return Qb(n,"__ignore_ng_zone__")}function lk(n){return Qb(n,"__scheduler_tick__")}function Qb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Pr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},uk=new ee("",{providedIn:"root",factory:()=>{let n=b(We),e=b(Pr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function yC(n,e){return UC(n,e)}function dk(n){return UC(BC,n)}var Ge=(yC.required=dk,yC);function hk(){return ly(On(),ke())}function ly(n,e){return new jr(sr(n,e))}var jr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=hk}return n})();function fk(n){return typeof n=="function"&&n[Rn]!==void 0}function Ss(n,e){let t=wm(n,e?.equal),r=t[Rn];return t.set=i=>ic(r,i),t.update=i=>Cm(r,i),t.asReadonly=pk.bind(t),t}function pk(){let n=this[Rn];if(n.readonlyFn===void 0){let e=()=>this();e[Rn]=n,n.readonlyFn=e}return n.readonlyFn}function Yb(n){return fk(n)&&typeof n.set=="function"}function Zb(n){return(n.flags&128)===128}var Jb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Jb||{}),Xb=new Map,mk=0;function gk(){return mk++}function yk(n){Xb.set(n[Fd],n)}function Ig(n){Xb.delete(n[Fd])}var vC="__ngContext__";function xc(n,e){gi(e)?(n[vC]=e[Fd],yk(e)):n[vC]=e}function eT(n){return nT(n[gc])}function tT(n){return nT(n[zn])}function nT(n){for(;n!==null&&!Fr(n);)n=n[zn];return n}var wg;function rT(n){wg=n}function vk(){if(wg!==void 0)return wg;if(typeof document<"u")return document;throw new te(210,!1)}var uy=new ee("",{providedIn:"root",factory:()=>_k}),_k="ng",dy=new ee(""),_o=new ee("",{providedIn:"platform",factory:()=>"unknown"});var hy=new ee("",{providedIn:"root",factory:()=>vk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ek="h",Ik="b";var iT=!1,wk=new ee("",{providedIn:"root",factory:()=>iT});var oT=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(oT||{}),Ud=new ee(""),_C=new Set;function Rc(n){_C.has(n)||(_C.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ck=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();var bk=()=>null;function sT(n,e,t=!1){return bk(n,e,t)}function aT(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Tb(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Cg(n,e,t){Tb(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function cT(n,e,t){if(cb(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Ee(r)}}}var ir=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ir||{});var Xu;function Tk(){if(Xu===void 0&&(Xu=null,rg.trustedTypes))try{Xu=rg.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xu}function EC(n){return Tk()?.createScriptURL(n)||n}var Cd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jC})`}};function fy(n){return n instanceof Cd?n.changingThisBreaksApplicationSecurity:n}function lT(n,e){let t=Sk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${jC})`)}return t===e}function Sk(n){return n instanceof Cd&&n.getTypeName()||null}var Dk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ak(n){return n=String(n),n.match(Dk)?n:"unsafe:"+n}var py=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(py||{});function dt(n){let e=dT();return e?e.sanitize(py.URL,n)||"":lT(n,"URL")?fy(n):Ak(Rr(n))}function xk(n){let e=dT();if(e)return EC(e.sanitize(py.RESOURCE_URL,n)||"");if(lT(n,"ResourceURL"))return EC(fy(n));throw new te(904,!1)}function Rk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xk:dt}function uT(n,e,t){return Rk(e,t)(n)}function dT(){let n=ke();return n&&n[Mr].sanitizer}function hT(n){return n instanceof Function?n():n}function Mk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var fT="ng-template";function Pk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Mk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(my(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function my(n){return n.type===4&&n.value!==fT}function Nk(n,e,t){let r=n.type===4&&!t?fT:n.value;return e===r}function kk(n,e,t){let r=4,i=n.attrs,o=i!==null?Vk(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!qn(r)&&!qn(l))return!1;if(s&&qn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Nk(n,l,t)||l===""&&e.length===1){if(qn(r))return!1;s=!0}}else if(r&8){if(i===null||!Pk(n,i,l,t)){if(qn(r))return!1;s=!0}}else{let u=e[++a],h=Ok(l,i,my(n),t);if(h===-1){if(qn(r))return!1;s=!0;continue}if(u!==""){let y;if(h>o?y="":y=i[h+1].toLowerCase(),r&2&&u!==y){if(qn(r))return!1;s=!0}}}}return qn(r)||s}function qn(n){return(n&1)===0}function Ok(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Lk(e,n)}function Fk(n,e,t=!1){for(let r=0;r<e.length;r++)if(kk(n,e[r],t))return!0;return!1}function Vk(n){for(let e=0;e<n.length;e++){let t=n[e];if(kb(t))return e}return n.length}function Lk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function IC(n,e){return n?":not("+e.trim()+")":e}function jk(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qn(s)&&(e+=IC(o,i),i=""),r=s,o=o||!qn(r);t++}return i!==""&&(e+=IC(o,i)),e}function Bk(n){return n.map(jk).join(",")}function Uk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!qn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var fn={};function $k(n,e){return n.createText(e)}function Hk(n,e,t){n.setValue(e,t)}function pT(n,e,t){return n.createElement(e,t)}function bd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function mT(n,e,t){n.appendChild(e,t)}function wC(n,e,t,r,i){r!==null?bd(n,e,t,r,i):mT(n,e,t)}function qk(n,e,t){n.removeChild(null,e,t)}function zk(n,e,t){n.setAttribute(e,"style",t)}function Gk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qN(n,e,r),i!==null&&Gk(n,e,i),o!==null&&zk(n,e,o)}function gy(n,e,t,r,i,o,s,a,l,u,h){let y=tn+r,I=y+i,E=Wk(y,I),M=typeof u=="function"?u():u;return E[Ce]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:M,incompleteFirstPass:!1,ssrId:h}}function Wk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fn);return t}function Kk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yy(n,e,t,r,i,o,s,a,l,u,h){let y=e.blueprint.slice();return y[Or]=i,y[ge]=r|4|128|8|64|1024,(u!==null||n&&n[ge]&2048)&&(y[ge]|=2048),mb(y),y[en]=y[Cs]=n,y[bt]=t,y[Mr]=s||n&&n[Mr],y[gt]=a||n&&n[gt],y[ps]=l||n&&n[ps]||null,y[Kn]=o,y[Fd]=gk(),y[mc]=h,y[sb]=u,y[Gn]=e.type==2?n[Gn]:y,y}function Qk(n,e,t){let r=sr(e,n),i=Kk(t),o=n[Mr].rendererFactory,s=vy(n,yy(n,i,null,yT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function yT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vy(n,e){return n[gc]?n[sC][zn]=e:n[gc]=e,n[sC]=e,e}function _(n=1){_T(Ht(),ke(),Vr()+n,!1)}function _T(n,e,t,r){if(!r)if((e[ge]&3)===3){let o=n.preOrderCheckHooks;o!==null&&nd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&rd(e,o,0,t)}po(t)}var $d=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($d||{});function bg(n,e,t,r){let i=Ee(null);try{let[o,s,a]=n.inputs[t],l=null;(s&$d.SignalBased)!==0&&(l=e[o][Rn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):lb(e,l,o,r)}finally{Ee(i)}}function ET(n,e,t,r,i){let o=Vr(),s=r&2;try{po(-1),s&&e.length>tn&&_T(n,e,tn,!1),Ye(s?2:0,i),t(r,i)}finally{po(o),Ye(s?3:1,i)}}function _y(n,e,t){tO(n,e,t),(t.flags&64)===64&&nO(n,e,t)}function IT(n,e,t=sr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Yk(n,e,t,r){let o=r.get(wk,iT)||t===ir.ShadowDom,s=n.selectRootElement(e,o);return Zk(s),s}function Zk(n){Jk(n)}var Jk=()=>null;function Xk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Ey(n,e,t,r,i,o,s,a){if(!a&&Iy(e,n,t,r,i)){bs(e)&&eO(t,e.index);return}if(e.type&3){let l=sr(e,t);r=Xk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)}else e.type&12}function eO(n,e){let t=rr(e,n);t[ge]&16||(t[ge]|=64)}function tO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;bs(t)&&Qk(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||_d(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Ed(e,n,s,t);if(xc(l,e),o!==null&&sO(e,s-r,l,a,t,o),tr(a)){let u=rr(t.index,e);u[bt]=Ed(e,n,s,t)}}}function nO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=ON();try{po(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];fg(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&rO(l,u)}}finally{po(-1),fg(s)}}function rO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Fk(e,o.selectors,!1)&&(r??=[],tr(o)?r.unshift(o):r.push(o))}return r}function iO(n,e,t,r,i,o){let s=sr(n,e);oO(e[gt],s,o,n.value,t,r,i)}function oO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Rr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function sO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];bg(r,t,l,u)}}function aO(n,e){let t=n[ps],r=t?t.get(Pr,null):null;r&&r.handleError(e)}function Iy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],h=s[l+1],y=e.data[u];bg(y,t[u],h,i),a=!0}if(o)for(let l of o){let u=t[l],h=e.data[l];bg(h,u,r,i),a=!0}return a}function cO(n,e){let t=rr(e,n),r=t[Ce];lO(r,t);let i=t[Or];i!==null&&t[mc]===null&&(t[mc]=sT(i,t[ps])),Ye(18),wy(r,t,t[bt]),Ye(19,t[bt])}function lO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function wy(n,e,t){ey(e);try{let r=n.viewQuery;r!==null&&Cg(1,r,t);let i=n.template;i!==null&&ET(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[gs]?.finishViewCreation(n),n.staticContentQueries&&aT(n,e),n.staticViewQueries&&Cg(2,n.viewQuery,t);let o=n.components;o!==null&&uO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,ty()}}function uO(n,e){for(let t=0;t<e.length;t++)cO(n,e[t])}function Cy(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[ge]&4096?4096:16,l=yy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[ms]=u;let h=n[gs];return h!==null&&(l[gs]=h.createEmbeddedView(o)),wy(o,l,t),l}finally{Ee(i)}}function vc(n,e){return!e||e.firstChild===null||Zb(n)}var dO;function by(n,e){return dO(n,e)}var yi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yi||{});function CT(n){return(n.flags&32)===32}function ds(n,e,t,r,i){if(r!=null){let o,s=!1;Fr(r)?o=r:gi(r)&&(s=!0,r=r[Or]);let a=nr(r);n===0&&t!==null?i==null?mT(e,t,a):bd(e,t,a,i||null,!0):n===1&&t!==null?bd(e,t,a,i||null,!0):n===2?qk(e,a,s):n===3&&e.destroyNode(a),o!=null&&CO(e,n,o,t,i)}}function hO(n,e){bT(n,e),e[Or]=null,e[Kn]=null}function fO(n,e,t,r,i,o){r[Or]=i,r[Kn]=e,qd(n,r,t,1,i,o)}function bT(n,e){e[Mr].changeDetectionScheduler?.notify(9),qd(n,e,e[gt],2,null,null)}function pO(n){let e=n[gc];if(!e)return Km(n[Ce],n);for(;e;){let t=null;if(gi(e))t=e[gc];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[zn]&&e!==n;)gi(e)&&Km(e[Ce],e),e=e[en];e===null&&(e=n),gi(e)&&Km(e[Ce],e),t=e&&e[zn]}e=t}}function Ty(n,e){let t=n[pd],r=t.indexOf(e);t.splice(r,1)}function Hd(n,e){if(Tc(e))return;let t=e[gt];t.destroyNode&&qd(n,e,t,3,null,null),pO(e)}function Km(n,e){if(Tc(e))return;let t=Ee(null);try{e[ge]&=-129,e[ge]|=256,e[Nn]&&_m(e[Nn]),gO(n,e),mO(n,e),e[Ce].type===1&&e[gt].destroy();let r=e[ms];if(r!==null&&Fr(e[en])){r!==e[en]&&Ty(r,e);let i=e[gs];i!==null&&i.detachView(n)}Ig(e)}finally{Ee(t)}}function mO(n,e){let t=n.cleanup,r=e[dd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[dd]=null);let i=e[mi];if(i!==null){e[mi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[hd];if(o!==null){e[hd]=null;for(let s of o)s.destroy()}}function gO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Ye(4,a,l);try{l.call(a)}finally{Ye(5,a,l)}}else{Ye(4,i,o);try{o.call(i)}finally{Ye(5,i,o)}}}}}function yO(n,e,t){return vO(n,e.parent,t)}function vO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Or];if(bs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ir.None||i===ir.Emulated)return null}return sr(r,t)}function _O(n,e,t){return IO(n,e,t)}function EO(n,e,t){return n.type&40?sr(n,t):null}var IO=EO,CC;function Sy(n,e,t,r){let i=yO(n,r,e),o=e[gt],s=r.parent||e[Kn],a=_O(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)wC(o,i,t[l],a,!1);else wC(o,i,t,a,!1);CC!==void 0&&CC(o,r,e,t,i)}function dc(n,e){if(e!==null){let t=e.type;if(t&3)return sr(e,n);if(t&4)return Tg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return dc(n,r);{let i=n[e.index];return Fr(i)?Tg(-1,i):nr(i)}}else{if(t&128)return dc(n,e.next);if(t&32)return by(e,n)()||nr(n[e.index]);{let r=TT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fo(n[Gn]);return dc(i,r)}else return dc(n,e.next)}}}return null}function TT(n,e){if(e!==null){let r=n[Gn][Kn],i=e.projection;return r.projection[i]}return null}function Tg(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[Ce].firstChild;if(i!==null)return dc(r,i)}return e[ho]}function Dy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&xc(nr(a),r),t.flags|=2),!CT(t))if(l&8)Dy(n,e,t.child,r,i,o,!1),ds(e,n,i,a,o);else if(l&32){let u=by(t,r),h;for(;h=u();)ds(e,n,i,h,o);ds(e,n,i,a,o)}else l&16?wO(n,e,r,t,i,o):ds(e,n,i,a,o);t=s?t.projectionNext:t.next}}function qd(n,e,t,r,i,o){Dy(t,r,n.firstChild,e,i,o,!1)}function wO(n,e,t,r,i,o){let s=t[Gn],l=s[Kn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];ds(e,n,i,h,o)}else{let u=l,h=s[en];Zb(r)&&(u.flags|=128),Dy(n,e,u,h,i,o,!0)}}function CO(n,e,t,r,i){let o=t[ho],s=nr(t);o!==s&&ds(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let l=t[a];qd(l[Ce],l,n,e,r,o)}}function bO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:yi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yi.Important),n.setStyle(t,r,i,o))}}function Td(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(nr(o)),Fr(o)&&TO(o,r);let s=t.type;if(s&8)Td(n,e,t.child,r);else if(s&32){let a=by(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=TT(e,t);if(Array.isArray(a))r.push(...a);else{let l=fo(e[Gn]);Td(l[Ce],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function TO(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[Ce].firstChild;i!==null&&Td(r[Ce],r,i,e)}n[ho]!==n[Or]&&e.push(n[ho])}function ST(n){if(n[zm]!==null){for(let e of n[zm])e.impl.addSequence(e);n[zm].length=0}}var DT=[];function SO(n){return n[Nn]??DO(n)}function DO(n){let e=DT.pop()??Object.create(xO);return e.lView=n,e}function AO(n){n.lView[Nn]!==n&&(n.lView=null,DT.push(n))}var xO=Se(H({},nc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ld(n.lView)},consumerOnSignalRead(){this.lView[Nn]=this}});function RO(n){let e=n[Nn]??Object.create(MO);return e.lView=n,e}var MO=Se(H({},nc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=fo(n.lView);for(;e&&!AT(e[Ce]);)e=fo(e);e&&gb(e)},consumerOnSignalRead(){this.lView[Nn]=this}});function AT(n){return n.type!==2}function xT(n){if(n[hd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ge]&8192)}}var PO=100;function RT(n,e=!0,t=0){let i=n[Mr].rendererFactory,o=!1;o||i.begin?.();try{NO(n,t)}catch(s){throw e&&aO(n,s),s}finally{o||i.end?.()}}function NO(n,e){let t=Cb();try{cC(!0),Sg(n,e);let r=0;for(;Vd(n);){if(r===PO)throw new te(103,!1);r++,Sg(n,1)}}finally{cC(t)}}function kO(n,e,t,r){if(Tc(e))return;let i=e[ge],o=!1,s=!1;ey(e);let a=!0,l=null,u=null;o||(AT(n)?(u=SO(e),l=Eu(u)):fm()===null?(a=!1,u=RO(e),l=Eu(u)):e[Nn]&&(_m(e[Nn]),e[Nn]=null));try{mb(e),PN(n.bindingStartIndex),t!==null&&ET(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let E=n.preOrderCheckHooks;E!==null&&nd(e,E,null)}else{let E=n.preOrderHooks;E!==null&&rd(e,E,0,null),Gm(e,0)}if(s||OO(e),xT(e),MT(e,0),n.contentQueries!==null&&aT(n,e),!o)if(h){let E=n.contentCheckHooks;E!==null&&nd(e,E)}else{let E=n.contentHooks;E!==null&&rd(e,E,1),Gm(e,1)}VO(n,e);let y=n.components;y!==null&&NT(e,y,0);let I=n.viewQuery;if(I!==null&&Cg(2,I,r),!o)if(h){let E=n.viewCheckHooks;E!==null&&nd(e,E)}else{let E=n.viewHooks;E!==null&&rd(e,E,2),Gm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qm]){for(let E of e[qm])E();e[qm]=null}o||(ST(e),e[ge]&=-73)}catch(h){throw o||Ld(e),h}finally{u!==null&&(ym(u,l),a&&AO(u)),ty()}}function MT(n,e){for(let t=eT(n);t!==null;t=tT(t))for(let r=Jt;r<t.length;r++){let i=t[r];PT(i,e)}}function OO(n){for(let e=eT(n);e!==null;e=tT(e)){if(!(e[ge]&2))continue;let t=e[pd];for(let r=0;r<t.length;r++){let i=t[r];gb(i)}}}function FO(n,e,t){Ye(18);let r=rr(e,n);PT(r,t),Ye(19,r[bt])}function PT(n,e){Jg(n)&&Sg(n,e)}function Sg(n,e){let r=n[Ce],i=n[ge],o=n[Nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vm(o)),s||=!1,o&&(o.dirty=!1),n[ge]&=-9217,s)kO(r,n,r.template,n[bt]);else if(i&8192){xT(n),MT(n,1);let a=r.components;a!==null&&NT(n,a,1),ST(n)}}function NT(n,e,t){for(let r=0;r<e.length;r++)FO(n,e[r],t)}function VO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)po(~i);else{let o=i,s=t[++r],a=t[++r];kN(s,o);let l=e[o];Ye(24,l),a(2,l),Ye(25,l)}}}finally{po(-1)}}function Ay(n,e){let t=Cb()?64:1088;for(n[Mr].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let r=fo(n);if(md(n)&&!r)return n;n=r}return null}function kT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function OT(n,e){let t=Jt+e;if(t<n.length)return n[t]}function zd(n,e,t,r=!0){let i=e[Ce];if(LO(i,e,n,t),r){let s=Tg(t,n),a=e[gt],l=a.parentNode(n[ho]);l!==null&&fO(i,n[Kn],a,e,l,s)}let o=e[mc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function FT(n,e){let t=_c(n,e);return t!==void 0&&Hd(t[Ce],t),t}function _c(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[ms];i!==null&&i!==n&&Ty(i,r),e>0&&(n[t-1][zn]=r[zn]);let o=ld(n,Jt+e);hO(r[Ce],r);let s=o[gs];s!==null&&s.detachView(o[Ce]),r[en]=null,r[zn]=null,r[ge]&=-129}return r}function LO(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][zn]=e),r<o-Jt?(e[zn]=t[i],YC(t,Jt+r,e)):(t.push(e),e[zn]=null),e[en]=t;let s=e[ms];s!==null&&t!==s&&VT(s,e);let a=e[gs];a!==null&&a.insertView(n),dg(e),e[ge]|=128}function VT(n,e){let t=n[pd],r=e[en];if(gi(r))n[ge]|=2;else{let i=r[en][Gn];e[Gn]!==i&&(n[ge]|=2)}t===null?n[pd]=[e]:t.push(e)}var Sd=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ce];return Td(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[bt]}set context(e){this._lView[bt]=e}get destroyed(){return Tc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[en];if(Fr(e)){let t=e[fd],r=t?t.indexOf(this):-1;r>-1&&(_c(e,r),ld(t,r))}this._attachedToViewContainer=!1}Hd(this._lView[Ce],this._lView)}onDestroy(e){yb(this._lView,e)}markForCheck(){Ay(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){dg(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,RT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=md(this._lView),t=this._lView[ms];t!==null&&!e&&Ty(t,this._lView),bT(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=md(this._lView),r=this._lView[ms];r!==null&&!t&&VT(r,this._lView),dg(this._lView)}};function xy(n,e,t,r,i){let o=n.data[e];if(o===null)o=jO(n,e,t,r,i),NN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=xN();o.injectorIndex=s===null?-1:s.injectorIndex}return Sc(o,!0),o}function jO(n,e,t,r,i){let o=Ib(),s=wb(),a=s?o:o&&o.parent,l=n.data[e]=UO(n,a,t,e,r,i);return BO(n,l,o,s),l}function BO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function UO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return SN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var QK=new RegExp(`^(\\d+)*(${Ik}|${Ek})*(.*)`);var $O=()=>null;function Ec(n,e){return $O(n,e)}var HO=class{},LT=class{},Dg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${hn(e)}.`)}},Gd=class{static NULL=new Dg},_s=class{},_i=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>qO()}return n})();function qO(){let n=ke(),e=On(),t=rr(e.index,n);return(gi(t)?t:n)[gt]}var zO=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var Qm={},Ag=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kd(r);let i=this.injector.get(e,Qm,r);return i!==Qm||t===Qm?i:this.parentInjector.get(e,t,r)}};function bC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Xw(i,a);else if(o==2){let l=a,u=e[++s];r=Xw(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function xe(n,e=we.Default){let t=ke();if(t===null)return de(n,e);let r=On();return Ub(r,t,Zt(n),e)}function jT(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,l=null,u=null,h=WO(s);h===null?a=s:[a,l,u]=h,YO(n,e,t,a,o,l,u)}o!==null&&r!==null&&GO(t,r,o)}function GO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function WO(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&tr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,KO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function KO(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function QO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function YO(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let I=0;I<a;I++){let E=r[I];!l&&tr(E)&&(l=!0,QO(n,t,I)),mg(_d(t,e),n,E.type)}nF(t,n.data.length,a);for(let I=0;I<a;I++){let E=r[I];E.providersResolver&&E.providersResolver(E)}let u=!1,h=!1,y=vT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let E=r[I];if(t.mergedAttrs=yc(t.mergedAttrs,E.hostAttrs),JO(n,t,e,y,E),tF(y,E,i),s!==null&&s.has(E)){let[V,F]=s.get(E);t.directiveToIndex.set(E.type,[y,V+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(E))&&t.directiveToIndex.set(E.type,y);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let M=E.type.prototype;!u&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),y++}ZO(n,t,o)}function ZO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))TC(0,e,i,r),TC(1,e,i,r),DC(e,r,!1);else{let o=t.get(i);SC(0,e,o,r),SC(1,e,o,r),DC(e,r,!0)}}}function TC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),BT(e,o)}}function SC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),BT(e,s)}}function BT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function DC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||my(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function JO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=co(i.type,!0)),s=new mo(o,tr(i),xe);n.blueprint[r]=s,t[r]=s,XO(n,e,r,vT(n,t,i.hostVars,fn),i)}function XO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;eF(s)!=a&&s.push(a),s.push(t,r,o)}}function eF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;tr(e)&&(t[""]=n)}}function nF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UT(n,e,t,r,i,o,s,a){let l=e.consts,u=ys(l,s),h=xy(e,n,2,r,u);return o&&jT(e,t,h,ys(l,a),i),h.mergedAttrs=yc(h.mergedAttrs,h.attrs),h.attrs!==null&&bC(h,h.attrs,!1),h.mergedAttrs!==null&&bC(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function $T(n,e){Pb(n,e),cb(e)&&n.queries.elementEnd(e)}var Dd=class extends Gd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=uo(e);return new Es(t,this.ngModule)}};function rF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&$d.SignalBased)!==0};return i&&(o.transform=i),o})}function iF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function oF(n,e,t){let r=e instanceof Xt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Ag(t,r):t}function sF(n){let e=n.get(_s,null);if(e===null)throw new te(407,!1);let t=n.get(zO,null),r=n.get(vs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function aF(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return pT(e,t,t==="svg"?vN:t==="math"?_N:null)}var Es=class extends LT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=rF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=iF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Bk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Ye(22);let o=Ee(null);try{let s=this.componentDef,a=r?["ng-version","19.2.7"]:Uk(this.componentDef.selectors[0]),l=gy(0,null,null,1,0,null,null,null,null,[a],null),u=oF(s,i||this.ngModule,e),h=sF(u),y=h.rendererFactory.createRenderer(null,s),I=r?Yk(y,r,s.encapsulation,u):aF(s,y),E=yy(null,l,null,512|yT(s),null,null,h,y,u,null,sT(I,u,!0));E[tn]=I,ey(E);let M=null;try{let V=UT(tn,l,E,"#host",()=>[this.componentDef],!0,0);I&&(gT(y,I,V),xc(I,E)),_y(l,E,V),cT(l,V,E),$T(l,V),t!==void 0&&cF(V,this.ngContentSelectors,t),M=rr(V.index,E),E[bt]=M[bt],wy(l,E,null)}catch(V){throw M!==null&&Ig(M),Ig(E),V}finally{Ye(23),ty()}return new xg(this.componentType,E)}finally{Ee(o)}}},xg=class extends HO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Zg(t[Ce],tn),this.location=ly(this._tNode,t),this.instance=rr(this._tNode.index,t)[bt],this.hostView=this.changeDetectorRef=new Sd(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Iy(r,i[Ce],i,e,t);this.previousInputValues.set(e,t);let s=rr(r.index,i);Ay(s,1)}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Wd=(()=>{class n{static __NG_ELEMENT_ID__=lF}return n})();function lF(){let n=On();return dF(n,ke())}var uF=Wd,HT=class extends uF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ly(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=iy(this._hostTNode,this._hostLView);if(Ob(e)){let t=yd(e,this._hostLView),r=gd(e),i=t[Ce].data[r+8];return new ao(i,t)}else return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=AC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ec(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,vc(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!pN(e),a;if(s)a=t;else{let M=t||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let l=s?e:new Es(uo(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let V=(s?u:this.parentInjector).get(Xt,null);V&&(o=V)}let h=uo(l.componentType??{}),y=Ec(this._lContainer,h?.id??null),I=y?.firstChild??null,E=l.create(u,i,I,o);return this.insertImpl(E.hostView,a,vc(this._hostTNode,y)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(EN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[en],u=new HT(l,l[Kn],l[en]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return zd(s,i,o,r),e.attachToViewContainerRef(),YC(Ym(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=AC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);r&&(ld(Ym(this._lContainer),t),Hd(r[Ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=_c(this._lContainer,t);return r&&ld(Ym(this._lContainer),t)!=null?new Sd(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function AC(n){return n[fd]}function Ym(n){return n[fd]||(n[fd]=[])}function dF(n,e){let t,r=e[n.index];return Fr(r)?t=r:(t=kT(r,e,null,n),e[n.index]=t,vy(e,t)),fF(t,e,n,r),new HT(t,n,e)}function hF(n,e){let t=n[gt],r=t.createComment(""),i=sr(e,n),o=t.parentNode(i);return bd(t,o,r,t.nextSibling(i),!1),r}var fF=gF,pF=()=>!1;function mF(n,e,t){return pF(n,e,t)}function gF(n,e,t,r){if(n[ho])return;let i;t.type&8?i=nr(r):i=hF(e,t),n[ho]=i}var Ic=class{},Ry=class{};var Rg=class extends Ic{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=XC(e);this._bootstrapComponents=hT(o.bootstrap),this._r3Injector=qb(e,t,[{provide:Ic,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver},...r],hn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mg=class extends Ry{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Rg(this.moduleType,e,[])}};var Ad=class extends Ic{injector;componentFactoryResolver=new Dd(this);instance=null;constructor(e){super();let t=new pc([...e.providers,{provide:Ic,useValue:this},{provide:Gd,useValue:this.componentFactoryResolver}],e.parent||Qg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kd(n,e,t=null){return new Ad({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var yF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=eb(!1,t.type),i=r.length>0?Kd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(de(Xt))})}return n})();function ne(n){return Cc(()=>{let e=qT(n),t=Se(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Jb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(yF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ir.Emulated,styles:n.styles||Pn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Rc("NgStandalone"),zT(t);let r=n.dependencies;return t.directiveDefs=xC(r,!1),t.pipeDefs=xC(r,!0),t.id=wF(t),t})}function vF(n){return uo(n)||nN(n)}function _F(n){return n!==null}function Br(n){return Cc(()=>({type:n.type,bootstrap:n.bootstrap||Pn,declarations:n.declarations||Pn,imports:n.imports||Pn,exports:n.exports||Pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function EF(n,e){if(n==null)return lo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=$d.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function IF(n){if(n==null)return lo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ht(n){return Cc(()=>{let e=qT(n);return zT(e),e})}function My(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function qT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||lo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:EF(n.inputs,e),outputs:IF(n.outputs),debugInfo:null}}function zT(n){n.features?.forEach(e=>e(n))}function xC(n,e){if(!n)return null;let t=e?rN:vF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(_F)}function wF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function CF(n){return Object.getPrototypeOf(n.prototype).constructor}function Fn(n){let e=CF(n.type),t=!0,r=[n];for(;e;){let i;if(tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Zm(n.inputs),s.declaredInputs=Zm(n.declaredInputs),s.outputs=Zm(n.outputs);let a=i.hostBindings;a&&AF(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&SF(n,l),u&&DF(n,u),bF(n,i),OP(n.outputs,i.outputs),tr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}TF(r)}function bF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function TF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yc(i.hostAttrs,t=yc(t,i.hostAttrs))}}function Zm(n){return n===lo?{}:n===Pn?[]:n}function SF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function DF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function AF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Qd(n,e,t){return n[e]=t}function xF(n,e){return n[e]}function Wn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Py(n,e,t,r){let i=Wn(n,e,t);return Wn(n,e+1,r)||i}function GT(n,e,t,r,i){let o=Py(n,e,t,r);return Wn(n,e+2,i)||o}function RF(n,e,t,r,i,o,s,a,l){let u=e.consts,h=xy(e,n,4,s||null,a||null);Eb()&&jT(e,t,h,ys(u,l),wT),h.mergedAttrs=yc(h.mergedAttrs,h.attrs),Pb(e,h);let y=h.tView=gy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),y.queries=e.queries.embeddedTView(h)),h}function Pg(n,e,t,r,i,o,s,a,l,u){let h=t+tn,y=e.firstCreatePass?RF(h,e,n,r,i,o,s,a,l):e.data[h];Sc(y,!1);let I=MF(e,n,y,t);ny()&&Sy(e,n,I,y),xc(I,n);let E=kT(I,n,I,y);return n[h]=E,vy(n,E),mF(E,y,n),Yg(y)&&_y(e,n,y),l!=null&&IT(n,y,u),y}function K(n,e,t,r,i,o,s,a){let l=ke(),u=Ht(),h=ys(u.consts,o);return Pg(l,u,n,e,t,r,i,h,s,a),K}var MF=PF;function PF(n,e,t,r){return ry(!0),e[gt].createComment("")}var WT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KT=new ee("");var NF=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new Ng})}return n})(),Ng=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ds(n){return!!n&&typeof n.then=="function"}function kF(n){return!!n&&typeof n.subscribe=="function"}var OF=new ee("");var QT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=b(OF,{optional:!0})??[];injector=b(Ft);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=nn(this.injector,i);if(Ds(o))t.push(o);else if(kF(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ny=new ee("");function FF(){Im(()=>{throw new te(600,!1)})}function VF(n){return n.isBoundToModule}var LF=10;var go=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=b(uk);afterRenderManager=b(Ck);zonelessEnabled=b(sy);rootEffectScheduler=b(NF);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new pt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=b(vo).hasPendingTasks.pipe(ue(t=>!t));constructor(){b(Ud,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=b(Xt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ft.NULL){Ye(10);let o=t instanceof LT;if(!this._injector.get(QT).done){let E="";throw new te(405,E)}let a;o?a=t:a=this._injector.get(Gd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=VF(a)?void 0:this._injector.get(Ic),u=r||a.selector,h=a.create(i,[],u,l),y=h.location.nativeElement,I=h.injector.get(KT,null);return I?.registerApplication(y),h.onDestroy(()=>{this.detachView(h.hostView),id(this.components,h),I?.unregisterApplication(y)}),this._loadComponent(h),Ye(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ye(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(oT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ee(t),this.afterTick.next(),Ye(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_s,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LF;)Ye(14),this.synchronizeOnce(),Ye(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)jF(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;id(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ny,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>id(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function id(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jF(n,e,t,r){if(!t&&!Vd(n))return;RT(n,e,t&&!r?0:1)}function Mc(n,e,t,r){let i=ke(),o=Ts();if(Wn(i,o,e)){let s=Ht(),a=jd();iO(a,i,n,e,t,r)}return Mc}function YT(n,e,t,r){return Wn(n,Ts(),t)?e+Rr(t)+r:fn}function BF(n,e,t,r,i,o){let s=bb(),a=Py(n,s,t,i);return Xg(2),a?e+Rr(t)+r+Rr(i)+o:fn}function UF(n,e,t,r,i,o,s,a){let l=bb(),u=GT(n,l,t,i,s);return Xg(3),u?e+Rr(t)+r+Rr(i)+o+Rr(s)+a:fn}function ed(n,e){return n<<17|e<<2}function yo(n){return n>>17&32767}function $F(n){return(n&2)==2}function HF(n,e){return n&131071|e<<17}function kg(n){return n|2}function Is(n){return(n&131068)>>2}function Jm(n,e){return n&-131069|e<<2}function qF(n){return(n&1)===1}function Og(n){return n|1}function zF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yo(s),l=Is(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let y=t;h=y[1],(h===null||bc(y,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let I=yo(n[a+1]);n[r+1]=ed(I,a),I!==0&&(n[I+1]=Jm(n[I+1],r)),n[a+1]=HF(n[a+1],r)}else n[r+1]=ed(a,0),a!==0&&(n[a+1]=Jm(n[a+1],r)),a=r;else n[r+1]=ed(l,0),a===0?a=r:n[l+1]=Jm(n[l+1],r),l=r;u&&(n[r+1]=kg(n[r+1])),RC(n,h,r,!0),RC(n,h,r,!1),GF(e,h,n,r,o),s=ed(a,l),o?e.classBindings=s:e.styleBindings=s}function GF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&bc(o,e)>=0&&(t[r+1]=Og(t[r+1]))}function RC(n,e,t,r){let i=n[t+1],o=e===null,s=r?yo(i):Is(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];WF(l,e)&&(a=!0,n[s+1]=r?Og(u):kg(u)),s=r?yo(u):Is(u)}a&&(n[t+1]=r?kg(i):Og(i))}function WF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bc(n,e)>=0:!1}function W(n,e,t){let r=ke(),i=Ts();if(Wn(r,i,e)){let o=Ht(),s=jd();Ey(o,s,r,n,e,r[gt],t,!1)}return W}function MC(n,e,t,r,i){Iy(e,n,t,i?"class":"style",r)}function Yd(n,e){return KF(n,e,null,!0),Yd}function KF(n,e,t,r){let i=ke(),o=Ht(),s=Xg(2);if(o.firstUpdatePass&&YF(o,n,s,r),e!==fn&&Wn(i,s,e)){let a=o.data[Vr()];tV(o,a,i,i[gt],n,i[s+1]=nV(e,t),r,s)}}function QF(n,e){return e>=n.expandoStartIndex}function YF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Vr()],s=QF(n,t);rV(o,r)&&e===null&&!s&&(e=!1),e=ZF(i,o,e,r),zF(i,o,e,t,s,r)}}function ZF(n,e,t,r){let i=FN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Xm(null,n,e,t,r),t=wc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Xm(i,n,e,t,r),o===null){let l=JF(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Xm(null,n,e,l[1],r),l=wc(l,e.attrs,r),XF(n,e,r,l))}else o=eV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function JF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Is(r)!==0)return n[yo(r)]}function XF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[yo(i)]=r}function eV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wc(r,s,t)}return wc(r,e.attrs,t)}function Xm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),eN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function tV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=qF(u)?PC(l,e,t,i,Is(u),s):void 0;if(!xd(h)){xd(o)||$F(u)&&(o=PC(l,null,t,i,a,s));let y=fb(Vr(),t);bO(r,s,y,i,o)}}function PC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,y=h===null,I=t[i+1];I===fn&&(I=y?Pn:void 0);let E=y?$m(I,r):h===r?I:void 0;if(u&&!xd(E)&&(E=$m(l,r)),xd(E)&&(a=E,s))return a;let M=n[i+1];i=s?yo(M):Is(M)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=$m(l,r))}return a}function xd(n){return n!==void 0}function nV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=hn(fy(n)))),n}function rV(n,e){return(n.flags&(e?8:16))!==0}var Fg=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function eg(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function iV(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),h=e[o],y=eg(o,u,o,h,t);if(y!==0){y<0&&n.updateValue(o,h),o++;continue}let I=n.at(s),E=e[l],M=eg(s,I,l,E,t);if(M!==0){M<0&&n.updateValue(s,E),s--,l--;continue}let V=t(o,u),F=t(s,I),Q=t(o,h);if(Object.is(Q,F)){let he=t(l,E);Object.is(he,V)?(n.swap(o,s),n.updateValue(s,E),l--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new Rd,i??=kC(n,o,s,t),Vg(n,r,o,Q))n.updateValue(o,h),o++,s++;else if(i.has(Q))r.set(V,n.detach(o)),s--;else{let he=n.create(o,e[o]);n.attach(o,he),o++,s++}}for(;o<=l;)NC(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let h=n.at(o),y=u.value,I=eg(o,h,o,y,t);if(I!==0)I<0&&n.updateValue(o,y),o++,u=l.next();else{r??=new Rd,i??=kC(n,o,s,t);let E=t(o,y);if(Vg(n,r,o,E))n.updateValue(o,y),o++,s++,u=l.next();else if(!i.has(E))n.attach(o,n.create(o,y)),o++,s++,u=l.next();else{let M=t(o,h);r.set(M,n.detach(o)),s--}}}for(;!u.done;)NC(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function Vg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function NC(n,e,t,r,i){if(Vg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function kC(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Rd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function $(n,e){Rc("NgControlFlow");let t=ke(),r=Ts(),i=t[r]!==fn?t[r]:-1,o=i!==-1?Md(t,tn+i):void 0,s=0;if(Wn(t,r,n)){let a=Ee(null);try{if(o!==void 0&&FT(o,s),n!==-1){let l=tn+n,u=Md(t,l),h=Ug(t[Ce],l),y=Ec(u,h.tView.ssrId),I=Cy(t,h,e,{dehydratedView:y});zd(u,I,s,vc(h,y))}}finally{Ee(a)}}else if(o!==void 0){let a=OT(o,s);a!==void 0&&(a[bt]=e)}}var Lg=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Jt}};function _e(n){return n}function ft(n,e){return e}var jg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function J(n,e,t,r,i,o,s,a,l,u,h,y,I){Rc("NgControlFlow");let E=ke(),M=Ht(),V=l!==void 0,F=ke(),Q=a?s.bind(F[Gn][bt]):s,he=new jg(V,Q);F[tn+n]=he,Pg(E,M,n+1,e,t,r,i,ys(M.consts,o)),V&&Pg(E,M,n+2,l,u,h,y,ys(M.consts,I))}var Bg=class extends Fg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Jt}at(e){return this.getLView(e)[bt].$implicit}attach(e,t){let r=t[mc];this.needsIndexUpdate||=e!==this.length,zd(this.lContainer,t,e,vc(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,oV(this.lContainer,e)}create(e,t){let r=Ec(this.lContainer,this.templateTNode.tView.ssrId),i=Cy(this.hostLView,this.templateTNode,new Lg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hd(e[Ce],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[bt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[bt].$index=e}getLView(e){return sV(this.lContainer,e)}};function X(n){let e=Ee(null),t=Vr();try{let r=ke(),i=r[Ce],o=r[t],s=t+1,a=Md(r,s);if(o.liveCollection===void 0){let u=Ug(i,s);o.liveCollection=new Bg(a,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(iV(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Ts(),h=l.length===0;if(Wn(r,u,h)){let y=t+2,I=Md(r,y);if(h){let E=Ug(i,y),M=Ec(I,E.tView.ssrId),V=Cy(r,E,void 0,{dehydratedView:M});zd(I,V,0,vc(E,M))}else FT(I,0)}}}finally{Ee(e)}}function Md(n,e){return n[e]}function oV(n,e){return _c(n,e)}function sV(n,e){return OT(n,e)}function Ug(n,e){return Zg(n,e)}function f(n,e,t,r){let i=ke(),o=Ht(),s=tn+n,a=i[gt],l=o.firstCreatePass?UT(s,o,i,e,wT,Eb(),t,r):o.data[s],u=aV(o,i,l,a,e,n);i[s]=u;let h=Yg(l);return Sc(l,!0),gT(a,u,l),!CT(l)&&ny()&&Sy(o,i,u,l),(CN()===0||h)&&xc(u,i),bN(),h&&(_y(o,i,l),cT(o,l,i)),r!==null&&IT(i,l),f}function p(){let n=On();wb()?RN():(n=n.parent,Sc(n,!1));let e=n;DN(e)&&AN(),TN();let t=Ht();return t.firstCreatePass&&$T(t,e),e.classesWithoutHost!=null&&$N(e)&&MC(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HN(e)&&MC(t,e,ke(),e.stylesWithoutHost,!1),p}function Y(n,e,t,r){return f(n,e,t,r),p(),Y}var aV=(n,e,t,r,i,o)=>(ry(!0),pT(r,i,jN()));function et(){return ke()}var Pd="en-US";var cV=Pd;function lV(n){typeof n=="string"&&(cV=n.toLowerCase().replace(/_/g,"-"))}function OC(n,e,t){return function r(i){if(i===Function)return t;let o=bs(n)?rr(n.index,e):e;Ay(o,5);let s=e[bt],a=FC(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=FC(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function FC(n,e,t,r){let i=Ee(null);try{return Ye(6,e,t),t(r)!==!1}catch(o){return uV(n,o),!1}finally{Ye(7,e,t),Ee(i)}}function uV(n,e){let t=n[ps],r=t?t.get(Pr,null):null;r&&r.handleError(e)}function VC(n,e,t,r,i,o){let s=e[t],a=e[Ce],u=a.data[t].outputs[r],h=s[u],y=a.firstCreatePass?_b(a):null,I=vb(e),E=h.subscribe(o),M=I.length;I.push(o,E),y&&y.push(i,n.index,M,-(M+1))}var dV=(n,e,t)=>{};function O(n,e,t,r){let i=ke(),o=Ht(),s=On();return ZT(o,i,i[gt],s,n,e,r),O}function hV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[dd],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function ZT(n,e,t,r,i,o,s){let a=Yg(r),u=n.firstCreatePass?_b(n):null,h=vb(e),y=!0;if(r.type&3||s){let I=sr(r,e),E=s?s(I):I,M=h.length,V=s?Q=>s(nr(Q[r.index])):r.index,F=null;if(!s&&a&&(F=hV(n,e,i,r.index)),F!==null){let Q=F.__ngLastListenerFn__||F;Q.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,y=!1}else{o=OC(r,e,o),dV(E,i,o);let Q=t.listen(E,i,o);h.push(o,Q),u&&u.push(i,V,M,M+1)}}else o=OC(r,e,o);if(y){let I=r.outputs?.[i],E=r.hostDirectiveOutputs?.[i];if(E&&E.length)for(let M=0;M<E.length;M+=2){let V=E[M],F=E[M+1];VC(r,e,V,F,i,o)}if(I&&I.length)for(let M of I)VC(r,e,M,i,i,o)}}function D(n=1){return LN(n)}function pn(n,e,t){return Ei(n,"",e,"",t),pn}function Ei(n,e,t,r,i){let o=ke(),s=YT(o,e,t,r);if(s!==fn){let a=Ht(),l=jd();Ey(a,l,o,n,s,o[gt],i,!1)}return Ei}function fV(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function JT(n){let e=MN();return pb(e,tn+n)}function g(n,e=""){let t=ke(),r=Ht(),i=n+tn,o=r.firstCreatePass?xy(r,i,1,e,null):r.data[i],s=pV(r,t,o,e,n);t[i]=s,ny()&&Sy(r,t,s,o),Sc(o,!1)}var pV=(n,e,t,r,i)=>(ry(!0),$k(e[gt],r));function z(n){return Ve("",n,""),z}function Ve(n,e,t){let r=ke(),i=YT(r,n,e,t);return i!==fn&&ky(r,Vr(),i),Ve}function De(n,e,t,r,i){let o=ke(),s=BF(o,n,e,t,r,i);return s!==fn&&ky(o,Vr(),s),De}function Ii(n,e,t,r,i,o,s){let a=ke(),l=UF(a,n,e,t,r,i,o,s);return l!==fn&&ky(a,Vr(),l),Ii}function ky(n,e,t){let r=fb(e,n);Hk(n[gt],r,t)}function Re(n,e,t){Yb(e)&&(e=e());let r=ke(),i=Ts();if(Wn(r,i,e)){let o=Ht(),s=jd();Ey(o,s,r,n,e,r[gt],t,!1)}return Re}function Oe(n,e){let t=Yb(n);return t&&n.set(e),t}function Me(n,e){let t=ke(),r=Ht(),i=On();return ZT(r,t,t[gt],i,n,e),Me}function mV(n,e,t){let r=Ht();if(r.firstCreatePass){let i=tr(n);$g(t,r.data,r.blueprint,i,!0),$g(e,r.data,r.blueprint,i,!1)}}function $g(n,e,t,r,i){if(n=Zt(n),Array.isArray(n))for(let o=0;o<n.length;o++)$g(n[o],e,t,r,i);else{let o=Ht(),s=ke(),a=On(),l=fs(n)?n:Zt(n.provide),u=rb(n),h=a.providerIndexes&1048575,y=a.directiveStart,I=a.providerIndexes>>20;if(fs(n)||!n.multi){let E=new mo(u,i,xe),M=ng(l,e,i?h:h+I,y);M===-1?(mg(_d(a,s),o,l),tg(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[M]=E,s[M]=E)}else{let E=ng(l,e,h+I,y),M=ng(l,e,h,h+I),V=E>=0&&t[E],F=M>=0&&t[M];if(i&&!F||!i&&!V){mg(_d(a,s),o,l);let Q=vV(i?yV:gV,t.length,i,r,u);!i&&F&&(t[M].providerFactory=Q),tg(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(Q),s.push(Q)}else{let Q=XT(t[i?M:E],u,!i&&r);tg(o,n,E>-1?E:M,Q)}!i&&r&&F&&t[M].componentProviders++}}}function tg(n,e,t,r){let i=fs(e),o=cN(e);if(i||o){let l=(o?Zt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function XT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ng(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function gV(n,e,t,r){return Hg(this.multi,[])}function yV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ed(t,t[Ce],this.providerFactory.index,r);o=a.slice(0,s),Hg(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Hg(i,o);return o}function Hg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function vV(n,e,t,r,i){let o=new mo(n,t,xe);return o.multi=[],o.index=e,o.componentProviders=0,XT(o,i,r&&!t),o}function wi(n,e=[]){return t=>{t.providersResolver=(r,i)=>mV(r,i?i(n):n,e)}}function eS(n,e,t){let r=Dc()+n,i=ke();return i[r]===fn?Qd(i,r,t?e.call(t):e()):xF(i,r)}function rn(n,e,t,r){return tS(ke(),Dc(),n,e,t,r)}function tt(n,e,t,r,i){return _V(ke(),Dc(),n,e,t,r,i)}function ar(n,e,t,r,i,o){return EV(ke(),Dc(),n,e,t,r,i,o)}function Oy(n,e){let t=n[e];return t===fn?void 0:t}function tS(n,e,t,r,i,o){let s=e+t;return Wn(n,s,i)?Qd(n,s+1,o?r.call(o,i):r(i)):Oy(n,s+1)}function _V(n,e,t,r,i,o,s){let a=e+t;return Py(n,a,i,o)?Qd(n,a+2,s?r.call(s,i,o):r(i,o)):Oy(n,a+2)}function EV(n,e,t,r,i,o,s,a){let l=e+t;return GT(n,l,i,o,s)?Qd(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Oy(n,l+3)}function on(n,e){let t=Ht(),r,i=n+tn;t.firstCreatePass?(r=IV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=co(r.type,!0)),s,a=dn(xe);try{let l=vd(!1),u=o();return vd(l),fV(t,ke(),i,u),u}finally{dn(a)}}function IV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function sn(n,e,t){let r=n+tn,i=ke(),o=pb(i,r);return wV(i,r)?tS(i,Dc(),e,o.transform,t,o):o.transform(t)}function wV(n,e){return n[Ce].data[e].pure}var ws=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},nS=new ws("19.2.7"),qg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Fy=(()=>{class n{compileModuleSync(t){return new Mg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=XC(t),o=hT(i.declarations).reduce((s,a)=>{let l=uo(a);return l&&s.push(new Es(l)),s},[]);return new qg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var CV=(()=>{class n{zone=b(We);changeDetectionScheduler=b(vs);applicationRef=b(go);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bV=new ee("",{factory:()=>!1});function rS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new We(Se(H({},oS()),{scheduleInRootZone:t})),[{provide:We,useFactory:n},{provide:fc,multi:!0,useFactory:()=>{let r=b(CV,{optional:!0});return()=>r.initialize()}},{provide:fc,multi:!0,useFactory:()=>{let r=b(TV);return()=>{r.initialize()}}},e===!0?{provide:Gb,useValue:!0}:[],{provide:Wb,useValue:t??zb}]}function iS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=rS({ngZoneFactory:()=>{let i=oS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Rc("NgZone_CoalesceEvent"),new We(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return kr([{provide:bV,useValue:!0},{provide:sy,useValue:!1},r])}function oS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TV=(()=>{class n{subscription=new at;initialized=!1;zone=b(We);pendingTasks=b(vo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SV=(()=>{class n{appRef=b(go);taskService=b(vo);ngZone=b(We);zonelessEnabled=b(sy);tracing=b(Ud,{optional:!0});disableScheduling=b(Gb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new at;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(b(Wb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Eg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?pC:Kb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DV(){return typeof $localize<"u"&&$localize.locale||Pd}var sS=new ee("",{providedIn:"root",factory:()=>b(sS,we.Optional|we.SkipSelf)||DV()});var zg=new ee(""),AV=new ee("");function lc(n){return!n.moduleRef}function xV(n){let e=lc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(We);return t.run(()=>{lc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Pr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),lc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(zg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(zg);s.add(o),n.moduleRef.onDestroy(()=>{id(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return MV(r,t,()=>{let o=e.get(QT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(sS,Pd);if(lV(s||Pd),!e.get(AV,!0))return lc(n)?e.get(go):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(lc(n)){let l=e.get(go);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return RV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function RV(n,e){let t=n.injector.get(go);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new te(-403,!1);e.push(n)}function MV(n,e,t){try{let r=t();return Ds(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var od=null;function PV(n=[],e){return Ft.create({name:e,providers:[{provide:Od,useValue:"platform"},{provide:zg,useValue:new Set([()=>od=null])},...n]})}function NV(n=[]){if(od)return od;let e=PV(n);return od=e,FF(),kV(e),e}function kV(n){let e=n.get(dy,null);nn(n,()=>{e?.forEach(t=>t())})}function Vy(){return!1}var Ci=(()=>{class n{static __NG_ELEMENT_ID__=OV}return n})();function OV(n){return FV(On(),ke(),(n&16)===16)}function FV(n,e,t){if(bs(n)&&!t){let r=rr(n.index,e);return new Sd(r,r)}else if(n.type&175){let r=e[Gn];return new Sd(r,e)}return null}function aS(n){Ye(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=NV(r),o=[rS({}),{provide:vs,useExisting:SV},...t||[]],s=new Ad({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return xV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ye(9)}}function Eo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ur(n){return bm(n)}function As(n,e){return Em(n,e?.equal)}var LC=class{[Rn];constructor(e){this[Rn]=e}destroy(){this[Rn].destroy()}};function cS(n){let e=uo(n);if(!e)return null;let t=new Es(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var qt=new ee("");var dS=null;function Vn(){return dS}function Ly(n){dS??=n}var Pc=class{},jy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(hS),providedIn:"platform"})}return n})();var hS=(()=>{class n extends jy{_location;_history;_doc=b(qt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vn().getBaseHref(this._doc)}onPopState(t){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function fS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function lS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function bi(n){return n&&n[0]!=="?"?`?${n}`:n}var xs=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(mS),providedIn:"root"})}return n})(),pS=new ee(""),mS=(()=>{class n extends xs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fS(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+bi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(jy),de(pS,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ti=(()=>{class n{_subject=new pt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=jV(lS(uS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+bi(r))}normalize(t){return n.stripTrailingSlash(LV(this._basePath,uS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=bi;static joinWithSlash=fS;static stripTrailingSlash=lS;static \u0275fac=function(r){return new(r||n)(de(xs))};static \u0275prov=G({token:n,factory:()=>VV(),providedIn:"root"})}return n})();function VV(){return new Ti(de(xs))}function LV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uS(n){return n.replace(/\/index.html$/,"")}function jV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Br({type:n});static \u0275inj=Nr({})}return n})();function By(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Uy="browser",gS="server";function Zd(n){return n===gS}var Nc=class{};var eh=new ee(""),zy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(eh),de(We))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),kc=class{_doc;constructor(e){this._doc=e}manager},Jd="ng-app-id";function vS(n){for(let e of n)e.remove()}function _S(n,e){let t=e.createElement("style");return t.textContent=n,t}function UV(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jd}="${e}"],link[${Jd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Hy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Gy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Zd(o),UV(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,_S);r?.forEach(i=>this.addUsage(i,this.external,Hy))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(vS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])vS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,_S(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Hy(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Jd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(qt),de(uy),de(hy,8),de(_o))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),$y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wy=/%COMP%/g;var IS="%COMP%",$V=`_nghost-${IS}`,HV=`_ngcontent-${IS}`,qV=!0,zV=new ee("",{providedIn:"root",factory:()=>qV});function GV(n){return HV.replace(Wy,n)}function WV(n){return $V.replace(Wy,n)}function wS(n,e){return e.map(t=>t.replace(Wy,n))}var Ky=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=h,this.platformIsServer=Zd(a),this.defaultRenderer=new Oc(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ir.ShadowDom&&(r=Se(H({},r),{encapsulation:ir.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xd?i.applyToHost(t):i instanceof Fc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,y=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case ir.Emulated:o=new Xd(l,u,r,this.appId,h,s,a,y,I);break;case ir.ShadowDom:return new qy(l,u,t,r,s,a,this.nonce,y,I);default:o=new Fc(l,u,r,h,s,a,y,I);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(zy),de(Gy),de(uy),de(zV),de(qt),de(_o),de(We),de(hy),de(Ud,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Oc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS($y[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ES(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ES(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=$y[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=$y[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yi.DashCase|yi.Important)?e.style.setProperty(t,r,i&yi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Vn().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ES(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qy=class extends Oc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=wS(i.id,h);for(let I of h){let E=document.createElement("style");a&&E.setAttribute("nonce",a),E.textContent=I,this.shadowRoot.appendChild(E)}let y=i.getExternalStyles?.();if(y)for(let I of y){let E=Hy(I,o);a&&E.setAttribute("nonce",a),this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fc=class extends Oc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?wS(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Xd=class extends Fc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,l,u,h),this.contentAttr=GV(h),this.hostAttr=WV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var th=class n extends Pc{supportsDOMEvents=!0;static makeCurrent(){Ly(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=KV();return t==null?null:QV(t)}resetBaseElement(){Vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return By(document.cookie,e)}},Vc=null;function KV(){return Vc=Vc||document.querySelector("base"),Vc?Vc.getAttribute("href"):null}function QV(n){return new URL(n,document.baseURI).pathname}var YV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),bS=(()=>{class n extends kc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(qt))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),CS=["alt","control","meta","shift"],ZV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},TS=(()=>{class n extends kc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),CS.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=ZV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),CS.forEach(s=>{if(s!==i){let a=JV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(qt))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function Qy(n,e){return aS(H({rootComponent:n},XV(e)))}function XV(n){return{appProviders:[...i2,...n?.providers??[]],platformProviders:r2}}function e2(){th.makeCurrent()}function t2(){return new Pr}function n2(){return rT(document),document}var r2=[{provide:_o,useValue:Uy},{provide:dy,useValue:e2,multi:!0},{provide:qt,useFactory:n2}];var i2=[{provide:Od,useValue:"root"},{provide:Pr,useFactory:t2},{provide:eh,useClass:bS,multi:!0,deps:[qt]},{provide:eh,useClass:TS,multi:!0,deps:[qt]},Ky,Gy,zy,{provide:_s,useExisting:Ky},{provide:Nc,useClass:YV},[]];var SS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de(qt))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ye="primary",Zc=Symbol("RouteTitle"),ev=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Co(n){return new ev(n)}function kS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function s2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cr(n[t],e[t]))return!1;return!0}function cr(n,e){let t=n?tv(n):void 0,r=e?tv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!OS(n[i],e[i]))return!1;return!0}function tv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function OS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function FS(n){return n.length>0?n[n.length-1]:null}function Ai(n){return Lm(n)?n:Ds(n)?nt(Promise.resolve(n)):le(n)}var a2={exact:LS,subset:jS},VS={exact:c2,subset:l2,ignored:()=>!0};function DS(n,e,t){return a2[t.paths](n.root,e.root,t.matrixParams)&&VS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function c2(n,e){return cr(n,e)}function LS(n,e,t){if(!Io(n.segments,e.segments)||!ih(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!LS(n.children[r],e.children[r],t))return!1;return!0}function l2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>OS(n[t],e[t]))}function jS(n,e,t){return BS(n,e,e.segments,t)}function BS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Io(i,t)||e.hasChildren()||!ih(i,t,r))}else if(n.segments.length===t.length){if(!Io(n.segments,t)||!ih(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Io(n.segments,i)||!ih(n.segments,i,r)||!n.children[ye]?!1:BS(n.children[ye],e,o,r)}}function ih(n,e,t){return e.every((r,i)=>VS[t](n[i].parameters,r.parameters))}var ur=class{root;queryParams;fragment;_queryParamMap;constructor(e=new He([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){return h2.serialize(this)}},He=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oh(this)}},Si=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Co(this.parameters),this._parameterMap}toString(){return $S(this)}};function u2(n,e){return Io(n,e)&&n.every((t,r)=>cr(t.parameters,e[r].parameters))}function Io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function d2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ye&&(t=t.concat(e(i,r)))}),t}var Jc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new bo,providedIn:"root"})}return n})(),bo=class{parse(e){let t=new rv(e);return new ur(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Lc(e.root,!0)}`,r=m2(e.queryParams),i=typeof e.fragment=="string"?`#${f2(e.fragment)}`:"";return`${t}${r}${i}`}},h2=new bo;function oh(n){return n.segments.map(e=>$S(e)).join("/")}function Lc(n,e){if(!n.hasChildren())return oh(n);if(e){let t=n.children[ye]?Lc(n.children[ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ye&&r.push(`${i}:${Lc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=d2(n,(r,i)=>i===ye?[Lc(n.children[ye],!1)]:[`${i}:${Lc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ye]!=null?`${oh(n)}/${t[0]}`:`${oh(n)}/(${t.join("//")})`}}function US(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nh(n){return US(n).replace(/%3B/gi,";")}function f2(n){return encodeURI(n)}function nv(n){return US(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(n){return decodeURIComponent(n)}function AS(n){return sh(n.replace(/\+/g,"%20"))}function $S(n){return`${nv(n.path)}${p2(n.parameters)}`}function p2(n){return Object.entries(n).map(([e,t])=>`;${nv(e)}=${nv(t)}`).join("")}function m2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nh(t)}=${nh(i)}`).join("&"):`${nh(t)}=${nh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var g2=/^[^\/()?;#]+/;function Yy(n){let e=n.match(g2);return e?e[0]:""}var y2=/^[^\/()?;=#]+/;function v2(n){let e=n.match(y2);return e?e[0]:""}var _2=/^[^=?&#]+/;function E2(n){let e=n.match(_2);return e?e[0]:""}var I2=/^[^&#]+/;function w2(n){let e=n.match(I2);return e?e[0]:""}var rv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ye]=new He(e,t)),r}parseSegment(){let e=Yy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Si(sh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=v2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Yy(this.remaining);i&&(r=i,this.capture(r))}e[sh(t)]=sh(r)}parseQueryParam(e){let t=E2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=w2(this.remaining);s&&(r=s,this.capture(r))}let i=AS(t),o=AS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Yy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ye);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ye]:new He([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function HS(n){return n.segments.length>0?new He([],{[ye]:n}):n}function qS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=qS(i);if(r===ye&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new He(n.segments,e);return C2(t)}function C2(n){if(n.numberOfChildren===1&&n.children[ye]){let e=n.children[ye];return new He(n.segments.concat(e.segments),e.children)}return n}function Di(n){return n instanceof ur}function zS(n,e,t=null,r=null){let i=GS(n);return WS(i,e,t,r)}function GS(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new He(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=HS(r);return e??i}function WS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Zy(i,i,i,t,r);let o=b2(e);if(o.toRoot())return Zy(i,i,new He([],{}),t,r);let s=T2(o,i,n),a=s.processChildren?Bc(s.segmentGroup,s.index,o.commands):QS(s.segmentGroup,s.index,o.commands);return Zy(i,s.segmentGroup,a,t,r)}function ch(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $c(n){return typeof n=="object"&&n!=null&&n.outlets}function Zy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=KS(n,e,t);let a=HS(qS(s));return new ur(a,o,i)}function KS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=KS(o,e,t)}),new He(n.segments,r)}var lh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ch(r[0]))throw new te(4003,!1);let i=r.find($c);if(i&&i!==FS(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function b2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lh(t,e,r)}var Ns=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function T2(n,e,t){if(n.isAbsolute)return new Ns(e,!0,0);if(!t)return new Ns(e,!1,NaN);if(t.parent===null)return new Ns(t,!0,0);let r=ch(n.commands[0])?0:1,i=t.segments.length-1+r;return S2(t,i,n.numberOfDoubleDots)}function S2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Ns(r,!1,i-o)}function D2(n){return $c(n[0])?n[0].outlets:{[ye]:n}}function QS(n,e,t){if(n??=new He([],{}),n.segments.length===0&&n.hasChildren())return Bc(n,e,t);let r=A2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new He(n.segments.slice(0,r.pathIndex),{});return o.children[ye]=new He(n.segments.slice(r.pathIndex),n.children),Bc(o,0,i)}else return r.match&&i.length===0?new He(n.segments,{}):r.match&&!n.hasChildren()?iv(n,e,t):r.match?Bc(n,0,i):iv(n,e,t)}function Bc(n,e,t){if(t.length===0)return new He(n.segments,{});{let r=D2(t),i={};if(Object.keys(r).some(o=>o!==ye)&&n.children[ye]&&n.numberOfChildren===1&&n.children[ye].segments.length===0){let o=Bc(n.children[ye],e,t);return new He(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new He(n.segments,i)}}function A2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if($c(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!RS(l,u,s))return o;r+=2}else{if(!RS(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function iv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if($c(o)){let l=x2(o.outlets);return new He(r,l)}if(i===0&&ch(t[0])){let l=n.segments[e];r.push(new Si(l.path,xS(t[0]))),i++;continue}let s=$c(o)?o.outlets[ye]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ch(a)?(r.push(new Si(s,xS(a))),i+=2):(r.push(new Si(s,{})),i++)}return new He(r,{})}function x2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=iv(new He([],{}),0,r))}),e}function xS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function RS(n,e,t){return n==t.path&&cr(e,t.parameters)}var ah="imperative",Dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Dt||{}),Cn=class{id;url;constructor(e,t){this.id=e,this.url=t}},To=class extends Cn{type=Dt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends Cn{urlAfterRedirects;type=Dt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(mn||{}),Hc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Hc||{}),lr=class extends Cn{reason;code;type=Dt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$r=class extends Cn{reason;code;type=Dt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Os=class extends Cn{error;target;type=Dt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qc=class extends Cn{urlAfterRedirects;state;type=Dt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uh=class extends Cn{urlAfterRedirects;state;type=Dt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dh=class extends Cn{urlAfterRedirects;state;shouldActivate;type=Dt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hh=class extends Cn{urlAfterRedirects;state;type=Dt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class extends Cn{urlAfterRedirects;state;type=Dt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class{route;type=Dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mh=class{route;type=Dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gh=class{snapshot;type=Dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yh=class{snapshot;type=Dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vh=class{snapshot;type=Dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_h=class{snapshot;type=Dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zc=class{},Fs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function R2(n,e){return n.providers&&!n._injector&&(n._injector=Kd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qn(n){return n.outlet||ye}function M2(n,e){let t=n.filter(r=>Qn(r)===e);return t.push(...n.filter(r=>Qn(r)!==e)),t}function Xc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Eh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new js(this.rootInjector)}},js=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Eh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(Xt))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ih=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ov(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ov(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=sv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sv(e,this._root).map(t=>t.value)}};function ov(n,e){if(n===e.value)return e;for(let t of e.children){let r=ov(n,t);if(r)return r}return null}function sv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=sv(n,t);if(r.length)return r.unshift(e),r}return[]}var wn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ps(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Gc=class extends Ih{snapshot;constructor(e,t){super(e),this.snapshot=t,pv(this,e)}toString(){return this.snapshot.toString()}};function YS(n){let e=P2(n),t=new kt([new Si("",{})]),r=new kt({}),i=new kt({}),o=new kt({}),s=new kt(""),a=new bn(t,r,o,s,i,ye,n,e.root);return a.snapshot=e.root,new Gc(new wn(a,[]),e)}function P2(n){let e={},t={},r={},i="",o=new wo([],e,r,i,t,ye,n,null,{});return new Wc("",new wn(o,[]))}var bn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ue(u=>u[Zc]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>Co(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>Co(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&JS(i)&&(r.resolve[Zc]=i.title),r}var wo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Zc]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Co(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Co(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Wc=class extends Ih{url;constructor(e,t){super(t),this.url=e,pv(this,t)}toString(){return ZS(this._root)}};function pv(n,e){e.value._routerState=n,e.children.forEach(t=>pv(n,t))}function ZS(n){let e=n.children.length>0?` { ${n.children.map(ZS).join(", ")} } `:"";return`${n.value}${e}`}function Jy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),cr(e.params,t.params)||n.paramsSubject.next(t.params),s2(e.url,t.url)||n.urlSubject.next(t.url),cr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function av(n,e){let t=cr(n.params,e.params)&&u2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||av(n.parent,e.parent))}function JS(n){return typeof n.title=="string"||n.title===null}var XS=new ee(""),el=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ye;activateEvents=new Ct;deactivateEvents=new Ct;attachEvents=new Ct;detachEvents=new Ct;routerOutletData=Ge(void 0);parentContexts=b(js);location=b(Wd);changeDetector=b(Ci);inputBinder=b(tl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new cv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vi]})}return n})(),cv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===bn?this.route:e===js?this.childContexts:e===XS?this.outletData:this.parent.get(e,t)}},tl=new ee(""),mv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=oo([r.queryParams,r.params,r.data]).pipe(In(([o,s,a],l)=>(a=H(H(H({},o),s),a),l===0?le(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=cS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function N2(n,e,t){let r=Kc(n,e._root,t?t._root:void 0);return new Gc(r,e)}function Kc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=k2(n,e,t);return new wn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Kc(n,a)),s}}let r=O2(e.value),i=e.children.map(o=>Kc(n,o));return new wn(r,i)}}function k2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Kc(n,r,i);return Kc(n,r)})}function O2(n){return new bn(new kt(n.url),new kt(n.params),new kt(n.queryParams),new kt(n.fragment),new kt(n.data),n.outlet,n.component,n)}var Vs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},eD="ngNavigationCancelingError";function Ch(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Di(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tD(!1,mn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function tD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[eD]=!0,t.cancellationCode=e,t}function F2(n){return nD(n)&&Di(n.url)}function nD(n){return!!n&&n[eD]}var V2=(n,e,t,r)=>ue(i=>(new lv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),lv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ps(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ps(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _h(o.value.snapshot))}),e.children.length&&this.forwardEvent(new yh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Jy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{component;route;constructor(e,t){this.component=e,this.route=t}};function L2(n,e,t){let r=n._root,i=e?e._root:null;return jc(r,i,t,[r.value])}function j2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!HC(n)?n:e.get(n):r}function jc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ps(e);return n.children.forEach(s=>{B2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uc(a,t.getContext(s),i)),i}function B2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=U2(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new bh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?jc(n,e,a?a.children:null,r,i):jc(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&Uc(e,a,i),i.canActivateChecks.push(new bh(r)),o.component?jc(n,null,a?a.children:null,r,i):jc(n,null,t,r,i);return i}function U2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!cr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!av(n,e)||!cr(n.queryParams,e.queryParams);case"paramsChange":default:return!av(n,e)}}function Uc(n,e,t){let r=Ps(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Uc(s,e.children.getContext(o),t):Uc(s,null,t):Uc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ks(e.outlet.component,i)):t.canDeactivateChecks.push(new ks(null,i)):t.canDeactivateChecks.push(new ks(null,i))}function nl(n){return typeof n=="function"}function $2(n){return typeof n=="boolean"}function H2(n){return n&&nl(n.canLoad)}function q2(n){return n&&nl(n.canActivate)}function z2(n){return n&&nl(n.canActivateChild)}function G2(n){return n&&nl(n.canDeactivate)}function W2(n){return n&&nl(n.canMatch)}function rD(n){return n instanceof Ar||n?.name==="EmptyError"}var rh=Symbol("INITIAL_VALUE");function Ls(){return In(n=>oo(n.map(e=>e.pipe(Hn(1),Zu(rh)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===rh)return rh;if(t===!1||K2(t))return t}return!0}),Mn(e=>e!==rh),Hn(1)))}function K2(n){return Di(n)||n instanceof Vs}function Q2(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?le(Se(H({},t),{guardsResult:!0})):Y2(s,r,i,n).pipe(wt(a=>a&&$2(a)?Z2(r,o,n,e):le(a)),ue(a=>Se(H({},t),{guardsResult:a})))})}function Y2(n,e,t,r){return nt(n).pipe(wt(i=>nL(i.component,i.route,t,e,r)),xr(i=>i!==!0,!0))}function Z2(n,e,t,r){return nt(e).pipe(as(i=>ss(X2(i.route.parent,r),J2(i.route,r),tL(n,i.path,t),eL(n,i.route,t))),xr(i=>i!==!0,!0))}function J2(n,e){return n!==null&&e&&e(new vh(n)),le(!0)}function X2(n,e){return n!==null&&e&&e(new gh(n)),le(!0)}function eL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(o=>Ku(()=>{let s=Xc(e)??t,a=Bs(o,s),l=q2(a)?a.canActivate(e,n):nn(s,()=>a(e,n));return Ai(l).pipe(xr())}));return le(i).pipe(Ls())}function tL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>j2(s)).filter(s=>s!==null).map(s=>Ku(()=>{let a=s.guards.map(l=>{let u=Xc(s.node)??t,h=Bs(l,u),y=z2(h)?h.canActivateChild(r,n):nn(u,()=>h(r,n));return Ai(y).pipe(xr())});return le(a).pipe(Ls())}));return le(o).pipe(Ls())}function nL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return le(!0);let s=o.map(a=>{let l=Xc(e)??i,u=Bs(a,l),h=G2(u)?u.canDeactivate(n,e,t,r):nn(l,()=>u(n,e,t,r));return Ai(h).pipe(xr())});return le(s).pipe(Ls())}function rL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return le(!0);let o=i.map(s=>{let a=Bs(s,n),l=H2(a)?a.canLoad(e,t):nn(n,()=>a(e,t));return Ai(l)});return le(o).pipe(Ls(),iD(r))}function iD(n){return xu(Ot(e=>{if(typeof e!="boolean")throw Ch(n,e)}),ue(e=>e===!0))}function iL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return le(!0);let o=i.map(s=>{let a=Bs(s,n),l=W2(a)?a.canMatch(e,t):nn(n,()=>a(e,t));return Ai(l)});return le(o).pipe(Ls(),iD(r))}var Qc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Yc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ms(n){return os(new Qc(n))}function oL(n){return os(new te(4e3,!1))}function sL(n){return os(tD(!1,mn.GuardRejected))}var uv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return le(r);if(i.numberOfChildren>1||!i.children[ye])return oL(`${e.redirectTo}`);i=i.children[ye]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:h,url:y,outlet:I,params:E,data:M,title:V}=i,F=nn(o,()=>a({params:E,data:M,queryParams:l,fragment:u,routeConfig:h,url:y,outlet:I,title:V}));if(F instanceof ur)throw new Yc(F);t=F}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Yc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ur(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new He(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},dv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aL(n,e,t,r,i){let o=oD(n,e,t);return o.matched?(r=R2(e,r),iL(r,e,t,i).pipe(ue(s=>s===!0?o:H({},dv)))):le(o)}function oD(n,e,t){if(e.path==="**")return cL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},dv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||kS)(t,n,e);if(!i)return H({},dv);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function cL(n){return{matched:!0,parameters:n.length>0?FS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MS(n,e,t,r){return t.length>0&&dL(n,t,r)?{segmentGroup:new He(e,uL(r,new He(t,n.children))),slicedSegments:[]}:t.length===0&&hL(n,t,r)?{segmentGroup:new He(n.segments,lL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new He(n.segments,n.children),slicedSegments:t}}function lL(n,e,t,r){let i={};for(let o of t)if(Sh(n,e,o)&&!r[Qn(o)]){let s=new He([],{});i[Qn(o)]=s}return H(H({},r),i)}function uL(n,e){let t={};t[ye]=e;for(let r of n)if(r.path===""&&Qn(r)!==ye){let i=new He([],{});t[Qn(r)]=i}return t}function dL(n,e,t){return t.some(r=>Sh(n,e,r)&&Qn(r)!==ye)}function hL(n,e,t){return t.some(r=>Sh(n,e,r))}function Sh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function fL(n,e,t){return e.length===0&&!n.children[t]}var hv=class{};function pL(n,e,t,r,i,o,s="emptyOnly"){return new fv(n,e,t,r,i,s,o).recognize()}var mL=31,fv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new uv(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=MS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:r})=>{let i=new wn(r,t),o=new Wc("",i),s=zS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new wo([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ye,t).pipe(ue(r=>({children:r,rootSnapshot:t})),fi(r=>{if(r instanceof Yc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof wn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return nt(o).pipe(as(s=>{let a=r.children[s],l=M2(t,s);return this.processSegmentGroup(e,l,a,s,i)}),Yu((s,a)=>(s.push(...a),s)),pi(null),Bm(),wt(s=>{if(s===null)return Ms(r);let a=sD(s);return gL(a),le(a)}))}processSegment(e,t,r,i,o,s,a){return nt(t).pipe(as(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(fi(u=>{if(u instanceof Qc)return le(null);throw u}))),xr(l=>!!l),fi(l=>{if(rD(l))return fL(r,i,o)?le(new hv):Ms(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return Qn(r)!==s&&(s===ye||!Sh(i,o,r))?Ms(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Ms(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:y,remainingSegments:I}=oD(t,i,o);if(!l)return Ms(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mL&&(this.allowRedirects=!1));let E=new wo(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,PS(i),Qn(i),i.component??i._loadedComponent??null,i,NS(i)),M=wh(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(M.params),E.data=Object.freeze(M.data);let V=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,y,E,e);return this.applyRedirects.lineralizeSegments(i,V).pipe(wt(F=>this.processSegment(e,r,t,F.concat(I),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=aL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(In(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(In(({routes:u})=>{let h=r._loadedInjector??e,{parameters:y,consumedSegments:I,remainingSegments:E}=l,M=new wo(I,y,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,PS(r),Qn(r),r.component??r._loadedComponent??null,r,NS(r)),V=wh(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(V.params),M.data=Object.freeze(V.data);let{segmentGroup:F,slicedSegments:Q}=MS(t,I,E,u);if(Q.length===0&&F.hasChildren())return this.processChildren(h,u,F,M).pipe(ue(ve=>new wn(M,ve)));if(u.length===0&&Q.length===0)return le(new wn(M,[]));let he=Qn(r)===o;return this.processSegment(h,u,F,Q,he?ye:o,!0,M).pipe(ue(ve=>new wn(M,ve instanceof wn?[ve]:[])))}))):Ms(t)))}getChildConfig(e,t,r){return t.children?le({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?le({routes:t._loadedRoutes,injector:t._loadedInjector}):rL(e,t,r,this.urlSerializer).pipe(wt(i=>i?this.configLoader.loadChildren(e,t).pipe(Ot(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):sL(t))):le({routes:[],injector:e})}};function gL(n){n.sort((e,t)=>e.value.outlet===ye?-1:t.value.outlet===ye?1:e.value.outlet.localeCompare(t.value.outlet))}function yL(n){let e=n.value.routeConfig;return e&&e.path===""}function sD(n){let e=[],t=new Set;for(let r of n){if(!yL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=sD(r.children);e.push(new wn(r.value,i))}return e.filter(r=>!t.has(r))}function PS(n){return n.data||{}}function NS(n){return n.resolve||{}}function vL(n,e,t,r,i,o){return wt(s=>pL(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:l})=>Se(H({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function _L(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return le(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of aD(l))s.add(u);let a=0;return nt(s).pipe(as(l=>o.has(l)?EL(l,r,n,e):(l.data=wh(l,l.parent,n).resolve,le(void 0))),Ot(()=>a++),cs(1),wt(l=>a===s.size?le(t):ln))})}function aD(n){let e=n.children.map(t=>aD(t)).flat();return[n,...e]}function EL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!JS(i)&&(o[Zc]=i.title),IL(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=wh(n,n.parent,t).resolve,null)))}function IL(n,e,t,r){let i=tv(n);if(i.length===0)return le({});let o={};return nt(i).pipe(wt(s=>wL(n[s],e,t,r).pipe(xr(),Ot(a=>{if(a instanceof Vs)throw Ch(new bo,a);o[s]=a}))),cs(1),ue(()=>o),fi(s=>rD(s)?ln:os(s)))}function wL(n,e,t,r){let i=Xc(e)??r,o=Bs(n,i),s=o.resolve?o.resolve(e,t):nn(i,()=>o(e,t));return Ai(s)}function Xy(n){return In(e=>{let t=n(e);return t?nt(t).pipe(ue(()=>e)):le(e)})}var gv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ye);return r}getResolvedTitleForRoute(t){return t.data[Zc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(cD),providedIn:"root"})}return n})(),cD=(()=>{class n extends gv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(SS))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rl=new ee("",{providedIn:"root",factory:()=>({})}),yv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ne({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Y(0,"router-outlet")},dependencies:[el],encapsulation:2})}return n})();function vv(n){let e=n.children&&n.children.map(vv),t=e?Se(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ye&&(t.component=yv),t}var il=new ee(""),lD=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=b(Fy);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return le(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ai(t.loadComponent()).pipe(ue(dD),Ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),cc(()=>{this.componentLoaders.delete(t)})),i=new ts(r,()=>new pt).pipe(es());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return le({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=uD(r,this.compiler,t,this.onLoadEndListener).pipe(cc(()=>{this.childrenLoaders.delete(r)})),s=new ts(o,()=>new pt).pipe(es());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uD(n,e,t,r){return Ai(n.loadChildren()).pipe(ue(dD),wt(i=>i instanceof Ry||Array.isArray(i)?le(i):nt(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(il,[],{optional:!0,self:!0}).flat()),{routes:s.map(vv),injector:o}}))}function CL(n){return n&&typeof n=="object"&&"default"in n}function dD(n){return CL(n)?n.default:n}var Dh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(bL),providedIn:"root"})}return n})(),bL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hD=new ee("");var fD=new ee(""),pD=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new pt;transitionAbortSubject=new pt;configLoader=b(lD);environmentInjector=b(Xt);destroyRef=b(Ac);urlSerializer=b(Jc);rootContexts=b(js);location=b(Ti);inputBindingEnabled=b(tl,{optional:!0})!==null;titleStrategy=b(gv);options=b(rl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=b(Dh);createViewTransition=b(hD,{optional:!0});navigationErrorHandler=b(fD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new ph(i)),r=i=>this.events.next(new mh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Se(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new kt(null),this.transitions.pipe(Mn(r=>r!==null),In(r=>{let i=!1,o=!1;return le(r).pipe(In(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",mn.SupersededByNewNavigation),ln;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Se(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new $r(s.id,this.urlSerializer.serialize(s.rawUrl),u,Hc.IgnoredSameUrlNavigation)),s.resolve(!1),ln}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return le(s).pipe(In(u=>(this.events.next(new To(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ln:Promise.resolve(u))),vL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ot(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Se(H({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new qc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:h,source:y,restoredState:I,extras:E}=s,M=new To(u,this.urlSerializer.serialize(h),y,I);this.events.next(M);let V=YS(this.rootComponentType).snapshot;return this.currentTransition=r=Se(H({},s),{targetSnapshot:V,urlAfterRedirects:h,extras:Se(H({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,le(r)}else{let u="";return this.events.next(new $r(s.id,this.urlSerializer.serialize(s.extractedUrl),u,Hc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ln}}),Ot(s=>{let a=new uh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ue(s=>(this.currentTransition=r=Se(H({},s),{guards:L2(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Q2(this.environmentInjector,s=>this.events.next(s)),Ot(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Ch(this.urlSerializer,s.guardsResult);let a=new dh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Mn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",mn.GuardRejected),!1)),Xy(s=>{if(s.guards.canActivateChecks.length!==0)return le(s).pipe(Ot(a=>{let l=new hh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),In(a=>{let l=!1;return le(a).pipe(_L(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",mn.NoDataFromResolver)}}))}),Ot(a=>{let l=new fh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Xy(s=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ot(h=>{l.component=h}),ue(()=>{})));for(let h of l.children)u.push(...a(h));return u};return oo(a(s.targetSnapshot.root)).pipe(pi(null),Hn(1))}),Xy(()=>this.afterPreactivation()),In(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?nt(l).pipe(ue(()=>r)):le(r)}),ue(s=>{let a=N2(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Se(H({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Ot(()=>{this.events.next(new zc)}),V2(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Hn(1),Ot({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Um(this.transitionAbortSubject.pipe(Ot(s=>{throw s}))),cc(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",mn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),fi(s=>{if(this.destroyed)return r.resolve(!1),ln;if(o=!0,nD(s))this.events.next(new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),F2(s)?this.events.next(new Fs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Os(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=nn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Vs){let{message:u,cancellationCode:h}=Ch(this.urlSerializer,l);this.events.next(new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new Fs(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return ln}))}))}cancelNavigationTransition(t,r,i){let o=new lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TL(n){return n!==ah}var mD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(SL),providedIn:"root"})}return n})(),Th=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},SL=(()=>{class n extends Th{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gD=(()=>{class n{urlSerializer=b(Jc);options=b(rl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=b(Ti);urlHandlingStrategy=b(Dh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ur;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ur?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=YS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>b(DL),providedIn:"root"})}return n})(),DL=(()=>{class n extends gD{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof To?this.updateStateMemento():t instanceof $r?this.commitTransition(r):t instanceof qc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof lr&&(t.code===mn.GuardRejected||t.code===mn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Os?this.restoreHistory(r,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _v(n,e){n.events.pipe(Mn(t=>t instanceof Ln||t instanceof lr||t instanceof Os||t instanceof $r),ue(t=>t instanceof Ln||t instanceof $r?0:(t instanceof lr?t.code===mn.Redirect||t.code===mn.SupersededByNewNavigation:!1)?2:1),Mn(t=>t!==2),Hn(1)).subscribe(()=>{e()})}var AL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=b(WT);stateManager=b(gD);options=b(rl,{optional:!0})||{};pendingTasks=b(vo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=b(pD);urlSerializer=b(Jc);location=b(Ti);urlHandlingStrategy=b(Dh);_events=new pt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=b(mD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=b(il,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!b(tl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new at;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof lr&&r.code!==mn.Redirect&&r.code!==mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||TL(i.source)},s);this.scheduleNavigation(a,ah,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ML(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ah,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=H({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(vv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let y;try{let I=i?i.snapshot:this.routerState.snapshot.root;y=GS(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return WS(y,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Di(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ah,null,r)}navigate(t,r={skipLocationChange:!1}){return RL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},AL):r===!1?i=H({},xL):i=r,Di(t))return DS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return DS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((y,I)=>{a=y,l=I});let h=this.pendingTasks.add();return _v(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}function ML(n){return!(n instanceof zc)&&!(n instanceof Fs)}var je=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new pt;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Ln&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Di(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:uT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Di(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(xe(Vt),xe(bn),oy("tabindex"),xe(_i),xe(jr),xe(xs))};static \u0275dir=ht({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&O("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Mc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Eo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Eo],replaceUrl:[2,"replaceUrl","replaceUrl",Eo],routerLink:"routerLink"},features:[vi]})}return n})();var NL=new ee("");function Ev(n,...e){return kr([{provide:il,multi:!0,useValue:n},[],{provide:bn,useFactory:kL,deps:[Vt]},{provide:Ny,multi:!0,useFactory:FL},e.map(t=>t.\u0275providers)])}function kL(n){return n.routerState.root}function OL(n,e){return{\u0275kind:n,\u0275providers:e}}function FL(){let n=b(Ft);return e=>{let t=n.get(go);if(e!==t.components[0])return;let r=n.get(Vt),i=n.get(VL);n.get(LL)===1&&r.initialNavigation(),n.get(jL,null,we.Optional)?.setUpPreloading(),n.get(NL,null,we.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VL=new ee("",{factory:()=>new pt}),LL=new ee("",{providedIn:"root",factory:()=>1});var jL=new ee("");function Iv(){return OL(8,[mv,{provide:tl,useExisting:mv}])}var vD=()=>{};var ED=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ah={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,y=(o&3)<<4|a>>4,I=(a&15)<<2|u>>6,E=u&63;l||(E=64,s||(I=64)),r.push(t[h],t[y],t[I],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ED(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||y==null)throw new Cv;let I=o<<2|a>>4;if(r.push(I),u!==64){let E=a<<4&240|u>>2;if(r.push(E),y!==64){let M=u<<6&192|y;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Cv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},UL=function(n){let e=ED(n);return Ah.encodeByteArray(e,!0)},ol=function(n){return UL(n).replace(/\./g,"")},xh=function(n){try{return Ah.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $L=()=>Tv().__FIREBASE_DEFAULTS__,HL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xh(n[1]);return e&&JSON.parse(e)},Rh=()=>{try{return vD()||$L()||HL()||qL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Sv=n=>{var e,t;return(t=(e=Rh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ID=n=>{let e=Sv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Dv=()=>{var n;return(n=Rh())===null||n===void 0?void 0:n.config},Av=n=>{var e;return(e=Rh())===null||e===void 0?void 0:e[`_${n}`]};var So=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function wD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ol(JSON.stringify(t)),ol(JSON.stringify(s)),""].join(".")}function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function zL(){var n;let e=(n=Rh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TD(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function SD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DD(){let n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function AD(){return!zL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sl(){try{return typeof indexedDB=="object"}catch{return!1}}function xD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var GL="FirebaseError",Tn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yn.prototype.create)}},Yn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?WL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Tn(i,a,r)}};function WL(n,e){return n.replace(KL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var KL=/\{\$([^}]+)}/g;function RD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(_D(o)&&_D(s)){if(!dr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function _D(n){return n!==null&&typeof n=="object"}function al(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Us(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function $s(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function MD(n,e){let t=new bv(n,e);return t.subscribe.bind(t)}var bv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");QL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wv),i.error===void 0&&(i.error=wv),i.complete===void 0&&(i.complete=wv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function QL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wv(){}var hJ=4*60*60*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var an=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Do="[DEFAULT]";var xv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new So;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZL(e))try{this.getOrInitializeService({instanceIdentifier:Do})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Do){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Do){return this.instances.has(e)}getOptions(e=Do){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Do){return this.component?this.component.multipleInstances?e:Do:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YL(n){return n===Do?void 0:n}function ZL(n){return n.instantiationMode==="EAGER"}var Mh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new xv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var JL=[],Pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Pe||{}),XL={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},ej=Pe.INFO,tj={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},nj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=tj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},hr=class{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null,JL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var rj=(n,e)=>e.some(t=>n instanceof t),PD,ND;function ij(){return PD||(PD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oj(){return ND||(ND=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kD=new WeakMap,Mv=new WeakMap,OD=new WeakMap,Rv=new WeakMap,Nv=new WeakMap;function sj(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(fr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&kD.set(t,n)}).catch(()=>{}),Nv.set(e,n),e}function aj(n){if(Mv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Mv.set(n,e)}var Pv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FD(n){Pv=n(Pv)}function cj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ph(this),e,...t);return OD.set(r,e.sort?e.sort():[e]),fr(r)}:oj().includes(n)?function(...e){return n.apply(Ph(this),e),fr(kD.get(this))}:function(...e){return fr(n.apply(Ph(this),e))}}function lj(n){return typeof n=="function"?cj(n):(n instanceof IDBTransaction&&aj(n),rj(n,ij())?new Proxy(n,Pv):n)}function fr(n){if(n instanceof IDBRequest)return sj(n);if(Rv.has(n))return Rv.get(n);let e=lj(n);return e!==n&&(Rv.set(n,e),Nv.set(e,n)),e}var Ph=n=>Nv.get(n);function LD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=fr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(fr(s.result),l.oldVersion,l.newVersion,fr(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var uj=["get","getKey","getAll","getAllKeys","count"],dj=["put","add","delete","clear"],kv=new Map;function VD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(kv.get(e))return kv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=dj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||uj.includes(t)))return;let o=function(s,...a){return C(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return kv.set(e,o),o}FD(n=>Se(H({},n),{get:(e,t,r)=>VD(e,t)||n.get(e,t,r),has:(e,t)=>!!VD(e,t)||n.has(e,t)}));var Fv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function hj(n){let e=n.getComponent();return e?.type==="VERSION"}var Vv="@firebase/app",jD="0.11.5";var Hr=new hr("@firebase/app"),fj="@firebase/app-compat",pj="@firebase/analytics-compat",mj="@firebase/analytics",gj="@firebase/app-check-compat",yj="@firebase/app-check",vj="@firebase/auth",_j="@firebase/auth-compat",Ej="@firebase/database",Ij="@firebase/data-connect",wj="@firebase/database-compat",Cj="@firebase/functions",bj="@firebase/functions-compat",Tj="@firebase/installations",Sj="@firebase/installations-compat",Dj="@firebase/messaging",Aj="@firebase/messaging-compat",xj="@firebase/performance",Rj="@firebase/performance-compat",Mj="@firebase/remote-config",Pj="@firebase/remote-config-compat",Nj="@firebase/storage",kj="@firebase/storage-compat",Oj="@firebase/firestore",Fj="@firebase/vertexai",Vj="@firebase/firestore-compat",Lj="firebase",jj="11.6.1";var Lv="[DEFAULT]",Bj={[Vv]:"fire-core",[fj]:"fire-core-compat",[mj]:"fire-analytics",[pj]:"fire-analytics-compat",[yj]:"fire-app-check",[gj]:"fire-app-check-compat",[vj]:"fire-auth",[_j]:"fire-auth-compat",[Ej]:"fire-rtdb",[Ij]:"fire-data-connect",[wj]:"fire-rtdb-compat",[Cj]:"fire-fn",[bj]:"fire-fn-compat",[Tj]:"fire-iid",[Sj]:"fire-iid-compat",[Dj]:"fire-fcm",[Aj]:"fire-fcm-compat",[xj]:"fire-perf",[Rj]:"fire-perf-compat",[Mj]:"fire-rc",[Pj]:"fire-rc-compat",[Nj]:"fire-gcs",[kj]:"fire-gcs-compat",[Oj]:"fire-fst",[Vj]:"fire-fst-compat",[Fj]:"fire-vertex","fire-js":"fire-js",[Lj]:"fire-js-all"};var cl=new Map,Uj=new Map,jv=new Map;function BD(n,e){try{n.container.addComponent(e)}catch(t){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zn(n){let e=n.name;if(jv.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;jv.set(e,n);for(let t of cl.values())BD(t,n);for(let t of Uj.values())BD(t,n);return!0}function Hs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sn(n){return n==null?!1:n.settings!==void 0}var $j={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Yn("app","Firebase",$j);var Bv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}};var Ri=jj;function Hv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Lv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xi.create("bad-app-name",{appName:String(i)});if(t||(t=Dv()),!t)throw xi.create("no-options");let o=cl.get(i);if(o){if(dr(t,o.options)&&dr(r,o.config))return o;throw xi.create("duplicate-app",{appName:i})}let s=new Mh(i);for(let l of jv.values())s.addComponent(l);let a=new Bv(t,r,s);return cl.set(i,a),a}function Ao(n=Lv){let e=cl.get(n);if(!e&&n===Lv&&Dv())return Hv();if(!e)throw xi.create("no-app",{appName:n});return e}function Nh(){return Array.from(cl.values())}function ot(n,e,t){var r;let i=(r=Bj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(a.join(" "));return}Zn(new an(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Hj="firebase-heartbeat-database",qj=1,ll="firebase-heartbeat-store",Ov=null;function qD(){return Ov||(Ov=LD(Hj,qj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ll)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),Ov}function zj(n){return C(this,null,function*(){try{let t=(yield qD()).transaction(ll),r=yield t.objectStore(ll).get(zD(n));return yield t.done,r}catch(e){if(e instanceof Tn)Hr.warn(e.message);else{let t=xi.create("idb-get",{originalErrorMessage:e?.message});Hr.warn(t.message)}}})}function UD(n,e){return C(this,null,function*(){try{let r=(yield qD()).transaction(ll,"readwrite");yield r.objectStore(ll).put(e,zD(n)),yield r.done}catch(t){if(t instanceof Tn)Hr.warn(t.message);else{let r=xi.create("idb-set",{originalErrorMessage:t?.message});Hr.warn(r.message)}}})}function zD(n){return`${n.name}!${n.options.appId}`}var Gj=1024,Wj=30,Uv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $v(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$D();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Wj){let s=Qj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=$D(),{heartbeatsToSend:r,unsentEntries:i}=Kj(this._heartbeatsCache.heartbeats),o=ol(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Hr.warn(t),""}})}};function $D(){return new Date().toISOString().substring(0,10)}function Kj(n,e=Gj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),HD(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),HD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var $v=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return sl()?xD().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield zj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return UD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function HD(n){return ol(JSON.stringify({version:2,heartbeats:n})).length}function Qj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Yj(n){Zn(new an("platform-logger",e=>new Fv(e),"PRIVATE")),Zn(new an("heartbeat",e=>new Uv(e),"PRIVATE")),ot(Vv,jD,n),ot(Vv,jD,"esm2017"),ot("fire-js","")}Yj("");var Zj="firebase",Jj="11.6.1";ot(Zj,Jj,"app");function qv(n){n===void 0&&(ob(qv),n=b(Ft));let e=n.get(Bd);return t=>new Ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Mi=new ws("ANGULARFIRE2_VERSION");function ul(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var zs=(n,e)=>{let t=e?[e]:Nh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qs=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(qs||{}),GD=Vy()&&typeof Zone<"u"?qs.WARN:qs.SILENT;var kh=class{zone;delegate;constructor(e,t=Fm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Pi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=b(We);this.outsideAngular=t.runOutsideAngular(()=>new kh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new kh(typeof Zone>"u"?void 0:Zone.current,Om))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WD=!1;function Xj(n,e){!WD&&(GD>qs.SILENT||Vy())&&(WD=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),GD>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function eB(n){let e=b(We,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function xo(n){let e=b(We,{optional:!0});return e?e.run(()=>n()):n()}var tB=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),nn(t,()=>xo(()=>n.apply(void 0,r)))),xt=(n,e,t)=>(t||=e?qs.WARN:qs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=b(Pi),s=b(Bd),a=b(Xt)}catch{return Xj(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=xo(()=>s.add())),i[u]=tB(i[u],r,a));let l=eB(()=>n.apply(this,i));return e?l instanceof Ie?l.pipe(hi(o.outsideAngular),di(o.insideAngular),qv(a)):l instanceof Promise?xo(()=>new Promise((u,h)=>{s.run(()=>l).then(y=>nn(a,()=>xo(()=>u(y))),y=>nn(a,()=>xo(()=>h(y))))})):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:xo(()=>l):l instanceof Ie?l.pipe(hi(o.outsideAngular),di(o.insideAngular)):xo(()=>l)});var qr=class{constructor(e){return e}},Ro=class{constructor(){return Nh()}};function nB(n){return n&&n.length===1?n[0]:new qr(Ao())}var zv=new ee("angularfire2._apps"),rB={provide:qr,useFactory:nB,deps:[[new kn,zv]]},iB={provide:Ro,deps:[[new kn,zv]]};function oB(n){return(e,t)=>{let r=t.get(_o);ot("angularfire",Mi.full,"core"),ot("angularfire",Mi.full,"app"),ot("angular",nS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new qr(i)}}function KD(n,...e){return kr([rB,iB,{provide:zv,useFactory:oB(n),multi:!0,deps:[We,Ft,Pi,...e]}])}var QD=xt(Hv,!0);var sB=new Map,aB={activated:!1,tokenObservers:[]},cB={initialized:!1,enabled:!1};function Jn(n){return sB.get(n)||Object.assign({},aB)}function XD(){return cB}var lB="https://content-firebaseappcheck.googleapis.com/v1";var uB="exchangeDebugToken",YD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},yX=24*60*60*1e3;var Kv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new So,this.pending.promise.catch(t=>{}),yield dB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new So,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function dB(n){return new Promise(e=>{setTimeout(e,n)})}var hB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ni=new Yn("appCheck","AppCheck",hB);function eA(n){if(!Jn(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function tA(r,i){return C(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,a)}catch(E){throw Ni.create("fetch-network-error",{originalErrorMessage:E?.message})}if(l.status!==200)throw Ni.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(E){throw Ni.create("fetch-parse-error",{originalErrorMessage:E?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let y=Number(h[1])*1e3,I=Date.now();return{token:u.token,expireTimeMillis:I+y,issuedAtTimeMillis:I}})}function nA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lB}/projects/${t}/apps/${r}:${uB}?key=${i}`,body:{debug_token:e}}}var fB="firebase-app-check-database",pB=1,Qv="firebase-app-check-store";var Oh=null;function mB(){return Oh||(Oh=new Promise((n,e)=>{try{let t=indexedDB.open(fB,pB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ni.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Qv,{keyPath:"compositeKey"})}}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t?.message}))}}),Oh)}function gB(n,e){return yB(vB(n),e)}function yB(n,e){return C(this,null,function*(){let r=(yield mB()).transaction(Qv,"readwrite"),o=r.objectStore(Qv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(Ni.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function vB(n){return`${n.options.appId}-${n.name}`}var dl=new hr("@firebase/app-check");function Gv(n,e){return sl()?gB(n,e).catch(t=>{dl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rA(){return XD().enabled}function iA(){return C(this,null,function*(){let n=XD();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _B={error:"UNKNOWN_ERROR"};function EB(n){return Ah.encodeString(JSON.stringify(n),!1)}function Yv(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;eA(r);let i=Jn(r),o=i.token,s;if(o&&!hl(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(hl(u)?o=u:yield Gv(r,void 0))}if(!e&&o&&hl(o))return{token:o.token};let a=!1;if(rA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=tA(nA(r,yield iA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Gv(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?dl.warn(u.message):t&&dl.error(u),Wv(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Jn(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?dl.warn(u.message):t&&dl.error(u),s=u}let l;return o?s?hl(o)?l={token:o.token,internalError:s}:l=Wv(s):(l={token:o.token},i.token=o,yield Gv(r,o)):l=Wv(s),a&&bB(r,l),l})}function IB(n){return C(this,null,function*(){let e=n.app;eA(e);let{provider:t}=Jn(e);if(rA()){let r=yield iA(),{token:i}=yield tA(nA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function wB(n,e,t,r){let{app:i}=n,o=Jn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ZD(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZD(n))}function oA(n,e){let t=Jn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZD(n){let{app:e}=n,t=Jn(e),r=t.tokenRefresher;r||(r=CB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function CB(n){let{app:e}=n;return new Kv(()=>C(this,null,function*(){let t=Jn(e),r;if(t.token?r=yield Yv(n,!0):r=yield Yv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Jn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},YD.RETRIAL_MIN_WAIT,YD.RETRIAL_MAX_WAIT)}function bB(n,e){let t=Jn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hl(n){return n.expireTimeMillis-Date.now()>0}function Wv(n){return{token:EB(_B),error:n}}var Zv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Jn(this.app);for(let t of e)oA(this.app,t.next);return Promise.resolve()}};function TB(n,e){return new Zv(n,e)}function SB(n){return{getToken:e=>Yv(n,e),getLimitedUseToken:()=>IB(n),addTokenListener:e=>wB(n,"INTERNAL",e),removeTokenListener:e=>oA(n.app,e)}}var DB="@firebase/app-check",AB="0.8.13";var xB="app-check",JD="app-check-internal";function RB(){Zn(new an(xB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return TB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JD).initialize()})),Zn(new an(JD,n=>{let e=n.getProvider("app-check").getImmediate();return SB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ot(DB,AB)}RB();var MB="app-check";var Gs=class{constructor(){return zs(MB)}};var PB=["localhost","0.0.0.0","127.0.0.1"],RX=typeof window<"u"&&PB.includes(window.location.hostname);function IA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wA=IA,CA=new Yn("auth","Firebase",IA());var Uh=new hr("@firebase/auth");function NB(n,...e){Uh.logLevel<=Pe.WARN&&Uh.warn(`Auth (${Ri}): ${n}`,...e)}function Vh(n,...e){Uh.logLevel<=Pe.ERROR&&Uh.error(`Auth (${Ri}): ${n}`,...e)}function mr(n,...e){throw w_(n,...e)}function Mo(n,...e){return w_(n,...e)}function bA(n,e,t){let r=Object.assign(Object.assign({},wA()),{[e]:t});return new Yn("auth","Firebase",r).create(e,{appName:n.name})}function Fi(n){return bA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return CA.create(n,...e)}function ie(n,e,...t){if(!n)throw w_(e,...t)}function zr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Vh(e),new Error(e)}function Vi(n,e){n||zr(e)}function t_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kB(){return sA()==="http:"||sA()==="https:"}function sA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function OB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kB()||TD()||"connection"in navigator)?navigator.onLine:!0}function FB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Po=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=CD()||SD()}get(){return OB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function C_(n,e){Vi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $h=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var VB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var LB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jB=new Po(3e4,6e4);function Li(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wr(o,s,a,l){return C(this,arguments,function*(n,e,t,r,i={}){return TA(n,i,()=>C(this,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let y=al(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:I},u);return bD()||(E.referrerPolicy="no-referrer"),$h.fetch()(yield SA(n,n.config.apiHost,t,y),E)}))})}function TA(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},VB),e);try{let i=new n_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Fh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Fh(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Fh(n,"user-disabled",s);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bA(n,h,u);mr(n,h)}}catch(i){if(i instanceof Tn)throw i;mr(n,"network-request-failed",{message:String(i)})}})}function Xh(o,s,a,l){return C(this,arguments,function*(n,e,t,r,i={}){let u=yield Wr(n,e,t,r,i);return"mfaPendingCredential"in u&&mr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function SA(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?C_(n.config,i):`${n.config.apiScheme}://${i}`;return LB.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function BB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var n_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Mo(this.auth,"network-request-failed")),jB.get())})}};function Fh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Mo(n,e,r);return i.customData._tokenResponse=t,i}function aA(n){return n!==void 0&&n.enterprise!==void 0}var r_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function UB(n,e){return C(this,null,function*(){return Wr(n,"GET","/v2/recaptchaConfig",Li(n,e))})}function $B(n,e){return C(this,null,function*(){return Wr(n,"POST","/v1/accounts:delete",e)})}function Hh(n,e){return C(this,null,function*(){return Wr(n,"POST","/v1/accounts:lookup",e)})}function pl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function b_(n,e=!1){return C(this,null,function*(){let t=yt(n),r=yield t.getIdToken(e),i=T_(r);ie(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:pl(Jv(i.auth_time)),issuedAtTime:pl(Jv(i.iat)),expirationTime:pl(Jv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Jv(n){return Number(n)*1e3}function T_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{let i=xh(t);return i?JSON.parse(i):(Vh("Failed to decode base64 JWT payload"),null)}catch(i){return Vh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cA(n){let e=T_(n);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gl(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Tn&&HB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function HB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var i_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pl(this.lastLoginAt),this.creationTime=pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function qh(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield gl(n,Hh(t,{idToken:r}));ie(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DA(o.providerUserInfo):[],a=qB(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=l?u:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new yl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,y)})}function S_(n){return C(this,null,function*(){let e=yt(n);yield qh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function qB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DA(n){return n.map(e=>{var{providerId:t}=e,r=Vm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function zB(n,e){return C(this,null,function*(){let t=yield TA(n,{},()=>C(this,null,function*(){let r=al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield SA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$h.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GB(n,e){return C(this,null,function*(){return Wr(n,"POST","/v2/accounts:revokeToken",Li(n,e))})}var ml=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");let t=cA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield zB(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ie(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return zr("not implemented")}};function ki(n,e){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Oi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield gl(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return b_(this,e)}reload(){return S_(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield qh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Sn(this.auth.app))return Promise.reject(Fi(this.auth));let e=yield this.getIdToken();return yield gl(this,$B(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,h;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(s=t.photoURL)!==null&&s!==void 0?s:void 0,V=(a=t.tenantId)!==null&&a!==void 0?a:void 0,F=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,Q=(u=t.createdAt)!==null&&u!==void 0?u:void 0,he=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ve,emailVerified:Je,isAnonymous:Kt,providerData:ze,stsTokenManager:x}=t;ie(ve&&x,e,"internal-error");let w=ml.fromJSON(this.name,x);ie(typeof ve=="string",e,"internal-error"),ki(y,e.name),ki(I,e.name),ie(typeof Je=="boolean",e,"internal-error"),ie(typeof Kt=="boolean",e,"internal-error"),ki(E,e.name),ki(M,e.name),ki(V,e.name),ki(F,e.name),ki(Q,e.name),ki(he,e.name);let S=new n({uid:ve,auth:e,email:I,emailVerified:Je,displayName:y,isAnonymous:Kt,photoURL:M,phoneNumber:E,tenantId:V,stsTokenManager:w,createdAt:Q,lastLoginAt:he});return ze&&Array.isArray(ze)&&(S.providerData=ze.map(A=>Object.assign({},A))),F&&(S._redirectEventId=F),S}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new ml;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield qh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];ie(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?DA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ml;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l})}};var lA=new Map;function Gr(n){Vi(n instanceof Function,"Expected a class definition");let e=lA.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lA.set(n,e),e)}var WB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),o_=WB;function Lh(n,e,t){return`firebase:${n}:${e}:${t}`}var zh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Lh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Lh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Hh(this.auth,{idToken:e}).catch(()=>{});return t?Oi._fromGetAccountInfoResponse(this.auth,t,e):null}return Oi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Gr(o_),e,r);let i=(yield Promise.all(t.map(u=>C(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Gr(o_),s=Lh(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let y;if(typeof h=="string"){let I=yield Hh(e,{idToken:h}).catch(()=>{});if(!I)break;y=yield Oi._fromGetAccountInfoResponse(e,I,h)}else y=Oi._fromJSON(e,h);u!==o&&(a=y),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>C(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function uA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NA(e))return"Blackberry";if(kA(e))return"Webos";if(xA(e))return"Safari";if((e.includes("chrome/")||RA(e))&&!e.includes("edge/"))return"Chrome";if(PA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AA(n=At()){return/firefox\//i.test(n)}function xA(n=At()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RA(n=At()){return/crios\//i.test(n)}function MA(n=At()){return/iemobile/i.test(n)}function PA(n=At()){return/android/i.test(n)}function NA(n=At()){return/blackberry/i.test(n)}function kA(n=At()){return/webos/i.test(n)}function D_(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KB(n=At()){var e;return D_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QB(){return DD()&&document.documentMode===10}function OA(n=At()){return D_(n)||PA(n)||kA(n)||NA(n)||/windows phone/i.test(n)||MA(n)}function FA(n,e=[]){let t;switch(n){case"Browser":t=uA(At());break;case"Worker":t=`${uA(At())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ri}/${r}`}var s_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function YB(t){return C(this,arguments,function*(n,e={}){return Wr(n,"GET","/v2/passwordPolicy",Li(n,e))})}var ZB=6,a_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:ZB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var c_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gh(this),this.idTokenSubscription=new Gh(this),this.beforeStateQueue=new s_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gr(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield zh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield Hh(this,{idToken:e}),r=yield Oi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(Sn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield qh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=FB()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Sn(this.app))return Promise.reject(Fi(this));let t=e?yt(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Sn(this.app)?Promise.reject(Fi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Sn(this.app)?Promise.reject(Fi(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Gr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield YB(this),t=new a_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield GB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Gr(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=yield zh.create(this,[Gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&NB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ko(n){return yt(n)}var Gh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MD(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ef={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JB(n){ef=n}function VA(n){return ef.loadJS(n)}function XB(){return ef.recaptchaEnterpriseScript}function eU(){return ef.gapiScript}function LA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var l_=class{constructor(){this.enterprise=new u_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},u_=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var tU="recaptcha-enterprise",jA="NO_RECAPTCHA",d_=class{constructor(e){this.type=tU,this.auth=ko(e)}verify(e="verify",t=!1){return C(this,null,function*(){function r(o){return C(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>C(this,null,function*(){UB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new r_(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(l=>{a(l)})}))})}function i(o,s,a){let l=window.grecaptcha;aA(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(jA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new l_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&aA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XB();l.length!==0&&(l+=a),VA(l).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function fl(n,e,t,r=!1,i=!1){return C(this,null,function*(){let o=new d_(n),s;if(i)s=jA;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function h_(n,e,t,r,i){return C(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield fl(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>C(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=yield fl(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield fl(n,e,t);return r(n,a).catch(l=>C(this,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield fl(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)}))}else{let a=yield fl(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function A_(n,e){let t=Hs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(dr(o,e??{}))return i;mr(i,"already-initialized")}return t.initialize({options:e})}function nU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function x_(n,e,t){let r=ko(n);ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=BA(e),{host:s,port:a}=rU(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ie(dr(u,r.config.emulator)&&dr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||iU()}function BA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rU(n){let e=BA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:dA(s)}}}function dA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function iU(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var vl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}};function oU(n,e){return C(this,null,function*(){return Wr(n,"POST","/v1/accounts:signUp",e)})}function sU(n,e){return C(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithPassword",Li(n,e))})}function aU(n,e){return C(this,null,function*(){return Wr(n,"POST","/v1/accounts:sendOobCode",Li(n,e))})}function cU(n,e){return C(this,null,function*(){return aU(n,e)})}function lU(n,e){return C(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithEmailLink",Li(n,e))})}function uU(n,e){return C(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithEmailLink",Li(n,e))})}var _l=class n extends vl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,t,"signInWithPassword",sU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lU(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_linkToIdToken(e,t){return C(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,r,"signUpPassword",oU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uU(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Xv(n,e){return C(this,null,function*(){return Xh(n,"POST","/v1/accounts:signInWithIdp",Li(n,e))})}function dU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hU(n){let e=Us($s(n)).link,t=e?Us($s(e)).deep_link_id:null,r=Us($s(n)).deep_link_id;return(r?Us($s(r)).link:null)||r||t||e||n}var Wh=class n{constructor(e){var t,r,i,o,s,a;let l=Us($s(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,y=dU((i=l.mode)!==null&&i!==void 0?i:null);ie(u&&h&&y,"argument-error"),this.apiKey=u,this.operation=y,this.code=h,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=hU(e);try{return new n(t)}catch{return null}}};var UA=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return _l._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Wh.parseLink(r);return ie(i,"argument-error"),_l._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Kh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var f_=class extends Kh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var El=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return C(this,null,function*(){let o=yield Oi._fromIdTokenResponse(e,r,i),s=hA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return C(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var p_=class n extends Tn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $A(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?p_._fromErrorAndOperation(n,o,e,r):o})}function fU(n,e,t=!1){return C(this,null,function*(){let r=yield gl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return El._forOperation(n,"link",r)})}function pU(n,e,t=!1){return C(this,null,function*(){let{auth:r}=n;if(Sn(r.app))return Promise.reject(Fi(r));let i="reauthenticate";try{let o=yield gl(n,$A(r,i,e,n),t);ie(o.idToken,r,"internal-error");let s=T_(o.idToken);ie(s,r,"internal-error");let{sub:a}=s;return ie(n.uid===a,r,"user-mismatch"),El._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&mr(r,"user-mismatch"),o}})}function HA(n,e,t=!1){return C(this,null,function*(){if(Sn(n.app))return Promise.reject(Fi(n));let r="signIn",i=yield $A(n,r,e),o=yield El._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function R_(n,e){return C(this,null,function*(){return HA(ko(n),e)})}function mU(n,e,t){var r;ie(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ie(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ie(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ie(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ie(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function gU(n){return C(this,null,function*(){let e=ko(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function M_(n,e,t){return C(this,null,function*(){let r=ko(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&mU(r,i,t),yield h_(r,i,"getOobCode",cU,"EMAIL_PASSWORD_PROVIDER")})}function P_(n,e,t){return Sn(n.app)?Promise.reject(Fi(n)):R_(yt(n),UA.credential(e,t)).catch(r=>C(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&gU(n),r}))}function wl(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function N_(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function k_(n){return yt(n).signOut()}var Qh="__sak";var Yh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var yU=1e3,vU=10,_U=(()=>{class n extends Yh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);QB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,vU):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},yU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return C(this,null,function*(){yield li(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return C(this,null,function*(){let r=yield li(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return C(this,null,function*(){yield li(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),qA=_U;var EU=(()=>{class n extends Yh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),O_=EU;function IU(n){return Promise.all(n.map(e=>C(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var wU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(a).map(h=>C(this,null,function*(){return h(r.origin,s)})),u=yield IU(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var m_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return C(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{let u=zA("",20);i.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(y){let I=y;if(I.data.eventId===u)switch(I.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(I.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function pr(){return window}function CU(n){pr().location.href=n}function GA(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}function bU(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function TU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function SU(){return GA()?self:null}var WA="firebaseLocalStorageDb",DU=1,Zh="firebaseLocalStorage",KA="fbase_key",No=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function tf(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function AU(){let n=indexedDB.deleteDatabase(WA);return new No(n).toPromise()}function g_(){let n=indexedDB.open(WA,DU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Zh,{keyPath:KA})}catch(i){t(i)}}),n.addEventListener("success",()=>C(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Zh)?e(r):(r.close(),yield AU(),e(yield g_()))}))})}function fA(n,e,t){return C(this,null,function*(){let r=tf(n,!0).put({[KA]:e,value:t});return new No(r).toPromise()})}function xU(n,e){return C(this,null,function*(){let t=tf(n,!1).get(e),r=yield new No(t).toPromise();return r===void 0?null:r.value})}function pA(n,e){let t=tf(n,!0).delete(e);return new No(t).toPromise()}var RU=800,MU=3,PU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield g_(),this.db)})}_withRetries(t){return C(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>MU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return GA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=wU._getInstance(SU()),this.receiver._subscribe("keyChanged",(t,r)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,r;if(this.activeServiceWorker=yield bU(),!this.activeServiceWorker)return;this.sender=new m_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||TU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield g_();return yield fA(t,Qh,"1"),yield pA(t,Qh),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>fA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let r=yield this._withRetries(i=>xU(i,t));return this.localCache[t]=r,r})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>pA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(o=>{let s=tf(o,!1).getAll();return new No(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),RU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),QA=PU;var LX=LA("rcb"),jX=new Po(3e4,6e4);function NU(n,e){return e?Gr(e):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Il=class extends vl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xv(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function kU(n){return HA(n.auth,new Il(n),n.bypassAuthState)}function OU(n){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),pU(t,new Il(n),n.bypassAuthState)}function FU(n){return C(this,null,function*(){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),fU(t,new Il(n),n.bypassAuthState)})}var y_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kU;case"linkViaPopup":case"linkViaRedirect":return FU;case"reauthViaPopup":case"reauthViaRedirect":return OU;default:mr(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var BX=new Po(2e3,1e4);var VU="pendingRedirect",jh=new Map,v_=class n extends y_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return C(this,null,function*(){let e=jh.get(this.auth._key());if(!e){try{let r=(yield LU(this.resolver,this.auth))?yield li(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return li(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,li(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function LU(n,e){return C(this,null,function*(){let t=UU(e),r=BU(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function jU(n,e){jh.set(n._key(),e)}function BU(n){return Gr(n._redirectPersistence)}function UU(n){return Lh(VU,n.config.apiKey,n.name)}function $U(n,e,t=!1){return C(this,null,function*(){if(Sn(n.app))return Promise.reject(Fi(n));let r=ko(n),i=NU(r,e),s=yield new v_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var HU=10*60*1e3,__=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Mo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HU&&this.cachedEventUids.clear(),this.cachedEventUids.has(mA(e))}saveEventToCache(e){this.cachedEventUids.add(mA(e)),this.lastProcessedEventTime=Date.now()}};function mA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YA(n);default:return!1}}function zU(t){return C(this,arguments,function*(n,e={}){return Wr(n,"GET","/v1/projects",e)})}var GU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WU=/^https?/;function KU(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield zU(n);for(let t of e)try{if(QU(t))return}catch{}mr(n,"unauthorized-domain")})}function QU(n){let e=t_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!WU.test(t))return!1;if(GU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var YU=new Po(3e4,6e4);function gA(){let n=pr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZU(n){return new Promise((e,t)=>{var r,i,o;function s(){gA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gA(),t(Mo(n,"network-request-failed"))},timeout:YU.get()})}if(!((i=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=pr().gapi)===null||o===void 0)&&o.load)s();else{let a=LA("iframefcb");return pr()[a]=()=>{gapi.load?s():t(Mo(n,"network-request-failed"))},VA(`${eU()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Bh=null,e})}var Bh=null;function JU(n){return Bh=Bh||ZU(n),Bh}var XU=new Po(5e3,15e3),e$="__/auth/iframe",t$="emulator/auth/iframe",n$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i$(n){let e=n.config;ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?C_(e,t$):`https://${n.config.authDomain}/${e$}`,r={apiKey:e.apiKey,appName:n.name,v:Ri},i=r$.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${al(r).slice(1)}`}function o$(n){return C(this,null,function*(){let e=yield JU(n),t=pr().gapi;return ie(t,n,"internal-error"),e.open({where:document.body,url:i$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n$,dontclear:!0},r=>new Promise((i,o)=>C(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Mo(n,"network-request-failed"),a=pr().setTimeout(()=>{o(s)},XU.get());function l(){pr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}var s$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a$=500,c$=600,l$="_blank",u$="http://localhost",Jh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function d$(n,e,t,r=a$,i=c$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},s$),{width:r.toString(),height:i.toString(),top:o,left:s}),u=At().toLowerCase();t&&(a=RA(u)?l$:t),AA(u)&&(e=e||u$,l.scrollbars="yes");let h=Object.entries(l).reduce((I,[E,M])=>`${I}${E}=${M},`,"");if(KB(u)&&a!=="_self")return h$(e||"",a),new Jh(null);let y=window.open(e||"",a,h);ie(y,n,"popup-blocked");try{y.focus()}catch{}return new Jh(y)}function h$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var f$="__/auth/handler",p$="emulator/auth/handler",m$=encodeURIComponent("fac");function yA(n,e,t,r,i,o){return C(this,null,function*(){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ri,eventId:i};if(e instanceof Kh){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",RD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,y]of Object.entries(o||{}))s[h]=y}if(e instanceof f_){let h=e.getScopes().filter(y=>y!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let l=yield n._getAppCheckToken(),u=l?`#${m$}=${encodeURIComponent(l)}`:"";return`${g$(n)}?${al(a).slice(1)}${u}`})}function g$({config:n}){return n.emulator?C_(n,p$):`https://${n.authDomain}/${f$}`}var e_="webStorageSupport",E_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=$U,this._overrideRedirectResult=jU}_openPopup(e,t,r,i){return C(this,null,function*(){var o;Vi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield yA(e,t,r,t_(),i);return d$(e,s,zA())})}_openRedirect(e,t,r,i){return C(this,null,function*(){yield this._originValidation(e);let o=yield yA(e,t,r,t_(),i);return CU(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return C(this,null,function*(){let t=yield o$(e),r=new __(e);return t.register("authEvent",i=>(ie(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(e_,{type:e_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[e_];s!==void 0&&t(!!s),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OA()||xA()||D_()}},ZA=E_;var vA="@firebase/auth",_A="1.10.1";var I_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function y$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v$(n){Zn(new an("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ie(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(n)},u=new c_(r,i,o,l);return nU(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zn(new an("auth-internal",e=>{let t=ko(e.getProvider("auth").getImmediate());return(r=>new I_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ot(vA,_A,y$(n)),ot(vA,_A,"esm2017")}var _$=5*60,E$=Av("authIdTokenMaxAge")||_$,EA=null,I$=n=>e=>C(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E$)return;let i=t?.token;EA!==i&&(EA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function F_(n=Ao()){let e=Hs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=A_(n,{popupRedirectResolver:ZA,persistence:[QA,qA,O_]}),r=Av("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=I$(o.toString());N_(t,s,()=>s(t.currentUser)),wl(t,a=>s(a))}}let i=Sv("auth");return i&&x_(t,`http://${i}`),t}function w$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Mo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",w$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v$("Browser");function e1(n){return new Ie(function(e){var t=wl(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var t1="auth",Kr=class{constructor(e){return e}},Cl=class{constructor(){return zs(t1)}};var V_=new ee("angularfire2.auth-instances");function l3(n,e){let t=ul(t1,n,e);return t&&new Kr(t)}function u3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kr(r)}}var d3={provide:Cl,deps:[[new kn,V_]]},h3={provide:Kr,useFactory:l3,deps:[[new kn,V_],qr]};function n1(n,...e){return ot("angularfire",Mi.full,"auth"),kr([h3,d3,{provide:V_,useFactory:u3(n),multi:!0,deps:[We,Ft,Pi,Ro,[new kn,Gs],...e]}])}var r1=xt(e1,!0);var i1=xt(F_,!0);var o1=xt(M_,!0,2);var s1=xt(P_,!0,2);var a1=xt(k_,!0,2);var c1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l1={};var Qr,L_;(function(){var n;function e(x,w){function S(){}S.prototype=w.prototype,x.D=w.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(A,R,N){for(var T=Array(arguments.length-2),br=2;br<arguments.length;br++)T[br-2]=arguments[br];return w.prototype[R].apply(A,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,S){S||(S=0);var A=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)A[R]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(R=0;16>R;++R)A[R]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=x.g[0],S=x.g[1],R=x.g[2];var N=x.g[3],T=w+(N^S&(R^N))+A[0]+3614090360&4294967295;w=S+(T<<7&4294967295|T>>>25),T=N+(R^w&(S^R))+A[1]+3905402710&4294967295,N=w+(T<<12&4294967295|T>>>20),T=R+(S^N&(w^S))+A[2]+606105819&4294967295,R=N+(T<<17&4294967295|T>>>15),T=S+(w^R&(N^w))+A[3]+3250441966&4294967295,S=R+(T<<22&4294967295|T>>>10),T=w+(N^S&(R^N))+A[4]+4118548399&4294967295,w=S+(T<<7&4294967295|T>>>25),T=N+(R^w&(S^R))+A[5]+1200080426&4294967295,N=w+(T<<12&4294967295|T>>>20),T=R+(S^N&(w^S))+A[6]+2821735955&4294967295,R=N+(T<<17&4294967295|T>>>15),T=S+(w^R&(N^w))+A[7]+4249261313&4294967295,S=R+(T<<22&4294967295|T>>>10),T=w+(N^S&(R^N))+A[8]+1770035416&4294967295,w=S+(T<<7&4294967295|T>>>25),T=N+(R^w&(S^R))+A[9]+2336552879&4294967295,N=w+(T<<12&4294967295|T>>>20),T=R+(S^N&(w^S))+A[10]+4294925233&4294967295,R=N+(T<<17&4294967295|T>>>15),T=S+(w^R&(N^w))+A[11]+2304563134&4294967295,S=R+(T<<22&4294967295|T>>>10),T=w+(N^S&(R^N))+A[12]+1804603682&4294967295,w=S+(T<<7&4294967295|T>>>25),T=N+(R^w&(S^R))+A[13]+4254626195&4294967295,N=w+(T<<12&4294967295|T>>>20),T=R+(S^N&(w^S))+A[14]+2792965006&4294967295,R=N+(T<<17&4294967295|T>>>15),T=S+(w^R&(N^w))+A[15]+1236535329&4294967295,S=R+(T<<22&4294967295|T>>>10),T=w+(R^N&(S^R))+A[1]+4129170786&4294967295,w=S+(T<<5&4294967295|T>>>27),T=N+(S^R&(w^S))+A[6]+3225465664&4294967295,N=w+(T<<9&4294967295|T>>>23),T=R+(w^S&(N^w))+A[11]+643717713&4294967295,R=N+(T<<14&4294967295|T>>>18),T=S+(N^w&(R^N))+A[0]+3921069994&4294967295,S=R+(T<<20&4294967295|T>>>12),T=w+(R^N&(S^R))+A[5]+3593408605&4294967295,w=S+(T<<5&4294967295|T>>>27),T=N+(S^R&(w^S))+A[10]+38016083&4294967295,N=w+(T<<9&4294967295|T>>>23),T=R+(w^S&(N^w))+A[15]+3634488961&4294967295,R=N+(T<<14&4294967295|T>>>18),T=S+(N^w&(R^N))+A[4]+3889429448&4294967295,S=R+(T<<20&4294967295|T>>>12),T=w+(R^N&(S^R))+A[9]+568446438&4294967295,w=S+(T<<5&4294967295|T>>>27),T=N+(S^R&(w^S))+A[14]+3275163606&4294967295,N=w+(T<<9&4294967295|T>>>23),T=R+(w^S&(N^w))+A[3]+4107603335&4294967295,R=N+(T<<14&4294967295|T>>>18),T=S+(N^w&(R^N))+A[8]+1163531501&4294967295,S=R+(T<<20&4294967295|T>>>12),T=w+(R^N&(S^R))+A[13]+2850285829&4294967295,w=S+(T<<5&4294967295|T>>>27),T=N+(S^R&(w^S))+A[2]+4243563512&4294967295,N=w+(T<<9&4294967295|T>>>23),T=R+(w^S&(N^w))+A[7]+1735328473&4294967295,R=N+(T<<14&4294967295|T>>>18),T=S+(N^w&(R^N))+A[12]+2368359562&4294967295,S=R+(T<<20&4294967295|T>>>12),T=w+(S^R^N)+A[5]+4294588738&4294967295,w=S+(T<<4&4294967295|T>>>28),T=N+(w^S^R)+A[8]+2272392833&4294967295,N=w+(T<<11&4294967295|T>>>21),T=R+(N^w^S)+A[11]+1839030562&4294967295,R=N+(T<<16&4294967295|T>>>16),T=S+(R^N^w)+A[14]+4259657740&4294967295,S=R+(T<<23&4294967295|T>>>9),T=w+(S^R^N)+A[1]+2763975236&4294967295,w=S+(T<<4&4294967295|T>>>28),T=N+(w^S^R)+A[4]+1272893353&4294967295,N=w+(T<<11&4294967295|T>>>21),T=R+(N^w^S)+A[7]+4139469664&4294967295,R=N+(T<<16&4294967295|T>>>16),T=S+(R^N^w)+A[10]+3200236656&4294967295,S=R+(T<<23&4294967295|T>>>9),T=w+(S^R^N)+A[13]+681279174&4294967295,w=S+(T<<4&4294967295|T>>>28),T=N+(w^S^R)+A[0]+3936430074&4294967295,N=w+(T<<11&4294967295|T>>>21),T=R+(N^w^S)+A[3]+3572445317&4294967295,R=N+(T<<16&4294967295|T>>>16),T=S+(R^N^w)+A[6]+76029189&4294967295,S=R+(T<<23&4294967295|T>>>9),T=w+(S^R^N)+A[9]+3654602809&4294967295,w=S+(T<<4&4294967295|T>>>28),T=N+(w^S^R)+A[12]+3873151461&4294967295,N=w+(T<<11&4294967295|T>>>21),T=R+(N^w^S)+A[15]+530742520&4294967295,R=N+(T<<16&4294967295|T>>>16),T=S+(R^N^w)+A[2]+3299628645&4294967295,S=R+(T<<23&4294967295|T>>>9),T=w+(R^(S|~N))+A[0]+4096336452&4294967295,w=S+(T<<6&4294967295|T>>>26),T=N+(S^(w|~R))+A[7]+1126891415&4294967295,N=w+(T<<10&4294967295|T>>>22),T=R+(w^(N|~S))+A[14]+2878612391&4294967295,R=N+(T<<15&4294967295|T>>>17),T=S+(N^(R|~w))+A[5]+4237533241&4294967295,S=R+(T<<21&4294967295|T>>>11),T=w+(R^(S|~N))+A[12]+1700485571&4294967295,w=S+(T<<6&4294967295|T>>>26),T=N+(S^(w|~R))+A[3]+2399980690&4294967295,N=w+(T<<10&4294967295|T>>>22),T=R+(w^(N|~S))+A[10]+4293915773&4294967295,R=N+(T<<15&4294967295|T>>>17),T=S+(N^(R|~w))+A[1]+2240044497&4294967295,S=R+(T<<21&4294967295|T>>>11),T=w+(R^(S|~N))+A[8]+1873313359&4294967295,w=S+(T<<6&4294967295|T>>>26),T=N+(S^(w|~R))+A[15]+4264355552&4294967295,N=w+(T<<10&4294967295|T>>>22),T=R+(w^(N|~S))+A[6]+2734768916&4294967295,R=N+(T<<15&4294967295|T>>>17),T=S+(N^(R|~w))+A[13]+1309151649&4294967295,S=R+(T<<21&4294967295|T>>>11),T=w+(R^(S|~N))+A[4]+4149444226&4294967295,w=S+(T<<6&4294967295|T>>>26),T=N+(S^(w|~R))+A[11]+3174756917&4294967295,N=w+(T<<10&4294967295|T>>>22),T=R+(w^(N|~S))+A[2]+718787259&4294967295,R=N+(T<<15&4294967295|T>>>17),T=S+(N^(R|~w))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var S=w-this.blockSize,A=this.B,R=this.h,N=0;N<w;){if(R==0)for(;N<=S;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<w;)if(A[R++]=x.charCodeAt(N++),R==this.blockSize){i(this,A),R=0;break}}else for(;N<w;)if(A[R++]=x[N++],R==this.blockSize){i(this,A),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var S=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=S&255,S/=256;for(this.u(x),x=Array(16),w=S=0;4>w;++w)for(var A=0;32>A;A+=8)x[S++]=this.g[w]>>>A&255;return x};function o(x,w){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=w(x)}function s(x,w){this.h=w;for(var S=[],A=!0,R=x.length-1;0<=R;R--){var N=x[R]|0;A&&N==w||(S[R]=N,A=!1)}this.g=S}var a={};function l(x){return-128<=x&&128>x?o(x,function(w){return new s([w|0],0>w?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return y;if(0>x)return F(u(-x));for(var w=[],S=1,A=0;x>=S;A++)w[A]=x/S|0,S*=4294967296;return new s(w,0)}function h(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return F(h(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),A=y,R=0;R<x.length;R+=8){var N=Math.min(8,x.length-R),T=parseInt(x.substring(R,R+N),w);8>N?(N=u(Math.pow(w,N)),A=A.j(N).add(u(T))):(A=A.j(S),A=A.add(u(T)))}return A}var y=l(0),I=l(1),E=l(16777216);n=s.prototype,n.m=function(){if(V(this))return-F(this).m();for(var x=0,w=1,S=0;S<this.g.length;S++){var A=this.i(S);x+=(0<=A?A:4294967296+A)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if(V(this))return"-"+F(this).toString(x);for(var w=u(Math.pow(x,6)),S=this,A="";;){var R=Je(S,w).g;S=Q(S,R.j(w));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=R,M(S))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function V(x){return x.h==-1}n.l=function(x){return x=Q(this,x),V(x)?-1:M(x)?0:1};function F(x){for(var w=x.g.length,S=[],A=0;A<w;A++)S[A]=~x.g[A];return new s(S,~x.h).add(I)}n.abs=function(){return V(this)?F(this):this},n.add=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],A=0,R=0;R<=w;R++){var N=A+(this.i(R)&65535)+(x.i(R)&65535),T=(N>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);A=T>>>16,N&=65535,T&=65535,S[R]=T<<16|N}return new s(S,S[S.length-1]&-2147483648?-1:0)};function Q(x,w){return x.add(F(w))}n.j=function(x){if(M(this)||M(x))return y;if(V(this))return V(x)?F(this).j(F(x)):F(F(this).j(x));if(V(x))return F(this.j(F(x)));if(0>this.l(E)&&0>x.l(E))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,S=[],A=0;A<2*w;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<x.g.length;R++){var N=this.i(A)>>>16,T=this.i(A)&65535,br=x.i(R)>>>16,Fa=x.i(R)&65535;S[2*A+2*R]+=T*Fa,he(S,2*A+2*R),S[2*A+2*R+1]+=N*Fa,he(S,2*A+2*R+1),S[2*A+2*R+1]+=T*br,he(S,2*A+2*R+1),S[2*A+2*R+2]+=N*br,he(S,2*A+2*R+2)}for(A=0;A<w;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=w;A<2*w;A++)S[A]=0;return new s(S,0)};function he(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function ve(x,w){this.g=x,this.h=w}function Je(x,w){if(M(w))throw Error("division by zero");if(M(x))return new ve(y,y);if(V(x))return w=Je(F(x),w),new ve(F(w.g),F(w.h));if(V(w))return w=Je(x,F(w)),new ve(F(w.g),w.h);if(30<x.g.length){if(V(x)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var S=I,A=w;0>=A.l(x);)S=Kt(S),A=Kt(A);var R=ze(S,1),N=ze(A,1);for(A=ze(A,2),S=ze(S,2);!M(A);){var T=N.add(A);0>=T.l(x)&&(R=R.add(S),N=T),A=ze(A,1),S=ze(S,1)}return w=Q(x,R.j(w)),new ve(R,w)}for(R=y;0<=x.l(w);){for(S=Math.max(1,Math.floor(x.m()/w.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=u(S),T=N.j(w);V(T)||0<T.l(x);)S-=A,N=u(S),T=N.j(w);M(N)&&(N=I),R=R.add(N),x=Q(x,T)}return new ve(R,x)}n.A=function(x){return Je(this,x).h},n.and=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],A=0;A<w;A++)S[A]=this.i(A)&x.i(A);return new s(S,this.h&x.h)},n.or=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],A=0;A<w;A++)S[A]=this.i(A)|x.i(A);return new s(S,this.h|x.h)},n.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),S=[],A=0;A<w;A++)S[A]=this.i(A)^x.i(A);return new s(S,this.h^x.h)};function Kt(x){for(var w=x.g.length+1,S=[],A=0;A<w;A++)S[A]=x.i(A)<<1|x.i(A-1)>>>31;return new s(S,x.h)}function ze(x,w){var S=w>>5;w%=32;for(var A=x.g.length-S,R=[],N=0;N<A;N++)R[N]=0<w?x.i(N+S)>>>w|x.i(N+S+1)<<32-w:x.i(N+S);return new s(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,L_=l1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Qr=l1.Integer=s}).apply(typeof c1<"u"?c1:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yr={};var j_,p3,Ws,B_,bl,rf,U_,$_,H_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,m){return c==Array.prototype||c==Object.prototype||(c[d]=m.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var m=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var P=c[v];if(!(P in m))break e;m=m[P]}c=c[c.length-1],v=m[c],d=d(v),d!=v&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var m=0,v=!1,P={next:function(){if(!v&&m<c.length){var k=m++;return{value:d(k,c[k]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,m){return m})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,m){return c.call.apply(c.bind,arguments)}function y(c,d,m){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),c.apply(d,P)}}return function(){return c.apply(d,arguments)}}function I(c,d,m){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:y,I.apply(null,arguments)}function E(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function M(c,d){function m(){}m.prototype=d.prototype,c.aa=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(v,P,k){for(var q=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)q[Ke-2]=arguments[Ke];return d.prototype[P].apply(v,q)}}function V(c){let d=c.length;if(0<d){let m=Array(d);for(let v=0;v<d;v++)m[v]=c[v];return m}return[]}function F(c,d){for(let m=1;m<arguments.length;m++){let v=arguments[m];if(l(v)){let P=c.length||0,k=v.length||0;c.length=P+k;for(let q=0;q<k;q++)c[P+q]=v[q]}else c.push(v)}}class Q{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function he(c){return/^[\s\xa0]*$/.test(c)}function ve(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Je(c){return Je[" "](c),c}Je[" "]=function(){};var Kt=ve().indexOf("Gecko")!=-1&&!(ve().toLowerCase().indexOf("webkit")!=-1&&ve().indexOf("Edge")==-1)&&!(ve().indexOf("Trident")!=-1||ve().indexOf("MSIE")!=-1)&&ve().indexOf("Edge")==-1;function ze(c,d,m){for(let v in c)d.call(m,c[v],v,c)}function x(c,d){for(let m in c)d.call(void 0,c[m],m,c)}function w(c){let d={};for(let m in c)d[m]=c[m];return d}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,d){let m,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(m in v)c[m]=v[m];for(let k=0;k<S.length;k++)m=S[k],Object.prototype.hasOwnProperty.call(v,m)&&(c[m]=v[m])}}function R(c){var d=1;c=c.split(":");let m=[];for(;0<d&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function N(c){a.setTimeout(()=>{throw c},0)}function T(){var c=Vp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class br{constructor(){this.h=this.g=null}add(d,m){let v=Fa.get();v.set(d,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Fa=new Q(()=>new pM,c=>c.reset());class pM{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,La=!1,Vp=new br,_I=()=>{let c=a.Promise.resolve(void 0);Va=()=>{c.then(mM)}};var mM=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(m){N(m)}var d=Fa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}La=!1};function oi(){this.s=this.s,this.C=this.C}oi.prototype.s=!1,oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function jt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var gM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return c}();function ja(c,d){if(jt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Kt){e:{try{Je(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ja.aa.h.call(this)}}M(ja,jt);var yM={2:"touch",3:"pen",4:"mouse"};ja.prototype.h=function(){ja.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ba="closure_listenable_"+(1e6*Math.random()|0),vM=0;function _M(c,d,m,v,P){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!v,this.ha=P,this.key=++vM,this.da=this.fa=!1}function tu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function nu(c){this.src=c,this.g={},this.h=0}nu.prototype.add=function(c,d,m,v,P){var k=c.toString();c=this.g[k],c||(c=this.g[k]=[],this.h++);var q=jp(c,d,v,P);return-1<q?(d=c[q],m||(d.fa=!1)):(d=new _M(d,this.src,k,!!v,P),d.fa=m,c.push(d)),d};function Lp(c,d){var m=d.type;if(m in c.g){var v=c.g[m],P=Array.prototype.indexOf.call(v,d,void 0),k;(k=0<=P)&&Array.prototype.splice.call(v,P,1),k&&(tu(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function jp(c,d,m,v){for(var P=0;P<c.length;++P){var k=c[P];if(!k.da&&k.listener==d&&k.capture==!!m&&k.ha==v)return P}return-1}var Bp="closure_lm_"+(1e6*Math.random()|0),Up={};function EI(c,d,m,v,P){if(v&&v.once)return wI(c,d,m,v,P);if(Array.isArray(d)){for(var k=0;k<d.length;k++)EI(c,d[k],m,v,P);return null}return m=zp(m),c&&c[Ba]?c.K(d,m,u(v)?!!v.capture:!!v,P):II(c,d,m,!1,v,P)}function II(c,d,m,v,P,k){if(!d)throw Error("Invalid event type");var q=u(P)?!!P.capture:!!P,Ke=Hp(c);if(Ke||(c[Bp]=Ke=new nu(c)),m=Ke.add(d,m,v,q,k),m.proxy)return m;if(v=EM(),m.proxy=v,v.src=c,v.listener=m,c.addEventListener)gM||(P=q),P===void 0&&(P=!1),c.addEventListener(d.toString(),v,P);else if(c.attachEvent)c.attachEvent(bI(d.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function EM(){function c(m){return d.call(c.src,c.listener,m)}let d=IM;return c}function wI(c,d,m,v,P){if(Array.isArray(d)){for(var k=0;k<d.length;k++)wI(c,d[k],m,v,P);return null}return m=zp(m),c&&c[Ba]?c.L(d,m,u(v)?!!v.capture:!!v,P):II(c,d,m,!0,v,P)}function CI(c,d,m,v,P){if(Array.isArray(d))for(var k=0;k<d.length;k++)CI(c,d[k],m,v,P);else v=u(v)?!!v.capture:!!v,m=zp(m),c&&c[Ba]?(c=c.i,d=String(d).toString(),d in c.g&&(k=c.g[d],m=jp(k,m,v,P),-1<m&&(tu(k[m]),Array.prototype.splice.call(k,m,1),k.length==0&&(delete c.g[d],c.h--)))):c&&(c=Hp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=jp(d,m,v,P)),(m=-1<c?d[c]:null)&&$p(m))}function $p(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ba])Lp(d.i,c);else{var m=c.type,v=c.proxy;d.removeEventListener?d.removeEventListener(m,v,c.capture):d.detachEvent?d.detachEvent(bI(m),v):d.addListener&&d.removeListener&&d.removeListener(v),(m=Hp(d))?(Lp(m,c),m.h==0&&(m.src=null,d[Bp]=null)):tu(c)}}}function bI(c){return c in Up?Up[c]:Up[c]="on"+c}function IM(c,d){if(c.da)c=!0;else{d=new ja(d,this);var m=c.listener,v=c.ha||c.src;c.fa&&$p(c),c=m.call(v,d)}return c}function Hp(c){return c=c[Bp],c instanceof nu?c:null}var qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function zp(c){return typeof c=="function"?c:(c[qp]||(c[qp]=function(d){return c.handleEvent(d)}),c[qp])}function Bt(){oi.call(this),this.i=new nu(this),this.M=this,this.F=null}M(Bt,oi),Bt.prototype[Ba]=!0,Bt.prototype.removeEventListener=function(c,d,m,v){CI(this,c,d,m,v)};function Qt(c,d){var m,v=c.F;if(v)for(m=[];v;v=v.F)m.push(v);if(c=c.M,v=d.type||d,typeof d=="string")d=new jt(d,c);else if(d instanceof jt)d.target=d.target||c;else{var P=d;d=new jt(v,c),A(d,P)}if(P=!0,m)for(var k=m.length-1;0<=k;k--){var q=d.g=m[k];P=ru(q,v,!0,d)&&P}if(q=d.g=c,P=ru(q,v,!0,d)&&P,P=ru(q,v,!1,d)&&P,m)for(k=0;k<m.length;k++)q=d.g=m[k],P=ru(q,v,!1,d)&&P}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var m=c.g[d],v=0;v<m.length;v++)tu(m[v]);delete c.g[d],c.h--}}this.F=null},Bt.prototype.K=function(c,d,m,v){return this.i.add(String(c),d,!1,m,v)},Bt.prototype.L=function(c,d,m,v){return this.i.add(String(c),d,!0,m,v)};function ru(c,d,m,v){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,k=0;k<d.length;++k){var q=d[k];if(q&&!q.da&&q.capture==m){var Ke=q.listener,Nt=q.ha||q.src;q.fa&&Lp(c.i,q),P=Ke.call(Nt,v)!==!1&&P}}return P&&!v.defaultPrevented}function TI(c,d,m){if(typeof c=="function")m&&(c=I(c,m));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function SI(c){c.g=TI(()=>{c.g=null,c.i&&(c.i=!1,SI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class wM extends oi{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:SI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ua(c){oi.call(this),this.h=c,this.g={}}M(Ua,oi);var DI=[];function AI(c){ze(c.g,function(d,m){this.g.hasOwnProperty(m)&&$p(d)},c),c.g={}}Ua.prototype.N=function(){Ua.aa.N.call(this),AI(this)},Ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gp=a.JSON.stringify,CM=a.JSON.parse,bM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wp(){}Wp.prototype.h=null;function xI(c){return c.h||(c.h=c.i())}function RI(){}var $a={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kp(){jt.call(this,"d")}M(Kp,jt);function Qp(){jt.call(this,"c")}M(Qp,jt);var Zi={},MI=null;function iu(){return MI=MI||new Bt}Zi.La="serverreachability";function PI(c){jt.call(this,Zi.La,c)}M(PI,jt);function Ha(c){let d=iu();Qt(d,new PI(d))}Zi.STAT_EVENT="statevent";function NI(c,d){jt.call(this,Zi.STAT_EVENT,c),this.stat=d}M(NI,jt);function Yt(c){let d=iu();Qt(d,new NI(d,c))}Zi.Ma="timingevent";function kI(c,d){jt.call(this,Zi.Ma,c),this.size=d}M(kI,jt);function qa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function za(){this.g=!0}za.prototype.xa=function(){this.g=!1};function TM(c,d,m,v,P,k){c.info(function(){if(c.g)if(k)for(var q="",Ke=k.split("&"),Nt=0;Nt<Ke.length;Nt++){var Ue=Ke[Nt].split("=");if(1<Ue.length){var Ut=Ue[0];Ue=Ue[1];var $t=Ut.split("_");q=2<=$t.length&&$t[1]=="type"?q+(Ut+"="+Ue+"&"):q+(Ut+"=redacted&")}}else q=null;else q=k;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+d+`
`+m+`
`+q})}function SM(c,d,m,v,P,k,q){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+d+`
`+m+`
`+k+" "+q})}function zo(c,d,m,v){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+AM(c,m)+(v?" "+v:"")})}function DM(c,d){c.info(function(){return"TIMEOUT: "+d})}za.prototype.info=function(){};function AM(c,d){if(!c.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var v=m[c];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if(k!="noop"&&k!="stop"&&k!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return Gp(m)}catch{return d}}var ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},OI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yp;function su(){}M(su,Wp),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},Yp=new su;function si(c,d,m,v){this.j=c,this.i=d,this.l=m,this.R=v||1,this.U=new Ua(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new FI}function FI(){this.i=null,this.g="",this.h=!1}var VI={},Zp={};function Jp(c,d,m){c.L=1,c.v=uu(Tr(d)),c.m=m,c.P=!0,LI(c,null)}function LI(c,d){c.F=Date.now(),au(c),c.A=Tr(c.v);var m=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),JI(m.i,"t",v),c.C=0,m=c.j.J,c.h=new FI,c.g=gw(c.j,m?d:null,!c.m),0<c.O&&(c.M=new wM(I(c.Y,c,c.g),c.O)),d=c.U,m=c.g,v=c.ca;var P="readystatechange";Array.isArray(P)||(P&&(DI[0]=P.toString()),P=DI);for(var k=0;k<P.length;k++){var q=EI(m,P[k],v||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ha(),TM(c.i,c.u,c.A,c.l,c.R,c.m)}si.prototype.ca=function(c){c=c.target;let d=this.M;d&&Sr(c)==3?d.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)e:{let $t=Sr(this.g);var d=this.g.Ba();let Ko=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||ow(this.g)))){this.J||$t!=4||d==7||(d==8||0>=Ko?Ha(3):Ha(2)),Xp(this);var m=this.g.Z();this.X=m;t:if(jI(this)){var v=ow(this.g);c="";var P=v.length,k=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Ga(this);var q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,c+=this.h.i.decode(v[d],{stream:!(k&&d==P-1)});v.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,SM(this.i,this.u,this.A,this.l,this.R,$t,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Nt=this.g;if((Ke=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(Ke)){var Ue=Ke;break t}}Ue=null}if(m=Ue)zo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,em(this,m);else{this.o=!1,this.s=3,Yt(12),Ji(this),Ga(this);break e}}if(this.P){m=!0;let Un;for(;!this.J&&this.C<q.length;)if(Un=xM(this,q),Un==Zp){$t==4&&(this.s=4,Yt(14),m=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==VI){this.s=4,Yt(15),zo(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else zo(this.i,this.l,Un,null),em(this,Un);if(jI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||q.length!=0||this.h.h||(this.s=1,Yt(16),m=!1),this.o=this.o&&m,!m)zo(this.i,this.l,q,"[Invalid Chunked Response]"),Ji(this),Ga(this);else if(0<q.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),sm(Ut),Ut.M=!0,Yt(11))}}else zo(this.i,this.l,q,null),em(this,q);$t==4&&Ji(this),this.o&&!this.J&&($t==4?hw(this.j,this):(this.o=!1,au(this)))}else GM(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Ji(this),Ga(this)}}}catch{}finally{}};function jI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xM(c,d){var m=c.C,v=d.indexOf(`
`,m);return v==-1?Zp:(m=Number(d.substring(m,v)),isNaN(m)?VI:(v+=1,v+m>d.length?Zp:(d=d.slice(v,v+m),c.C=v+m,d)))}si.prototype.cancel=function(){this.J=!0,Ji(this)};function au(c){c.S=Date.now()+c.I,BI(c,c.I)}function BI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qa(I(c.ba,c),d)}function Xp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DM(this.i,this.A),this.L!=2&&(Ha(),Yt(17)),Ji(this),this.s=2,Ga(this)):BI(this,this.S-c)};function Ga(c){c.j.G==0||c.J||hw(c.j,c)}function Ji(c){Xp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,AI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function em(c,d){try{var m=c.j;if(m.G!=0&&(m.g==c||tm(m.h,c))){if(!c.K&&tm(m.h,c)&&m.G==3){try{var v=m.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)mu(m),fu(m);else break e;om(m),Yt(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=qa(I(m.Za,m),6e3));if(1>=HI(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else eo(m,11)}else if((c.K||m.g==c)&&mu(m),!he(d))for(P=m.Da.g.parse(d),d=0;d<P.length;d++){let Ue=P[d];if(m.T=Ue[0],Ue=Ue[1],m.G==2)if(Ue[0]=="c"){m.K=Ue[1],m.ia=Ue[2];let Ut=Ue[3];Ut!=null&&(m.la=Ut,m.j.info("VER="+m.la));let $t=Ue[4];$t!=null&&(m.Aa=$t,m.j.info("SVER="+m.Aa));let Ko=Ue[5];Ko!=null&&typeof Ko=="number"&&0<Ko&&(v=1.5*Ko,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;let Un=c.g;if(Un){let yu=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yu){var k=v.h;k.g||yu.indexOf("spdy")==-1&&yu.indexOf("quic")==-1&&yu.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(nm(k,k.h),k.h=null))}if(v.D){let am=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;am&&(v.ya=am,Xe(v.I,v.D,am))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var q=c;if(v.qa=mw(v,v.J?v.ia:null,v.W),q.K){qI(v.h,q);var Ke=q,Nt=v.L;Nt&&(Ke.I=Nt),Ke.B&&(Xp(Ke),au(Ke)),v.g=q}else uw(v);0<m.i.length&&pu(m)}else Ue[0]!="stop"&&Ue[0]!="close"||eo(m,7);else m.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?eo(m,7):im(m):Ue[0]!="noop"&&m.l&&m.l.ta(Ue),m.v=0)}}Ha(4)}catch{}}var RM=class{constructor(c,d){this.g=c,this.map=d}};function UI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $I(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function HI(c){return c.h?1:c.g?c.g.size:0}function tm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function nm(c,d){c.g?c.g.add(d):c.h=d}function qI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}UI.prototype.cancel=function(){if(this.i=zI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function zI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let m of c.g.values())d=d.concat(m.D);return d}return V(c.i)}function MM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],m=c.length,v=0;v<m;v++)d.push(c[v]);return d}d=[],m=0;for(v in c)d[m++]=c[v];return d}function PM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var m=0;m<c;m++)d.push(m);return d}d=[],m=0;for(let v in c)d[m++]=v;return d}}}function GI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var m=PM(c),v=MM(c),P=v.length,k=0;k<P;k++)d.call(void 0,v[k],m&&m[k],c)}var WI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NM(c,d){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var v=c[m].indexOf("="),P=null;if(0<=v){var k=c[m].substring(0,v);P=c[m].substring(v+1)}else k=c[m];d(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Xi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xi){this.h=c.h,cu(this,c.j),this.o=c.o,this.g=c.g,lu(this,c.s),this.l=c.l;var d=c.i,m=new Qa;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),KI(this,m),this.m=c.m}else c&&(d=String(c).match(WI))?(this.h=!1,cu(this,d[1]||"",!0),this.o=Wa(d[2]||""),this.g=Wa(d[3]||"",!0),lu(this,d[4]),this.l=Wa(d[5]||"",!0),KI(this,d[6]||"",!0),this.m=Wa(d[7]||"")):(this.h=!1,this.i=new Qa(null,this.h))}Xi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ka(d,QI,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ka(d,QI,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Ka(m,m.charAt(0)=="/"?FM:OM,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Ka(m,LM)),c.join("")};function Tr(c){return new Xi(c)}function cu(c,d,m){c.j=m?Wa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function lu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function KI(c,d,m){d instanceof Qa?(c.i=d,jM(c.i,c.h)):(m||(d=Ka(d,VM)),c.i=new Qa(d,c.h))}function Xe(c,d,m){c.i.set(d,m)}function uu(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Wa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ka(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,kM),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var QI=/[#\/\?@]/g,OM=/[#\?:]/g,FM=/[#\?]/g,VM=/[#\?@]/g,LM=/#/g;function Qa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ai(c){c.g||(c.g=new Map,c.h=0,c.i&&NM(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}n=Qa.prototype,n.add=function(c,d){ai(this),this.i=null,c=Go(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function YI(c,d){ai(c),d=Go(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function ZI(c,d){return ai(c),d=Go(c,d),c.g.has(d)}n.forEach=function(c,d){ai(this),this.g.forEach(function(m,v){m.forEach(function(P){c.call(d,P,v,this)},this)},this)},n.na=function(){ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let v=0;v<d.length;v++){let P=c[v];for(let k=0;k<P.length;k++)m.push(d[v])}return m},n.V=function(c){ai(this);let d=[];if(typeof c=="string")ZI(this,c)&&(d=d.concat(this.g.get(Go(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)d=d.concat(c[m])}return d},n.set=function(c,d){return ai(this),this.i=null,c=Go(this,c),ZI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function JI(c,d,m){YI(c,d),0<m.length&&(c.i=null,c.g.set(Go(c,d),V(m)),c.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var v=d[m];let k=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var P=k;q[v]!==""&&(P+="="+encodeURIComponent(String(q[v]))),c.push(P)}}return this.i=c.join("&")};function Go(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function jM(c,d){d&&!c.j&&(ai(c),c.i=null,c.g.forEach(function(m,v){var P=v.toLowerCase();v!=P&&(YI(this,v),JI(this,P,m))},c)),c.j=d}function BM(c,d){let m=new za;if(a.Image){let v=new Image;v.onload=E(ci,m,"TestLoadImage: loaded",!0,d,v),v.onerror=E(ci,m,"TestLoadImage: error",!1,d,v),v.onabort=E(ci,m,"TestLoadImage: abort",!1,d,v),v.ontimeout=E(ci,m,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else d(!1)}function UM(c,d){let m=new za,v=new AbortController,P=setTimeout(()=>{v.abort(),ci(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:v.signal}).then(k=>{clearTimeout(P),k.ok?ci(m,"TestPingServer: ok",!0,d):ci(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),ci(m,"TestPingServer: error",!1,d)})}function ci(c,d,m,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(m)}catch{}}function $M(){this.g=new bM}function HM(c,d,m){let v=m||"";try{GI(c,function(P,k){let q=P;u(P)&&(q=Gp(P)),d.push(v+k+"="+encodeURIComponent(q))})}catch(P){throw d.push(v+"type="+encodeURIComponent("_badmap")),P}}function Ya(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Ya,Wp),Ya.prototype.g=function(){return new du(this.l,this.j)},Ya.prototype.i=function(c){return function(){return c}}({});function du(c,d){Bt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(du,Bt),n=du.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ja(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;XI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function XI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Za(this):Ja(this),this.readyState==3&&XI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Za(this))},n.Qa=function(c){this.g&&(this.response=c,Za(this))},n.ga=function(){this.g&&Za(this)};function Za(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ja(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function Ja(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ew(c){let d="";return ze(c,function(m,v){d+=v,d+=":",d+=m,d+=`\r
`}),d}function rm(c,d,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=ew(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Xe(c,d,m))}function st(c){Bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(st,Bt);var qM=/^https?$/i,zM=["POST","PUT"];n=st.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yp.g(),this.v=this.o?xI(this.o):xI(Yp),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(k){tw(this,k);return}if(c=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)m.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let k of v.keys())m.set(k,v.get(k));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(k=>k.toLowerCase()=="content-type"),P=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zM,d,void 0))||v||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,q]of m)this.g.setRequestHeader(k,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iw(this),this.u=!0,this.g.send(c),this.u=!1}catch(k){tw(this,k)}};function tw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,nw(c),hu(c)}function nw(c){c.A||(c.A=!0,Qt(c,"complete"),Qt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qt(this,"complete"),Qt(this,"abort"),hu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hu(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rw(this):this.bb())},n.bb=function(){rw(this)};function rw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Sr(c)!=4||c.Z()!=2)){if(c.u&&Sr(c)==4)TI(c.Ea,0,c);else if(Qt(c,"readystatechange"),Sr(c)==4){c.h=!1;try{let q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var v;if(v=q===0){var P=String(c.D).match(WI)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),v=!qM.test(P?P.toLowerCase():"")}m=v}if(m)Qt(c,"complete"),Qt(c,"success");else{c.m=6;try{var k=2<Sr(c)?c.g.statusText:""}catch{k=""}c.l=k+" ["+c.Z()+"]",nw(c)}}finally{hu(c)}}}}function hu(c,d){if(c.g){iw(c);let m=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Qt(c,"ready");try{m.onreadystatechange=v}catch{}}}function iw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Sr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),CM(d)}};function ow(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GM(c){let d={};c=(c.g&&2<=Sr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(he(c[v]))continue;var m=R(c[v]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let k=d[P]||[];d[P]=k,k.push(m)}x(d,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function sw(c){this.Aa=0,this.i=[],this.j=new za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,c),this.cb=Xa("retryDelaySeedMs",1e4,c),this.Wa=Xa("forwardChannelMaxRetries",2,c),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new UI(c&&c.concurrentRequestLimit),this.Da=new $M,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=sw.prototype,n.la=8,n.G=1,n.connect=function(c,d,m,v){Yt(0),this.W=c,this.H=d||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=mw(this,null,this.W),pu(this)};function im(c){if(aw(c),c.G==3){var d=c.U++,m=Tr(c.I);if(Xe(m,"SID",c.K),Xe(m,"RID",d),Xe(m,"TYPE","terminate"),ec(c,m),d=new si(c,c.j,d),d.L=2,d.v=uu(Tr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=gw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),au(d)}pw(c)}function fu(c){c.g&&(sm(c),c.g.cancel(),c.g=null)}function aw(c){fu(c),c.u&&(a.clearTimeout(c.u),c.u=null),mu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function pu(c){if(!$I(c.h)&&!c.s){c.s=!0;var d=c.Ga;Va||_I(),La||(Va(),La=!0),Vp.add(d,c),c.B=0}}function WM(c,d){return HI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qa(I(c.Ga,c,d),fw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let P=new si(this,this.j,c),k=this.o;if(this.S&&(k?(k=w(k),A(k,this.S)):k=this.S),this.m!==null||this.O||(P.H=k,k=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=lw(this,P,d),m=Tr(this.I),Xe(m,"RID",c),Xe(m,"CVER",22),this.D&&Xe(m,"X-HTTP-Session-Id",this.D),ec(this,m),k&&(this.O?d="headers="+encodeURIComponent(String(ew(k)))+"&"+d:this.m&&rm(m,this.m,k)),nm(this.h,P),this.Ua&&Xe(m,"TYPE","init"),this.P?(Xe(m,"$req",d),Xe(m,"SID","null"),P.T=!0,Jp(P,m,null)):Jp(P,m,d),this.G=2}}else this.G==3&&(c?cw(this,c):this.i.length==0||$I(this.h)||cw(this))};function cw(c,d){var m;d?m=d.l:m=c.U++;let v=Tr(c.I);Xe(v,"SID",c.K),Xe(v,"RID",m),Xe(v,"AID",c.T),ec(c,v),c.m&&c.o&&rm(v,c.m,c.o),m=new si(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),d&&(c.i=d.D.concat(c.i)),d=lw(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),nm(c.h,m),Jp(m,v,d)}function ec(c,d){c.H&&ze(c.H,function(m,v){Xe(d,v,m)}),c.l&&GI({},function(m,v){Xe(d,v,m)})}function lw(c,d,m){m=Math.min(c.i.length,m);var v=c.l?I(c.l.Na,c.l,c):null;e:{var P=c.i;let k=-1;for(;;){let q=["count="+m];k==-1?0<m?(k=P[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let Ke=!0;for(let Nt=0;Nt<m;Nt++){let Ue=P[Nt].g,Ut=P[Nt].map;if(Ue-=k,0>Ue)k=Math.max(0,P[Nt].g-100),Ke=!1;else try{HM(Ut,q,"req"+Ue+"_")}catch{v&&v(Ut)}}if(Ke){v=q.join("&");break e}}}return c=c.i.splice(0,m),d.D=c,v}function uw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Va||_I(),La||(Va(),La=!0),Vp.add(d,c),c.v=0}}function om(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qa(I(c.Fa,c),fw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,dw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qa(I(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),fu(this),dw(this))};function sm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function dw(c){c.g=new si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Tr(c.qa);Xe(d,"RID","rpc"),Xe(d,"SID",c.K),Xe(d,"AID",c.T),Xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(d,"TO",c.ja),Xe(d,"TYPE","xmlhttp"),ec(c,d),c.m&&c.o&&rm(d,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=uu(Tr(d)),m.m=null,m.P=!0,LI(m,c)}n.Za=function(){this.C!=null&&(this.C=null,fu(this),om(this),Yt(19))};function mu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function hw(c,d){var m=null;if(c.g==d){mu(c),sm(c),c.g=null;var v=2}else if(tm(c.h,d))m=d.D,qI(c.h,d),v=1;else return;if(c.G!=0){if(d.o)if(v==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var P=c.B;v=iu(),Qt(v,new kI(v,m)),pu(c)}else uw(c);else if(P=d.s,P==3||P==0&&0<d.X||!(v==1&&WM(c,d)||v==2&&om(c)))switch(m&&0<m.length&&(d=c.h,d.i=d.i.concat(m)),P){case 1:eo(c,5);break;case 4:eo(c,10);break;case 3:eo(c,6);break;default:eo(c,2)}}}function fw(c,d){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*d}function eo(c,d){if(c.j.info("Error code "+d),d==2){var m=I(c.fb,c),v=c.Xa;let P=!v;v=new Xi(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cu(v,"https"),uu(v),P?BM(v.toString(),m):UM(v.toString(),m)}else Yt(2);c.G=0,c.l&&c.l.sa(d),pw(c),aw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function pw(c){if(c.G=0,c.ka=[],c.l){let d=zI(c.h);(d.length!=0||c.i.length!=0)&&(F(c.ka,d),F(c.ka,c.i),c.h.i.length=0,V(c.i),c.i.length=0),c.l.ra()}}function mw(c,d,m){var v=m instanceof Xi?Tr(m):new Xi(m);if(v.g!="")d&&(v.g=d+"."+v.g),lu(v,v.s);else{var P=a.location;v=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var k=new Xi(null);v&&cu(k,v),d&&(k.g=d),P&&lu(k,P),m&&(k.l=m),v=k}return m=c.D,d=c.ya,m&&d&&Xe(v,m,d),Xe(v,"VER",c.la),ec(c,v),v}function gw(c,d,m){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new st(new Ya({eb:m})):new st(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yw(){}n=yw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function gu(){}gu.prototype.g=function(c,d){return new _n(c,d)};function _n(c,d){Bt.call(this),this.g=new sw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!he(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!he(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Wo(this)}M(_n,Bt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){im(this.g)},_n.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=Gp(c),c=m);d.i.push(new RM(d.Ya++,c)),d.G==3&&pu(d)},_n.prototype.N=function(){this.g.l=null,delete this.j,im(this.g),delete this.g,_n.aa.N.call(this)};function vw(c){Kp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}M(vw,Kp);function _w(){Qp.call(this),this.status=1}M(_w,Qp);function Wo(c){this.g=c}M(Wo,yw),Wo.prototype.ua=function(){Qt(this.g,"a")},Wo.prototype.ta=function(c){Qt(this.g,new vw(c))},Wo.prototype.sa=function(c){Qt(this.g,new _w)},Wo.prototype.ra=function(){Qt(this.g,"b")},gu.prototype.createWebChannel=gu.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,H_=Yr.createWebChannelTransport=function(){return new gu},$_=Yr.getStatEventTarget=function(){return iu()},U_=Yr.Event=Zi,rf=Yr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ou.NO_ERROR=0,ou.TIMEOUT=8,ou.HTTP_ERROR=6,bl=Yr.ErrorCode=ou,OI.COMPLETE="complete",B_=Yr.EventType=OI,RI.EventType=$a,$a.OPEN="a",$a.CLOSE="b",$a.ERROR="c",$a.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Ws=Yr.WebChannel=RI,p3=Yr.FetchXmlHttpFactory=Ya,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,j_=Yr.XhrIo=st}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});var u1="@firebase/firestore",d1="4.7.11";var Rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");var ga="11.6.1";var Lo=new hr("@firebase/firestore");function Ks(){return Lo.logLevel}function Z(n,...e){if(Lo.logLevel<=Pe.DEBUG){let t=e.map(ME);Lo.debug(`Firestore (${ga}): ${n}`,...t)}}function ei(n,...e){if(Lo.logLevel<=Pe.ERROR){let t=e.map(ME);Lo.error(`Firestore (${ga}): ${n}`,...t)}}function ta(n,...e){if(Lo.logLevel<=Pe.WARN){let t=e.map(ME);Lo.warn(`Firestore (${ga}): ${n}`,...t)}}function ME(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tx(n,r,t)}function tx(n,e,t){let r=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ei(r),new Error(r)}function qe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||tx(e,i,r)}function fe(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},re=class extends Tn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var df=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},K_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rt.UNAUTHENTICATED))}shutdown(){}},Q_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Y_=class{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>C(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Rt(e)}},Z_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},J_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Z_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},X_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);let r=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function m3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function nx(){return new TextEncoder}var ff=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=m3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function e0(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Te(r,i);{let o=nx(),s=g3(o.encode(h1(n,t)),o.encode(h1(e,t)));return s!==0?s:Te(r,i)}}t+=r>65535?2:1}return Te(n.length,e.length)}function h1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function g3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var f1=-62135596800,p1=1e6,St=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*p1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<f1)throw new re(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p1}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-f1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var me=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new St(0,0))}static max(){return new n(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var m1="__name__",pf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Te(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}},ct=class n extends pf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new re(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,An=class n extends pf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m1}static keyField(){return new n([m1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new re(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new re(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var se=class n{constructor(e){this.path=e}static fromPath(e){return new n(ct.fromString(e))}static fromName(e){return new n(ct.fromString(e).popFirst(5))}static empty(){return new n(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ct(e.slice()))}};var Rl=-1,t0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};t0.UNKNOWN_ID=-1;function v3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new jo(i,se.empty(),e)}function _3(n){return new jo(n.readTime,n.key,Rl)}var jo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(me.min(),se.empty(),Rl)}static max(){return new n(me.max(),se.empty(),Rl)}};function E3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=se.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var I3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",n0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ya(n){return C(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==I3)throw n;Z("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function w3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}var PE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),NE=-1;function Gf(n){return n==null}function Ml(n){return n===0&&1/n==-1/0}function C3(n){return typeof n=="number"&&Number.isInteger(n)&&!Ml(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var rx="";function b3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g1(e)),e=T3(n.get(t),e);return g1(e)}function T3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case rx:t+="";break;default:t+=o}}return t}function g1(n){return n+rx+""}var S3="remoteDocuments",ix="owner";var ox="mutationQueues";var sx="mutations";var ax="documentMutations",D3="remoteDocumentsV14";var cx="remoteDocumentGlobal";var lx="targets";var ux="targetDocuments";var dx="targetGlobal",hx="collectionParents";var fx="clientMetadata";var px="bundles";var mx="namedQueries";var A3="indexConfiguration";var x3="indexState";var R3="indexEntries";var gx="documentOverlays";var M3="globals";var P3=[ox,sx,ax,S3,lx,ix,dx,ux,fx,cx,hx,px,mx],qee=[...P3,gx],N3=[ox,sx,ax,D3,lx,ix,dx,ux,fx,cx,hx,px,mx,gx],k3=N3,O3=[...k3,A3,x3,R3];var zee=[...O3,M3];function y1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var lt=class n{constructor(e,t){this.comparator=e,this.root=t||gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}},Js=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}};gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mt=class n{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mf(this.data.getIterator())}getIteratorFrom(e){return new mf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},mf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bn=class n{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new n([])}unionWith(e){let t=new Mt(An.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var gf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var F3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(qe(!!n,39018),typeof n=="string"){let e=0,t=F3.exec(n);if(qe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(n.seconds),nanos:rt(n.nanos)}}function rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ni(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}var vx="server_timestamp",_x="__type__",Ex="__previous_value__",Ix="__local_write_time__";function kE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_x])===null||t===void 0?void 0:t.stringValue)===vx}function Wf(n){let e=n.mapValue.fields[Ex];return kE(e)?Wf(e):e}function Pl(n){let e=ti(n.mapValue.fields[Ix].timestampValue);return new St(e.seconds,e.nanos)}var r0=class{constructor(e,t,r,i,o,s,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}},yf="(default)",vf=class n{constructor(e,t){this.projectId=e,this.database=t||yf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var OE="__type__",wx="__max__",of={mapValue:{fields:{__type__:{stringValue:wx}}}},FE="__vector__",ra="value";function Bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kE(n)?4:bx(n)?9007199254740991:Cx(n)?10:11:oe(28295,{value:n})}function _r(n,e){if(n===e)return!0;let t=Bi(n);if(t!==Bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pl(n).isEqual(Pl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ti(i.timestampValue),a=ti(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ni(i.bytesValue).isEqual(ni(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return rt(i.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rt(i.integerValue)===rt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=rt(i.doubleValue),a=rt(o.doubleValue);return s===a?Ml(s)===Ml(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return na(n.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(y1(s)!==y1(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!_r(s[l],a[l])))return!1;return!0}(n,e);default:return oe(52216,{left:n})}}function Nl(n,e){return(n.values||[]).find(t=>_r(t,e))!==void 0}function ia(n,e){if(n===e)return 0;let t=Bi(n),r=Bi(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=rt(o.integerValue||o.doubleValue),l=rt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return v1(n.timestampValue,e.timestampValue);case 4:return v1(Pl(n),Pl(e));case 5:return e0(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ni(o),l=ni(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=Te(a[u],l[u]);if(h!==0)return h}return Te(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Te(rt(o.latitude),rt(s.latitude));return a!==0?a:Te(rt(o.longitude),rt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _1(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,h;let y=o.fields||{},I=s.fields||{},E=(a=y[ra])===null||a===void 0?void 0:a.arrayValue,M=(l=I[ra])===null||l===void 0?void 0:l.arrayValue,V=Te(((u=E?.values)===null||u===void 0?void 0:u.length)||0,((h=M?.values)===null||h===void 0?void 0:h.length)||0);return V!==0?V:_1(E,M)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===of.mapValue&&s===of.mapValue)return 0;if(o===of.mapValue)return 1;if(s===of.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let y=0;y<l.length&&y<h.length;++y){let I=e0(l[y],h[y]);if(I!==0)return I;let E=ia(a[l[y]],u[h[y]]);if(E!==0)return E}return Te(l.length,h.length)}(n.mapValue,e.mapValue);default:throw oe(23264,{Pe:t})}}function v1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=ti(n),r=ti(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function _1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ia(t[i],r[i]);if(o)return o}return Te(t.length,r.length)}function oa(n){return i0(n)}function i0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ti(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ni(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=i0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${i0(t.fields[s])}`;return i+"}"}(n.mapValue):oe(61005,{value:n})}function cf(n){switch(Bi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Wf(n);return e?16+cf(e):16;case 5:return 2*n.stringValue.length;case 6:return ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+cf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return qi(r.fields,(o,s)=>{i+=o.length+cf(s)}),i}(n.mapValue);default:throw oe(13486,{value:n})}}function o0(n){return!!n&&"integerValue"in n}function VE(n){return!!n&&"arrayValue"in n}function E1(n){return!!n&&"nullValue"in n}function I1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lf(n){return!!n&&"mapValue"in n}function Cx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OE])===null||t===void 0?void 0:t.stringValue)===FE}function Sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wx}var Wee={mapValue:{fields:{[OE]:{stringValue:FE},[ra]:{arrayValue:{}}}}};var Dn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=An.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Sl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Sl(this.value))}};function Tx(n){let e=[];return qi(n.fields,(t,r)=>{let i=new An([t]);if(lf(r)){let o=Tx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bn(e)}var Xn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,me.min(),me.min(),me.min(),Dn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,me.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,me.min(),me.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,me.min(),me.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sa=class{constructor(e,t){this.position=e,this.inclusive=t}};function w1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=se.comparator(se.fromName(s.referenceValue),t.key):r=ia(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function C1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_r(n.position[t],e.position[t]))return!1;return!0}var aa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function V3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var _f=class{},Tt=class n extends _f{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new a0(e,t,r):t==="array-contains"?new u0(e,r):t==="in"?new d0(e,r):t==="not-in"?new h0(e,r):t==="array-contains-any"?new f0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new c0(e,r):new l0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&Bi(this.value)===Bi(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Er=class n extends _f{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return Sx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function Sx(n){return n.op==="and"}function Dx(n){return L3(n)&&Sx(n)}function L3(n){for(let e of n.filters)if(e instanceof Er)return!1;return!0}function s0(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+oa(n.value);if(Dx(n))return n.filters.map(e=>s0(e)).join(",");{let e=n.filters.map(t=>s0(t)).join(",");return`${n.op}(${e})`}}function Ax(n,e){return n instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(n,e):n instanceof Er?function(r,i){return i instanceof Er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Ax(s,i.filters[a]),!0):!1}(n,e):void oe(19439)}function xx(n){return n instanceof Tt?function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`}(n):n instanceof Er?function(t){return t.op.toString()+" {"+t.getFilters().map(xx).join(" ,")+"}"}(n):"Filter"}var a0=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=se.fromName(r.referenceValue)}matches(e){let t=se.comparator(e.key,this.key);return this.matchesComparison(t)}},c0=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=Rx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},l0=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=Rx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Rx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>se.fromName(r.referenceValue))}var u0=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return VE(t)&&Nl(t.arrayValue,this.value)}},d0=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Nl(this.value.arrayValue,t)}},h0=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nl(this.value.arrayValue,t)}},f0=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!VE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}};var p0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function b1(n,e=null,t=[],r=[],i=null,o=null,s=null){return new p0(n,e,t,r,i,o,s)}function LE(n){let e=fe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>s0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oa(r)).join(",")),e.Ie=t}return e.Ie}function jE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ax(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!C1(n.startAt,e.startAt)&&C1(n.endAt,e.endAt)}function m0(n){return se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ca=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function j3(n,e,t,r,i,o,s,a){return new ca(n,e,t,r,i,o,s,a)}function BE(n){return new ca(n)}function T1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B3(n){return n.collectionGroup!==null}function Dl(n){let e=fe(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Mt(An.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new aa(o,r))}),t.has(An.keyField().canonicalString())||e.Ee.push(new aa(An.keyField(),r))}return e.Ee}function yr(n){let e=fe(n);return e.de||(e.de=U3(e,Dl(n))),e.de}function U3(n,e){if(n.limitType==="F")return b1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new aa(i.field,o)});let t=n.endAt?new sa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sa(n.startAt.position,n.startAt.inclusive):null;return b1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function g0(n,e,t){return new ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return jE(yr(n),yr(e))&&n.limitType===e.limitType}function Mx(n){return`${LE(yr(n))}|lt:${n.limitType}`}function Qs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xx(i)).join(", ")}]`),Gf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>oa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>oa(i)).join(",")),`Target(${r})`}(yr(n))}; limitType=${n.limitType})`}function Qf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Dl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=w1(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Dl(r),i)||r.endAt&&!function(s,a,l){let u=w1(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Dl(r),i))}(n,e)}function $3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Px(n){return(e,t)=>{let r=!1;for(let i of Dl(n)){let o=H3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function H3(n,e,t){let r=n.field.isKeyField()?se.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?ia(l,u):oe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:n.dir})}}var ri=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yx(this.inner)}size(){return this.innerSize}};var q3=new lt(se.comparator);function ii(){return q3}var Nx=new lt(se.comparator);function Tl(...n){let e=Nx;for(let t of n)e=e.insert(t.key,t);return e}function kx(n){let e=Nx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oo(){return Al()}function Ox(){return Al()}function Al(){return new ri(n=>n.toString(),(n,e)=>n.isEqual(e))}var z3=new lt(se.comparator),G3=new Mt(se.comparator);function Fe(...n){let e=G3;for(let t of n)e=e.add(t);return e}var W3=new Mt(Te);function K3(){return W3}function UE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function Fx(n){return{integerValue:""+n}}function Q3(n,e){return C3(e)?Fx(e):UE(n,e)}var la=class{constructor(){this._=void 0}};function Y3(n,e,t){return n instanceof ua?function(i,o){let s={fields:{[_x]:{stringValue:vx},[Ix]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kE(o)&&(o=Wf(o)),o&&(s.fields[Ex]=o),{mapValue:s}}(t,e):n instanceof Bo?Lx(n,e):n instanceof Uo?jx(n,e):function(i,o){let s=Vx(i,o),a=S1(s)+S1(i.Re);return o0(s)&&o0(i.Re)?Fx(a):UE(i.serializer,a)}(n,e)}function Z3(n,e,t){return n instanceof Bo?Lx(n,e):n instanceof Uo?jx(n,e):t}function Vx(n,e){return n instanceof da?function(r){return o0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ua=class extends la{},Bo=class extends la{constructor(e){super(),this.elements=e}};function Lx(n,e){let t=Bx(e);for(let r of n.elements)t.some(i=>_r(i,r))||t.push(r);return{arrayValue:{values:t}}}var Uo=class extends la{constructor(e){super(),this.elements=e}};function jx(n,e){let t=Bx(e);for(let r of n.elements)t=t.filter(i=>!_r(i,r));return{arrayValue:{values:t}}}var da=class extends la{constructor(e,t){super(),this.serializer=e,this.Re=t}};function S1(n){return rt(n.integerValue||n.doubleValue)}function Bx(n){return VE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function J3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof Uo&&i instanceof Uo?na(r.elements,i.elements,_r):r instanceof da&&i instanceof da?_r(r.Re,i.Re):r instanceof ua&&i instanceof ua}(n.transform,e.transform)}var y0=class{constructor(e,t){this.version=e,this.transformResults=t}},Jr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ha=class{};function Ux(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kl(n.key,Jr.none()):new $o(n.key,n.data,Jr.none());{let t=n.data,r=Dn.empty(),i=new Mt(An.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ir(n.key,r,new Bn(i.toArray()),Jr.none())}}function X3(n,e,t){n instanceof $o?function(i,o,s){let a=i.value.clone(),l=A1(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ir?function(i,o,s){if(!uf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=A1(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll($x(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function xl(n,e,t,r){return n instanceof $o?function(o,s,a,l){if(!uf(o.precondition,s))return a;let u=o.value.clone(),h=x1(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ir?function(o,s,a,l){if(!uf(o.precondition,s))return a;let u=x1(o.fieldTransforms,l,s),h=s.data;return h.setAll($x(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,s,a){return uf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function eH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Vx(r.transform,i||null);o!=null&&(t===null&&(t=Dn.empty()),t.set(r.field,o))}return t||null}function D1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(o,s)=>J3(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $o=class extends ha{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ir=class extends ha{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function $x(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function A1(n,e,t){let r=new Map;qe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Z3(s,a,t[i]))}return r}function x1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Y3(o,s,e))}return r}var kl=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},v0=class extends ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&X3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=xl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=xl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ox();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=Ux(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,r)=>D1(t,r))&&na(this.baseMutations,e.baseMutations,(t,r)=>D1(t,r))}},E0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return z3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var I0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var w0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var vt,Be;function tH(n){switch(n){case j.OK:return oe(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function Hx(n){if(n===void 0)return ei("GRPC error has no .code"),j.UNKNOWN;switch(n){case vt.OK:return j.OK;case vt.CANCELLED:return j.CANCELLED;case vt.UNKNOWN:return j.UNKNOWN;case vt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case vt.INTERNAL:return j.INTERNAL;case vt.UNAVAILABLE:return j.UNAVAILABLE;case vt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case vt.NOT_FOUND:return j.NOT_FOUND;case vt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case vt.ABORTED:return j.ABORTED;case vt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case vt.DATA_LOSS:return j.DATA_LOSS;default:return oe(39323,{code:n})}}(Be=vt||(vt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";var R1=null;var nH=new Qr([4294967295,4294967295],0);function M1(n){let e=nx().encode(n),t=new L_;return t.update(e),new Uint8Array(t.digest())}function P1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qr([t,r],0),new Qr([i,o],0)]}var C0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fo(`Invalid padding: ${t}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Qr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Qr.fromNumber(r)));return i.compare(nH)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=M1(e),[r,i]=P1(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=M1(e),[r,i]=P1(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ef=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(me.min(),i,new lt(Te),ii(),Fe())}},Ol=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Fe(),Fe(),Fe())}};var Xs=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},If=class{constructor(e,t){this.targetId=e,this.Ce=t}},wf=class{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Cf=class{constructor(){this.Fe=0,this.Me=N1(),this.xe=Gt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Fe(),t=Fe(),r=Fe();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe(38017,{changeType:o})}}),new Ol(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=N1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},b0=class{constructor(e){this.ze=e,this.je=new Map,this.He=ii(),this.Je=sf(),this.Ye=sf(),this.Ze=new lt(Te)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(m0(o))if(r===0){let s=new se(o.path);this.tt(t,s,Xn.newNoDocument(s,me.min()))}else qe(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),l=a?this.lt(a,e,s):1;if(l!==0){this.st(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}R1?.ht(function(h,y,I,E,M){var V,F,Q,he,ve,Je;let Kt={localCacheCount:h,existenceFilterCount:y.count,databaseId:I.database,projectId:I.projectId},ze=y.unchangedNames;return ze&&(Kt.bloomFilter={applied:M===0,hashCount:(V=ze?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(he=(Q=(F=ze?.bits)===null||F===void 0?void 0:F.bitmap)===null||Q===void 0?void 0:Q.length)!==null&&he!==void 0?he:0,padding:(Je=(ve=ze?.bits)===null||ve===void 0?void 0:ve.padding)!==null&&Je!==void 0?Je:0,mightContain:x=>{var w;return(w=E?.mightContain(x))!==null&&w!==void 0&&w}}),Kt}(s,e.Ce,this.ze.Pt(),a,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ni(r).toUint8Array()}catch(l){if(l instanceof gf)return ta("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new C0(s,i,o)}catch(l){return ta(l instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&m0(a.target)){let l=new se(a.target.path);this.Et(l).has(s)||this.dt(s,l)||this.tt(s,l,Xn.newNoDocument(l,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=Fe();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Ef(e,t,this.Ze,this.He,r);return this.He=ii(),this.Je=sf(),this.Ye=sf(),this.Ze=new lt(Te),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Cf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mt(Te),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mt(Te),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Cf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function sf(){return new lt(se.comparator)}function N1(){return new lt(se.comparator)}var rH={asc:"ASCENDING",desc:"DESCENDING"},iH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oH={and:"AND",or:"OR"},T0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function S0(n,e){return n.useProto3Json||Gf(e)?e:{value:e}}function bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sH(n,e){return bf(n,e.toTimestamp())}function vr(n){return qe(!!n,49232),me.fromTimestamp(function(t){let r=ti(t);return new St(r.seconds,r.nanos)}(n))}function $E(n,e){return D0(n,e).canonicalString()}function D0(n,e){let t=function(i){return new ct(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zx(n){let e=ct.fromString(n);return qe(Yx(e),10190,{key:e.toString()}),e}function A0(n,e){return $E(n.databaseId,e.path)}function q_(n,e){let t=zx(e);if(t.get(1)!==n.databaseId.projectId)throw new re(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new se(Wx(t))}function Gx(n,e){return $E(n.databaseId,e)}function aH(n){let e=zx(n);return e.length===4?ct.emptyPath():Wx(e)}function x0(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wx(n){return qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function k1(n,e,t){return{name:A0(n,e),fields:t.value.mapValue.fields}}function cH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:oe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Gt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?j.UNKNOWN:Hx(u.code);return new re(h,u.message||"")}(s);t=new wf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=q_(n,r.document.name),o=vr(r.document.updateTime),s=r.document.createTime?vr(r.document.createTime):me.min(),a=new Dn({mapValue:{fields:r.document.fields}}),l=Xn.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Xs(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=q_(n,r.document),o=r.readTime?vr(r.readTime):me.min(),s=Xn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Xs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=q_(n,r.document),o=r.removedTargetIds||[];t=new Xs([],o,i,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new w0(i,o),a=r.targetId;t=new If(a,s)}}return t}function lH(n,e){let t;if(e instanceof $o)t={update:k1(n,e.key,e.value)};else if(e instanceof kl)t={delete:A0(n,e.key)};else if(e instanceof Ir)t={update:k1(n,e.key,e.data),updateMask:vH(e.fieldMask)};else{if(!(e instanceof v0))return oe(16599,{ft:e.type});t={verify:A0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ua)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof da)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw oe(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:sH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe(27497)}(n,e.precondition)),t}function uH(n,e){return n&&n.length>0?(qe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?vr(i.updateTime):vr(o);return s.isEqual(me.min())&&(s=vr(o)),new y0(s,i.transformResults||[])}(t,e))):[]}function dH(n,e){return{documents:[Gx(n,e.path)]}}function hH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Gx(n,i);let o=function(u){if(u.length!==0)return Qx(Er.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(I){return{field:Ys(I.field),direction:mH(I.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=S0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function fH(n){let e=aH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){qe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(y){let I=Kx(y);return I instanceof Er&&Dx(I)?I.getFilters():[I]}(t.where));let s=[];t.orderBy&&(s=function(y){return y.map(I=>function(M){return new aa(Zs(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(t.orderBy));let a=null;t.limit&&(a=function(y){let I;return I=typeof y=="object"?y.value:y,Gf(I)?null:I}(t.limit));let l=null;t.startAt&&(l=function(y){let I=!!y.before,E=y.values||[];return new sa(E,I)}(t.startAt));let u=null;return t.endAt&&(u=function(y){let I=!y.before,E=y.values||[];return new sa(E,I)}(t.endAt)),j3(e,i,s,o,a,"F",l,u)}function pH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zs(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zs(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zs(t.unaryFilter.field);return Tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zs(t.unaryFilter.field);return Tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Tt.create(Zs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Er.create(t.compositeFilter.filters.map(r=>Kx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(t.compositeFilter.op))}(n):oe(30097,{filter:n})}function mH(n){return rH[n]}function gH(n){return iH[n]}function yH(n){return oH[n]}function Ys(n){return{fieldPath:n.canonicalString()}}function Zs(n){return An.fromServerFormat(n.fieldPath)}function Qx(n){return n instanceof Tt?function(t){if(t.op==="=="){if(I1(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NAN"}};if(E1(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(I1(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NAN"}};if(E1(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(t.field),op:gH(t.op),value:t.value}}}(n):n instanceof Er?function(t){let r=t.getFilters().map(i=>Qx(i));return r.length===1?r[0]:{compositeFilter:{op:yH(t.op),filters:r}}}(n):oe(54877,{filter:n})}function vH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fl=class n{constructor(e,t,r,i,o=me.min(),s=me.min(),a=Gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var R0=class{constructor(e){this.wt=e}};function _H(n){let e=fH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?g0(e,e.limit,"L"):e}var Tf=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rt(e.integerValue));else if("doubleValue"in e){let r=rt(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Ml(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=ti(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ni(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?bx(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Cx(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):oe(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=ra,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(rt(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),se.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Tf.Wt=new Tf;var M0=class{constructor(){this.yn=new P0}addToCollectionParentIndex(e,t){return this.yn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(jo.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},P0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mt(ct.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ct.comparator)).toArray()}};var Kee=new Uint8Array(0);var O1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zx=41943040,jn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(Zx,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);var Vl=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var F1="LruGarbageCollector",EH=1048576;function V1([n,e],[t,r]){let i=Te(n,t);return i===0?Te(e,r):i}var N0=class{constructor(e){this.cr=e,this.buffer=new Mt(V1),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();V1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},k0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Z(F1,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?Z(F1,"Ignoring IndexedDB error during garbage collection: ",t):yield ya(t)}yield this.Ir(3e5)}))}},O0=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(PE.le);let r=new N0(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(O1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O1):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,s=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,a=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(u=Date.now(),Ks()<=Pe.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${y} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function IH(n,e){return new O0(n,e)}var F0=class{constructor(){this.changes=new ri(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var V0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var L0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xl(r.mutation,i,Bn.empty(),St.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){let i=Oo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Tl();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Oo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ii(),s=Al(),a=function(){return Al()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ir)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),xl(h.mutation,u,h.mutation.getFieldMask(),St.now())):s.set(u.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var y;return a.set(u,new V0(h,(y=s.get(u))!==null&&y!==void 0?y:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Al(),i=new lt((s,a)=>s-a),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||Bn.empty();h=a.applyToLocalView(u,h),r.set(l,h);let y=(i.get(a.batchId)||Fe()).add(l);i=i.insert(a.batchId,y)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,y=Ox();h.forEach(I=>{if(!o.has(I)){let E=Ux(t.get(I),r.get(I));E!==null&&y.set(I,E),o=o.add(I)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,y))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(Oo()),a=Rl,l=o;return s.next(u=>L.forEach(u,(h,y)=>(a<y.largestBatchId&&(a=y.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{l=l.insert(h,I)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Fe())).next(h=>({batchId:a,changes:kx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(r=>{let i=Tl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Tl();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,l=>{let u=function(y,I){return new ca(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((y,I)=>{s=s.insert(y,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Xn.newInvalidDocument(h)))});let a=Tl();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&xl(h.mutation,u,Bn.empty(),St.now()),Qf(t,u)&&(a=a.insert(l,u))}),a})}};var j0=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return L.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:vr(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:_H(i.bundledQuery),readTime:vr(i.readTime)}}(t)),L.resolve()}};var B0=class{constructor(){this.overlays=new lt(se.comparator),this.Or=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Oo();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=Oo(),o=t.length+1,s=new se(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new lt((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Oo(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Oo(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new I0(t,r));let o=this.Or.get(t);o===void 0&&(o=Fe(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}};var U0=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Ll=class{constructor(){this.Nr=new Mt(_t.Br),this.Lr=new Mt(_t.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new _t(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new _t(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new se(new ct([])),r=new _t(t,e),i=new _t(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new se(new ct([])),r=new _t(t,e),i=new _t(t,e+1),o=Fe();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new _t(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return se.comparator(e.key,t.key)||Te(e.Gr,t.Gr)}static kr(e,t){return Te(e.Gr,t.Gr)||se.comparator(e.key,t.key)}};var $0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Mt(_t.Br)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _0(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.zr=this.zr.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?NE:this.Jn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new _t(t,0),i=new _t(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let a=this.jr(s.Gr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(Te);return t.forEach(i=>{let o=new _t(i,0),s=new _t(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),L.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;se.isDocumentKey(o)||(o=o.child(""));let s=new _t(new se(o),0),a=new Mt(Te);return this.zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Gr)),!0)},s),L.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){qe(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return L.forEach(t.mutations,i=>{let o=new _t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new _t(t,0),i=this.zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var H0=class{constructor(e){this.Zr=e,this.docs=function(){return new lt(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=ii();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ii(),s=t.path,a=new se(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||E3(_3(h),r)<=0||(i.has(h.key)||Qf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){oe(9500)}Xr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new q0(this)}getSize(e){return L.resolve(this.size)}},q0=class extends F0{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var z0=class{constructor(e){this.persistence=e,this.ei=new ri(t=>LE(t),jE),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.ti=0,this.ni=new Ll,this.targetCount=0,this.ri=Vl.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),L.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new Vl(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.ar(t),L.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.ni.containsKey(t))}};var Sf=class{constructor(e,t){this.ii={},this.overlays={},this.si=new PE(0),this.oi=!1,this.oi=!0,this._i=new U0,this.referenceDelegate=e(this),this.ai=new z0(this),this.indexManager=new M0,this.remoteDocumentCache=function(i){return new H0(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new R0(t),this.ci=new j0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new $0(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);let i=new G0(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return L.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},G0=class extends n0{constructor(e){super(),this.currentSequenceNumber=e}},W0=class n{constructor(e){this.persistence=e,this.Ti=new Ll,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw oe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{let i=se.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,me.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return L.or([()=>L.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},Df=class n{constructor(e,t){this.persistence=e,this.Ri=new ri(r=>b3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=IH(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return L.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,me.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),L.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cf(e.data.value)),t}gr(e,t,r){return L.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var K0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=Fe(),i=Fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Q0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Y0=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return AD()?8:w3(At())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Q0;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Ks()<=Pe.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Qs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),L.resolve()):(Ks()<=Pe.DEBUG&&Z("QueryEngine","Query:",Qs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ks()<=Pe.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Qs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(t))):L.resolve())}Rs(e,t){if(T1(t))return L.resolve(null);let r=yr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=g0(t,null,"F"),r=yr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Fe(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.ps(t,a);return this.ys(t,u,s,l.readTime)?this.Rs(e,g0(t,null,"F")):this.ws(e,u,t,l)}))})))}Vs(e,t,r,i){return T1(t)||i.isEqual(me.min())?L.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(t,o);return this.ys(t,s,r,i)?L.resolve(null):(Ks()<=Pe.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(t)),this.ws(e,s,t,v3(i,Rl)).next(a=>a))})}ps(e,t){let r=new Mt(Px(e));return t.forEach((i,o)=>{Qf(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Ks()<=Pe.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Qs(t)),this.As.getDocumentsMatchingQuery(e,t,jo.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var HE="LocalStore",wH=3e8,Z0=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new lt(Te),this.Ds=new ri(o=>LE(o),jE),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new L0(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function CH(n,e,t,r){return new Z0(n,e,t,r)}function Jx(n,e){return C(this,null,function*(){let t=fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Fe();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ms:u,removedBatchIds:s,addedBatchIds:a}))})})})}function bH(n,e){let t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let y=u.batch,I=y.keys(),E=L.resolve();return I.forEach(M=>{E=E.next(()=>h.getEntry(l,M)).next(V=>{let F=u.docVersions.get(M);qe(F!==null,48541),V.version.compareTo(F)<0&&(y.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),h.addEntry(V)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Xx(n){let e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function TH(n,e){let t=fe(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((h,y)=>{let I=i.get(y);if(!I)return;a.push(t.ai.removeMatchingKeys(o,h.removedDocuments,y).next(()=>t.ai.addMatchingKeys(o,h.addedDocuments,y)));let E=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Gt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(y,E),function(V,F,Q){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=wH?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(I,E,h)&&a.push(t.ai.updateTargetData(o,E))});let l=ii(),u=Fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(SH(o,s,e.documentUpdates).next(h=>{l=h.xs,u=h.Os})),!r.isEqual(me.min())){let h=t.ai.getLastRemoteSnapshotVersion(o).next(y=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Ss=i,o))}function SH(n,e,t){let r=Fe(),i=Fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ii();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Z(HE,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{xs:s,Os:i}})}function DH(n,e){let t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=NE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AH(n,e){let t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new Fl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function J0(n,e,t){return C(this,null,function*(){let r=fe(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!va(s))throw s;Z(HE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function L1(n,e,t){let r=fe(n),i=me.min(),o=Fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){let y=fe(l),I=y.Ds.get(h);return I!==void 0?L.resolve(y.Ss.get(I)):y.ai.getTargetData(u,h)}(r,s,yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:me.min(),t?o:Fe())).next(a=>(xH(r,$3(e),a),{documents:a,Ns:o})))}function xH(n,e,t){let r=n.vs.get(e)||me.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}var Af=class{constructor(){this.activeTargetIds=K3()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var X0=class{constructor(){this.So=new Af,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Af,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var eE=class{vo(e){}shutdown(){}};var j1="ConnectivityMonitor",xf=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Z(j1,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){Z(j1,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var af=null;function tE(){return af===null?af=function(){return 268435456+Math.round(2147483648*Math.random())}():af++,"0x"+af.toString(16)}var z_="RestConnection",RH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nE=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===yf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){let s=tE(),a=this.$o(e,t.toUriEncodedString());Z(z_,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,i,o),this.Ko(e,a,l,r).then(u=>(Z(z_,`Received RPC '${e}' ${s}: `,u),u),u=>{throw ta(z_,`RPC '${e}' ${s} failed with error: `,u,"url: ",a,"request:",r),u})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){let r=RH[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var rE=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var zt="WebChannelConnection",iE=class extends nE{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){let o=tE();return new Promise((s,a)=>{let l=new j_;l.setWithCredentials(!0),l.listenOnce(B_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bl.NO_ERROR:let h=l.getResponseJson();Z(zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case bl.TIMEOUT:Z(zt,`RPC '${e}' ${o} timed out`),a(new re(j.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:let y=l.getStatus();if(Z(zt,`RPC '${e}' ${o} failed with status:`,y,"response text:",l.getResponseText()),y>0){let I=l.getResponseJson();Array.isArray(I)&&(I=I[0]);let E=I?.error;if(E&&E.status&&E.message){let M=function(F){let Q=F.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(Q)>=0?Q:j.UNKNOWN}(E.status);a(new re(M,E.message))}else a(new re(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new re(j.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{s_:e,streamId:o,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{Z(zt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);Z(zt,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",u,r,15)})}a_(e,t,r){let i=tE(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=H_(),a=$_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=o.join("");Z(zt,`Creating RPC '${e}' stream ${i}: ${h}`,l);let y=s.createWebChannel(h,l),I=!1,E=!1,M=new rE({Go:F=>{E?Z(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(I||(Z(zt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),I=!0),Z(zt,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},zo:()=>y.close()}),V=(F,Q,he)=>{F.listen(Q,ve=>{try{he(ve)}catch(Je){setTimeout(()=>{throw Je},0)}})};return V(y,Ws.EventType.OPEN,()=>{E||(Z(zt,`RPC '${e}' stream ${i} transport opened.`),M.t_())}),V(y,Ws.EventType.CLOSE,()=>{E||(E=!0,Z(zt,`RPC '${e}' stream ${i} transport closed`),M.r_())}),V(y,Ws.EventType.ERROR,F=>{E||(E=!0,ta(zt,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),M.r_(new re(j.UNAVAILABLE,"The operation could not be completed")))}),V(y,Ws.EventType.MESSAGE,F=>{var Q;if(!E){let he=F.data[0];qe(!!he,16349);let ve=he,Je=ve?.error||((Q=ve[0])===null||Q===void 0?void 0:Q.error);if(Je){Z(zt,`RPC '${e}' stream ${i} received error:`,Je);let Kt=Je.status,ze=function(S){let A=vt[S];if(A!==void 0)return Hx(A)}(Kt),x=Je.message;ze===void 0&&(ze=j.INTERNAL,x="Unknown error status: "+Kt+" with message "+Je.message),E=!0,M.r_(new re(ze,x)),y.close()}else Z(zt,`RPC '${e}' stream ${i} received:`,he),M.i_(he)}}),V(a,U_.STAT_EVENT,F=>{F.stat===rf.PROXY?Z(zt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===rf.NOPROXY&&Z(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.n_()},0),M}};function G_(){return typeof document<"u"?document:null}function Yf(n){return new T0(n,!0)}var Rf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var B1="PersistentStream",Mf=class{constructor(e,t,r,i,o,s,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Rf(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return C(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return C(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return C(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new re(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>C(this,null,function*(){this.state=0,this.start()}))}L_(e){return Z(B1,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Z(B1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},oE=class extends Mf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=cH(this.serializer,e),r=function(o){if(!("targetChange"in o))return me.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?me.min():s.readTime?vr(s.readTime):me.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=x0(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=m0(l)?{documents:dH(o,l)}:{query:hH(o,l).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=qx(o,s.resumeToken);let u=S0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(me.min())>0){a.readTime=bf(o,s.snapshotVersion.toTimestamp());let u=S0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=pH(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=x0(this.serializer),t.removeTarget=e,this.F_(t)}},sE=class extends Mf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=uH(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=x0(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lH(this.serializer,r))};this.F_(t)}};var aE=class{},cE=class extends aE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new re(j.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,D0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(j.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,D0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(j.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},lE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ei(t),this.ea=!1):Z("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var Ho="RemoteStore",uE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>C(this,null,function*(){qo(this)&&(Z(Ho,"Restarting streams for network reachability change."),yield function(l){return C(this,null,function*(){let u=fe(l);u.aa.add(4),yield Hl(u),u.la.set("Unknown"),u.aa.delete(4),yield Zf(u)})}(this))}))}),this.la=new lE(r,i)}};function Zf(n){return C(this,null,function*(){if(qo(n))for(let e of n.ua)yield e(!0)})}function Hl(n){return C(this,null,function*(){for(let e of n.ua)yield e(!1)})}function eR(n,e){let t=fe(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),WE(t)?GE(t):_a(t).b_()&&zE(t,e))}function qE(n,e){let t=fe(n),r=_a(t);t._a.delete(e),r.b_()&&tR(t,e),t._a.size===0&&(r.b_()?r.v_():qo(t)&&t.la.set("Unknown"))}function zE(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).U_(e)}function tR(n,e){n.ha.Ke(e),_a(n).K_(e)}function GE(n){n.ha=new b0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.la.ta()}function WE(n){return qo(n)&&!_a(n).w_()&&n._a.size>0}function qo(n){return fe(n).aa.size===0}function nR(n){n.ha=void 0}function MH(n){return C(this,null,function*(){n.la.set("Online")})}function PH(n){return C(this,null,function*(){n._a.forEach((e,t)=>{zE(n,e)})})}function NH(n,e){return C(this,null,function*(){nR(n),WE(n)?(n.la.ia(e),GE(n)):n.la.set("Unknown")})}function kH(n,e,t){return C(this,null,function*(){if(n.la.set("Online"),e instanceof wf&&e.state===2&&e.cause)try{yield function(i,o){return C(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){Z(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pf(n,r)}else if(e instanceof Xs?n.ha.Xe(e):e instanceof If?n.ha.ot(e):n.ha.nt(e),!t.isEqual(me.min()))try{let r=yield Xx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ha.It(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o._a.get(u);h&&o._a.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o._a.get(l);if(!h)return;o._a.set(l,h.withResumeToken(Gt.EMPTY_BYTE_STRING,h.snapshotVersion)),tR(o,l);let y=new Fl(h.target,l,u,h.sequenceNumber);zE(o,y)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Z(Ho,"Failed to raise snapshot:",r),yield Pf(n,r)}})}function Pf(n,e,t){return C(this,null,function*(){if(!va(e))throw e;n.aa.add(1),yield Hl(n),n.la.set("Offline"),t||(t=()=>Xx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){Z(Ho,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield Zf(n)}))})}function rR(n,e){return e().catch(t=>Pf(n,t,e))}function Jf(n){return C(this,null,function*(){let e=fe(n),t=Ui(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:NE;for(;OH(e);)try{let i=yield DH(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,FH(e,i)}catch(i){yield Pf(e,i)}iR(e)&&oR(e)})}function OH(n){return qo(n)&&n.oa.length<10}function FH(n,e){n.oa.push(e);let t=Ui(n);t.b_()&&t.W_&&t.G_(e.mutations)}function iR(n){return qo(n)&&!Ui(n).w_()&&n.oa.length>0}function oR(n){Ui(n).start()}function VH(n){return C(this,null,function*(){Ui(n).H_()})}function LH(n){return C(this,null,function*(){let e=Ui(n);for(let t of n.oa)e.G_(t.mutations)})}function jH(n,e,t){return C(this,null,function*(){let r=n.oa.shift(),i=E0.from(r,e,t);yield rR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Jf(n)})}function BH(n,e){return C(this,null,function*(){e&&Ui(n).W_&&(yield function(r,i){return C(this,null,function*(){if(function(s){return tH(s)&&s!==j.ABORTED}(i.code)){let o=r.oa.shift();Ui(r).D_(),yield rR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Jf(r)}})}(n,e)),iR(n)&&oR(n)})}function U1(n,e){return C(this,null,function*(){let t=fe(n);t.asyncQueue.verifyOperationInProgress(),Z(Ho,"RemoteStore received new credentials");let r=qo(t);t.aa.add(3),yield Hl(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield Zf(t)})}function UH(n,e){return C(this,null,function*(){let t=fe(n);e?(t.aa.delete(2),yield Zf(t)):e||(t.aa.add(2),yield Hl(t),t.la.set("Unknown"))})}function _a(n){return n.Pa||(n.Pa=function(t,r,i){let o=fe(t);return o.Y_(),new oE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:MH.bind(null,n),Jo:PH.bind(null,n),Zo:NH.bind(null,n),Q_:kH.bind(null,n)}),n.ua.push(e=>C(this,null,function*(){e?(n.Pa.D_(),WE(n)?GE(n):n.la.set("Unknown")):(yield n.Pa.stop(),nR(n))}))),n.Pa}function Ui(n){return n.Ta||(n.Ta=function(t,r,i){let o=fe(t);return o.Y_(),new sE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:VH.bind(null,n),Zo:BH.bind(null,n),z_:LH.bind(null,n),j_:jH.bind(null,n)}),n.ua.push(e=>C(this,null,function*(){e?(n.Ta.D_(),yield Jf(n)):(yield n.Ta.stop(),n.oa.length>0&&(Z(Ho,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var dE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KE(n,e){if(ei("AsyncQueue",`${e}: ${n}`),va(n))return new re(j.UNAVAILABLE,`${e}: ${n}`);throw n}var Nf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||se.comparator(t.key,r.key):(t,r)=>se.comparator(t.key,r.key),this.keyedMap=Tl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var kf=class{constructor(){this.Ia=new lt(se.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):oe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Nf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var hE=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},fE=class{constructor(){this.queries=$1(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=fe(t),o=i.queries;i.queries=$1(),o.forEach((s,a)=>{for(let l of a.Ra)l.onError(r)})})(this,new re(j.ABORTED,"Firestore shutting down"))}};function $1(){return new ri(n=>Mx(n),Kf)}function $H(n,e){return C(this,null,function*(){let t=fe(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new hE,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=KE(s,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&QE(t)})}function HH(n,e){return C(this,null,function*(){let t=fe(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function qH(n,e){let t=fe(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&QE(t)}function zH(n,e,t){let r=fe(n),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(t);r.queries.delete(e)}function QE(n){n.fa.forEach(e=>{e.next()})}var pE,H1;(H1=pE||(pE={})).ya="default",H1.Cache="cache";var mE=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==pE.Cache}};var Of=class{constructor(e){this.key=e}},Ff=class{constructor(e){this.key=e}},gE=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Fe(),this.mutatedKeys=Fe(),this.Ua=Px(e),this.Ka=new Nf(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new kf,i=t?t.Ka:this.Ka,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,y)=>{let I=i.get(h),E=Qf(this.query,y)?y:null,M=!!I&&this.mutatedKeys.has(I.key),V=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),F=!1;I&&E?I.data.isEqual(E.data)?M!==V&&(r.track({type:3,doc:E}),F=!0):this.ja(I,E)||(r.track({type:2,doc:E}),F=!0,(l&&this.Ua(E,l)>0||u&&this.Ua(E,u)<0)&&(a=!0)):!I&&E?(r.track({type:0,doc:E}),F=!0):I&&!E&&(r.track({type:1,doc:I}),F=!0,(l||u)&&(a=!0)),F&&(E?(s=s.add(E),o=V?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((h,y)=>function(E,M){let V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:F})}};return V(E)-V(M)}(h.type,y.type)||this.Ua(h.doc,y.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,u=l!==this.Qa;return this.Qa=l,s.length!==0||u?{snapshot:new fa(this.query,e.Ka,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new kf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=Fe(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new Ff(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new Of(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Fe();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return fa.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},YE="SyncEngine",yE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},vE=class{constructor(e){this.key=e,this.tu=!1}},_E=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new ri(a=>Mx(a),Kf),this.iu=new Map,this.su=new Set,this.ou=new lt(se.comparator),this._u=new Map,this.au=new Ll,this.uu={},this.cu=new Map,this.lu=Vl.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function GH(n,e,t=!0){return C(this,null,function*(){let r=dR(n),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield sR(r,e,t,!0),i})}function WH(n,e){return C(this,null,function*(){let t=dR(n);yield sR(t,e,!0,!1)})}function sR(n,e,t,r){return C(this,null,function*(){let i=yield AH(n.localStore,yr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield KH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&eR(n.remoteStore,i),a})}function KH(n,e,t,r,i){return C(this,null,function*(){n.Pu=(y,I,E)=>function(V,F,Q,he){return C(this,null,function*(){let ve=F.view.Ga(Q);ve.ys&&(ve=yield L1(V.localStore,F.query,!1).then(({documents:x})=>F.view.Ga(x,ve)));let Je=he&&he.targetChanges.get(F.targetId),Kt=he&&he.targetMismatches.get(F.targetId)!=null,ze=F.view.applyChanges(ve,V.isPrimaryClient,Je,Kt);return z1(V,F.targetId,ze.Ya),ze.snapshot})}(n,y,I,E);let o=yield L1(n.localStore,e,!0),s=new gE(e,o.Ns),a=s.Ga(o.documents),l=Ol.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);z1(n,t,u.Ya);let h=new yE(e,t,s);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot})}function QH(n,e,t){return C(this,null,function*(){let r=fe(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!Kf(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield J0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&qE(r.remoteStore,i.targetId),EE(r,i.targetId)}).catch(ya))):(EE(r,i.targetId),yield J0(r.localStore,i.targetId,!0))})}function YH(n,e){return C(this,null,function*(){let t=fe(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),qE(t.remoteStore,r.targetId))})}function ZH(n,e,t){return C(this,null,function*(){let r=i4(n);try{let i=yield function(s,a){let l=fe(s),u=St.now(),h=a.reduce((E,M)=>E.add(M.key),Fe()),y,I;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=ii(),V=Fe();return l.Cs.getEntries(E,h).next(F=>{M=F,M.forEach((Q,he)=>{he.isValidDocument()||(V=V.add(Q))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,M)).next(F=>{y=F;let Q=[];for(let he of a){let ve=eH(he,y.get(he.key).overlayedDocument);ve!=null&&Q.push(new Ir(he.key,ve,Tx(ve.value.mapValue),Jr.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,Q,a)}).next(F=>{I=F;let Q=F.applyToLocalDocumentSet(y,V);return l.documentOverlayCache.saveOverlays(E,F.batchId,Q)})}).then(()=>({batchId:I.batchId,changes:kx(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.uu[s.currentUser.toKey()];u||(u=new lt(Te)),u=u.insert(a,l),s.uu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ql(r,i.changes),yield Jf(r.remoteStore)}catch(i){let o=KE(i,"Failed to persist write");t.reject(o)}})}function aR(n,e){return C(this,null,function*(){let t=fe(n);try{let r=yield TH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t._u.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?qe(s.tu,14607):i.removedDocuments.size>0&&(qe(s.tu,42227),s.tu=!1))}),yield ql(t,r,e)}catch(r){yield ya(r)}})}function q1(n,e,t){let r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((o,s)=>{let a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=fe(s);l.onlineState=a;let u=!1;l.queries.forEach((h,y)=>{for(let I of y.Ra)I.ga(a)&&(u=!0)}),u&&QE(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JH(n,e,t){return C(this,null,function*(){let r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),o=i&&i.key;if(o){let s=new lt(se.comparator);s=s.insert(o,Xn.newNoDocument(o,me.min()));let a=Fe().add(o),l=new Ef(me.min(),new Map,new lt(Te),s,a);yield aR(r,l),r.ou=r.ou.remove(o),r._u.delete(e),ZE(r)}else yield J0(r.localStore,e,!1).then(()=>EE(r,e,t)).catch(ya)})}function XH(n,e){return C(this,null,function*(){let t=fe(n),r=e.batch.batchId;try{let i=yield bH(t.localStore,e);lR(t,r,null),cR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ql(t,i)}catch(i){yield ya(i)}})}function e4(n,e,t){return C(this,null,function*(){let r=fe(n);try{let i=yield function(s,a){let l=fe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(y=>(qe(y!==null,37113),h=y.keys(),l.mutationQueue.removeMutationBatch(u,y))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);lR(r,e,t),cR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ql(r,i)}catch(i){yield ya(i)}})}function cR(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function lR(n,e,t){let r=fe(n),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function EE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||uR(n,r)})}function uR(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(qE(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),ZE(n))}function z1(n,e,t){for(let r of t)r instanceof Of?(n.au.addReference(r.key,e),t4(n,r)):r instanceof Ff?(Z(YE,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||uR(n,r.key)):oe(19791,{Iu:r})}function t4(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Z(YE,"New document in limbo: "+t),n.su.add(r),ZE(n))}function ZE(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new se(ct.fromString(e)),r=n.lu.next();n._u.set(r,new vE(t)),n.ou=n.ou.insert(t,r),eR(n.remoteStore,new Fl(yr(BE(t.path)),r,"TargetPurposeLimboResolution",PE.le))}}function ql(n,e,t){return C(this,null,function*(){let r=fe(n),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{s.push(r.Pu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let y=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,y?"current":"not-current")}if(u){i.push(u);let y=K0.Ps(l.targetId,u);o.push(y)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(l,u){return C(this,null,function*(){let h=fe(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(u,I=>L.forEach(I.ls,E=>h.persistence.referenceDelegate.addReference(y,I.targetId,E)).next(()=>L.forEach(I.hs,E=>h.persistence.referenceDelegate.removeReference(y,I.targetId,E)))))}catch(y){if(!va(y))throw y;Z(HE,"Failed to update sequence numbers: "+y)}for(let y of u){let I=y.targetId;if(!y.fromCache){let E=h.Ss.get(I),M=E.snapshotVersion,V=E.withLastLimboFreeSnapshotVersion(M);h.Ss=h.Ss.insert(I,V)}}})}(r.localStore,o))})}function n4(n,e){return C(this,null,function*(){let t=fe(n);if(!t.currentUser.isEqual(e)){Z(YE,"User change. New user:",e.toKey());let r=yield Jx(t.localStore,e);t.currentUser=e,function(o,s){o.cu.forEach(a=>{a.forEach(l=>{l.reject(new re(j.CANCELLED,s))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ql(t,r.Ms)}})}function r4(n,e){let t=fe(n),r=t._u.get(e);if(r&&r.tu)return Fe().add(r.key);{let i=Fe(),o=t.iu.get(e);if(!o)return i;for(let s of o){let a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function dR(n){let e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JH.bind(null,e),e.nu.Q_=qH.bind(null,e.eventManager),e.nu.Tu=zH.bind(null,e.eventManager),e}function i4(n){let e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e4.bind(null,e),e}var hR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=Yf(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return CH(this.persistence,new Y0,t.initialUser,this.serializer)}Ru(t){return new Sf(W0.Ei,this.serializer)}Au(t){return new X0}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),IE=class extends hR{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){qe(this.persistence.referenceDelegate instanceof Df,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new k0(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new Sf(r=>Df.Ei(r,t),this.serializer)}};var o4=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>q1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=n4.bind(null,this.syncEngine),yield UH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new fE}()}createDatastore(t){let r=Yf(t.databaseInfo.databaseId),i=function(s){return new iE(s)}(t.databaseInfo);return function(s,a,l,u){return new cE(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new uE(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>q1(this.syncEngine,r,0),function(){return xf.C()?new xf:new eE}())}createSyncEngine(t,r){return function(o,s,a,l,u,h,y){let I=new _E(o,s,a,l,u,h);return y&&(I.hu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield function(o){return C(this,null,function*(){let s=fe(o);Z(Ho,"RemoteStore shutting down."),s.aa.add(5),yield Hl(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var $i="FirestoreClient",CE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Rt.UNAUTHENTICATED,this.clientId=ff.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>C(this,null,function*(){Z($i,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Z($i,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=KE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function W_(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Z($i,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield Jx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function G1(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield s4(n);Z($i,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>U1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>U1(e.remoteStore,i)),n._onlineComponents=e})}function s4(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z($i,"Using user provided OfflineComponentProvider");try{yield W_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ta("Error using user provided cache. Falling back to memory cache: "+t),yield W_(n,new hR)}}else Z($i,"Using default OfflineComponentProvider"),yield W_(n,new IE(void 0));return n._offlineComponents})}function fR(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z($i,"Using user provided OnlineComponentProvider"),yield G1(n,n._uninitializedComponentsProvider._online)):(Z($i,"Using default OnlineComponentProvider"),yield G1(n,new o4))),n._onlineComponents})}function a4(n){return fR(n).then(e=>e.syncEngine)}function W1(n){return C(this,null,function*(){let e=yield fR(n),t=e.eventManager;return t.onListen=GH.bind(null,e.syncEngine),t.onUnlisten=QH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YH.bind(null,e.syncEngine),t})}function pR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var K1=new Map;function mR(n,e,t){if(!t)throw new re(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c4(n,e,t,r){if(e===!0&&r===!0)throw new re(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Q1(n){if(!se.isDocumentKey(n))throw new re(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Y1(n){if(se.isDocumentKey(n))throw new re(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function Xr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=JE(n);throw new re(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var gR="firestore.googleapis.com",Z1=!0,Vf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gR,this.ssl=Z1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Z1;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EH)throw new re(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new K_;switch(r.type){case"firstParty":return new J_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=K1.get(t);r&&(Z("ComponentProvider","Removing Datastore"),K1.delete(t),r.terminate())}(this),Promise.resolve()}};function yR(n,e,t,r={}){var i;let o=(n=Xr(n,pa))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==gR&&o.host!==a&&ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!dr(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Rt.MOCK_USER;else{u=wD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new re(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Rt(y)}n._authCredentials=new Q_(new df(u,h))}}var Lf=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ji=class n extends Lf{constructor(e,t,r){super(e,t,BE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new se(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vR(n,e,...t){if(n=yt(n),mR("collection","path",e),n instanceof pa){let r=ct.fromString(e,...t);return Y1(r),new ji(n,null,r)}{if(!(n instanceof gn||n instanceof ji))throw new re(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ct.fromString(e,...t));return Y1(r),new ji(n.firestore,null,r)}}function _R(n,e,...t){if(n=yt(n),arguments.length===1&&(e=ff.newId()),mR("doc","path",e),n instanceof pa){let r=ct.fromString(e,...t);return Q1(r),new gn(n,null,new se(r))}{if(!(n instanceof gn||n instanceof ji))throw new re(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ct.fromString(e,...t));return Q1(r),new gn(n.firestore,n instanceof ji?n.converter:null,new se(r))}}var J1="AsyncQueue",jf=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Rf(this,"async_queue_retry"),this.ju=()=>{let r=G_();r&&Z(J1,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=G_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=G_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new Zr;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return C(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!va(e))throw e;Z(J1,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ei("INTERNAL UNHANDLED ERROR: ",X1(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=dE.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&oe(47125,{ec:X1(this.Ku)})}verifyOperationInProgress(){}tc(){return C(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function X1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ex(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Hi=class extends pa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jf(e),this._firestoreClient=void 0,yield e}})}};function ER(n,e){let t=typeof n=="object"?n:Ao(),r=typeof n=="string"?n:e||yf,i=Hs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ID("firestore");o&&yR(i,...o)}return i}function IR(n){if(n._terminated)throw new re(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||l4(n),n._firestoreClient}function l4(n){var e,t,r;let i=n._freezeSettings(),o=function(a,l,u,h){return new r0(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,pR(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new CE(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var jl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new re(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ma=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bl=class{constructor(e){this._methodName=e}};var Ul=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var $l=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var u4=/^__.*__$/,bE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms):new $o(e,this.data,t,this.fieldTransforms)}},Bf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function wR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{oc:n})}}var TE=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return $f(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(wR(this.oc)&&u4.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},SE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yf(e)}dc(e,t,r,i=!1){return new TE({oc:e,methodName:t,Ec:r,path:An.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function CR(n){let e=n._freezeSettings(),t=Yf(n._databaseId);return new SE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function d4(n,e,t,r,i,o={}){let s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);XE("Data must be an object, but it was:",s,r);let a=bR(r,s),l,u;if(o.merge)l=new Bn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let y of o.mergeFields){let I=DE(e,y,t);if(!s.contains(I))throw new re(j.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);SR(h,I)||h.push(I)}l=new Bn(h),u=s.fieldTransforms.filter(y=>l.covers(y.field))}else l=null,u=s.fieldTransforms;return new bE(new Dn(a),l,u)}var Uf=class n extends Bl{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function h4(n,e,t,r){let i=n.dc(1,e,t);XE("Data must be an object, but it was:",i,r);let o=[],s=Dn.empty();qi(r,(l,u)=>{let h=eI(e,l,t);u=yt(u);let y=i.hc(h);if(u instanceof Uf)o.push(h);else{let I=Xf(u,y);I!=null&&(o.push(h),s.set(h,I))}});let a=new Bn(o);return new Bf(s,a,i.fieldTransforms)}function f4(n,e,t,r,i,o){let s=n.dc(1,e,t),a=[DE(e,r,t)],l=[i];if(o.length%2!=0)throw new re(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)a.push(DE(e,o[I])),l.push(o[I+1]);let u=[],h=Dn.empty();for(let I=a.length-1;I>=0;--I)if(!SR(u,a[I])){let E=a[I],M=l[I];M=yt(M);let V=s.hc(E);if(M instanceof Uf)u.push(E);else{let F=Xf(M,V);F!=null&&(u.push(E),h.set(E,F))}}let y=new Bn(u);return new Bf(h,y,s.fieldTransforms)}function Xf(n,e){if(TR(n=yt(n)))return XE("Unsupported field value:",e,n),bR(n,e);if(n instanceof Bl)return function(r,i){if(!wR(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=Xf(a,i.Pc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=St.fromDate(r);return{timestampValue:bf(i.serializer,o)}}if(r instanceof St){let o=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bf(i.serializer,o)}}if(r instanceof Ul)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jl)return{bytesValue:qx(i.serializer,r._byteString)};if(r instanceof gn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$E(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $l)return function(s,a){return{mapValue:{fields:{[OE]:{stringValue:FE},[ra]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return UE(a.serializer,u)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${JE(r)}`)}(n,e)}function bR(n,e){let t={};return yx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,(r,i)=>{let o=Xf(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function TR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Ul||n instanceof jl||n instanceof gn||n instanceof Bl||n instanceof $l)}function XE(n,e,t){if(!TR(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=JE(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function DE(n,e,t){if((e=yt(e))instanceof ma)return e._internalPath;if(typeof e=="string")return eI(n,e);throw $f("Field path arguments must be of type string or ",n,!1,void 0,t)}var p4=new RegExp("[~\\*/\\[\\]]");function eI(n,e,t){if(e.search(p4)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ma(...e.split("."))._internalPath}catch{throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $f(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new re(j.INVALID_ARGUMENT,a+n+l)}function SR(n,e){return n.some(t=>t.isEqual(e))}var Hf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(DR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},AE=class extends Hf{data(){return super.data()}};function DR(n,e){return typeof e=="string"?eI(n,e):e instanceof ma?e._internalPath:e._delegate._internalPath}function m4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xE=class{convertValue(e,t="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ra].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>rt(s.doubleValue));return new $l(o)}convertGeoPoint(e){return new Ul(rt(e.latitude),rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Wf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){let t=ti(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ct.fromString(e);qe(Yx(r),9688,{name:e});let i=new vf(r.get(1),r.get(3)),o=new se(r.popFirst(5));return i.isEqual(t)||ei(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function g4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qf=class extends Hf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(DR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ea=class extends qf{data(e={}){return super.data(e)}},RE=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ea(this._firestore,this._userDataWriter,r.key,r,new Vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new ea(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new ea(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:y4(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function y4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}var zf=class extends xE{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}};function AR(n,e,t){n=Xr(n,gn);let r=Xr(n.firestore,Hi),i=g4(n.converter,e,t);return nI(r,[d4(CR(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jr.none())])}function xR(n,e,t,...r){n=Xr(n,gn);let i=Xr(n.firestore,Hi),o=CR(i),s;return s=typeof(e=yt(e))=="string"||e instanceof ma?f4(o,"updateDoc",n._key,e,t,r):h4(o,"updateDoc",n._key,e),nI(i,[s.toMutation(n._key,Jr.exists(!0))])}function RR(n){return nI(Xr(n.firestore,Hi),[new kl(n._key,Jr.none())])}function tI(n,...e){var t,r,i;n=yt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ex(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ex(e[s])){let y=e[s];e[s]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[s+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[s+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let l,u,h;if(n instanceof gn)u=Xr(n.firestore,Hi),h=BE(n._key.path),l={next:y=>{e[s]&&e[s](v4(u,n,y))},error:e[s+1],complete:e[s+2]};else{let y=Xr(n,Lf);u=Xr(y.firestore,Hi),h=y._query;let I=new zf(u);l={next:E=>{e[s]&&e[s](new RE(u,I,y,E))},error:e[s+1],complete:e[s+2]},m4(n._query)}return function(I,E,M,V){let F=new wE(V),Q=new mE(E,F,M);return I.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return $H(yield W1(I),Q)})),()=>{F.yu(),I.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return HH(yield W1(I),Q)}))}}(IR(u),h,a,l)}function nI(n,e){return function(r,i){let o=new Zr;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return ZH(yield a4(r),i,o)})),o.promise}(IR(n),e)}function v4(n,e,t){let r=t.docs.get(e._key),i=new zf(n);return new qf(n,i,e._key,r,new Vo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ga=i})(Ri),Zn(new an("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hi(new Y_(r.getProvider("auth-internal")),new X_(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vf(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ot(u1,d1,e),ot(u1,d1,"esm2017")})();var ep=function(){return ep=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ep.apply(this,arguments)};var I4={includeMetadataChanges:!1};function rI(n,e){return e===void 0&&(e=I4),new Ie(function(t){var r=tI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function MR(n){return rI(n,{includeMetadataChanges:!0})}function PR(n,e){return e===void 0&&(e={}),MR(n).pipe(ue(function(t){return iI(t,e)}))}function iI(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ep(ep({},r),(t={},t[e.idField]=n.id,t))}function NR(n){return rI(n,{includeMetadataChanges:!0}).pipe(ue(function(e){return e.docs}))}function kR(n,e){return e===void 0&&(e={}),NR(n).pipe(ue(function(t){return t.map(function(r){return iI(r,e)})}))}var xn=class{constructor(e){return e}},OR="firestore",oI=class{constructor(){return zs(OR)}};var sI=new ee("angularfire2.firestore-instances");function w4(n,e){let t=ul(OR,n,e);return t&&new xn(t)}function C4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new xn(r)}}var b4={provide:oI,deps:[[new kn,sI]]},T4={provide:xn,useFactory:w4,deps:[[new kn,sI],qr]};function FR(n,...e){return ot("angularfire",Mi.full,"fst"),kr([T4,b4,{provide:sI,useFactory:C4(n),multi:!0,deps:[We,Ft,Pi,Ro,[new kn,Cl],[new kn,Gs],...e]}])}var Ea=xt(kR,!0);var Ia=xt(PR,!0);var wa=xt(vR,!0,2);var Ca=xt(RR,!0,2);var cn=xt(_R,!0,2);var VR=xt(ER,!0);var ba=xt(AR,!0,2);var Ta=xt(xR,!0,2);var Ae=class n{constructor(){}players;firestore=b(xn);playerCollection=wa(this.firestore,"player-data");ngOnInit(){this.getPlayers().subscribe(e=>this.players=e)}editPlayer(e,t,r,i,o){e.firstName=t,e.lastName=r,e.bio=i,Number.isNaN(Number(o))?e.age=-1:e.age=Number(o),this.updatePlayer(e.id,e)}createPlayer(e,t,r,i){let o=0;Number.isNaN(Number(i))?o=-1:o=Number(i);let s={id:"",teams:[],firstName:e,lastName:t,age:o,bio:r,photoUrl:"",stats:{},avgStats:[],currentlyInMatch:!1};this.addPlayer(s)}leaveTeam(e,t){let r=e.teams.indexOf(t.id,0);e.teams.splice(r,1),this.updatePlayer(e.id,e)}joinTeam(e,t){e.teams.push(t.id),this.updatePlayer(e.id,e)}getPlayerById(e){return this.players.filter(t=>t.id==e)[0]}getPlayer(e){let t=cn(this.firestore,`player-data/${e}`);return Ia(t,{idField:"id"})}getPlayers(){return Ea(this.playerCollection,{idField:"id"})}addPlayer(e){let t=cn(this.playerCollection),r=t.id;e.id=r,ba(t,e)}updatePlayer(e,t){let r=cn(this.firestore,`player-data/${e}`);return Ta(r,t)}deleteTeam(e){let t=cn(this.firestore,`player-data/${e}`);return Ca(t)}calculateAvg(e,t){let r=[],i=[];for(let s of t.schedule){let a=e.stats[s];a&&a.forEach((l,u)=>{r[u]=(r[u]||0)+l,i[u]=(i[u]||0)+1})}return r.map((s,a)=>i[a]?s/i[a]:0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var ce=class n{teams=[];playerService=b(Ae);constructor(){}firestore=b(xn);teamCollection=wa(this.firestore,"team-data");ngOnInit(){this.getTeams().subscribe(e=>this.teams=e),console.log(this.teams)}getTeam(e){let t=cn(this.firestore,`team-data/${e}`);return Ia(t,{idField:"id"})}getTeams(){return Ea(this.teamCollection,{idField:"id"})}getName(e){return this.getTeam(e).pipe(ue(t=>t.name))}addTeam(e){let t=cn(this.teamCollection),r=t.id;e.id=r,ba(t,e)}updateTeam(e,t){console.log("called new name: "+t.name);let r=cn(this.firestore,`team-data/${e}`);return Ta(r,H({},t))}deleteTeam(e){let t=cn(this.firestore,"team-data/${id}");return Ca(t)}getSportTeams(e){return this.teams.filter(t=>t.sport==e)}genSportTeams(e){return this.teams.filter(t=>t.sport==e)}createTeam(e,t,r,i){let o={id:"",name:e,sport:t,logoUrl:r,players:[],schedule:[],wins:0,losses:0,draws:0,leagueSubsection:i};this.addTeam(o)}editTeam(e,t,r,i){e.name=t,e.leagueSubsection=r,e.logoUrl=i,this.updateTeam(e.id,e)}getPlayerIDs(e){return this.teams.filter(t=>t.id==e)[0].players}playerLeave(e,t){t.players=t.players.filter(r=>r!=e.id),this.updateTeam(t.id,t)}playerJoin(e,t){t.players.push(e.id),this.updateTeam(t.id,t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var $e=class n{token=localStorage.getItem("token");auth=b(Kr);router=b(Vt);login(e,t){s1(this.auth,e,t).then(()=>{localStorage.setItem("token","true"),window.location.href=""},r=>{alert(`User not found: ${r.message} `),this.router.navigate(["/login"])})}logOut(){a1(this.auth).then(()=>{localStorage.removeItem("token"),window.location.reload()}).catch(e=>{alert(e.message)})}forgotPassword(e){console.log(e),o1(this.auth,e).then(()=>{alert("Password reset link was sent!"),this.router.navigate(["/login"])}).catch(t=>{alert(`Something went wrong: ${t.message}`)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var yn=class n{constructor(e){this.location=e}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)(de(Ti))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var S4=(n,e,t)=>["/edit-player",n,e,t];function D4(n,e){if(n&1&&Y(0,"img",1),n&2){let t=D();pn("src",t.player.photoUrl,dt)}}function A4(n,e){n&1&&Y(0,"img",2)}function x4(n,e){if(n&1&&g(0),n&2){let t=e.$implicit;Ve(" ",t.name,", ")}}function R4(n,e){if(n&1&&(f(0,"button",8),g(1," Edit "),p()),n&2){let t=D();W("routerLink",ar(1,S4,t.sportId(),t.teamId(),t.playerId()))}}var zl=class n{teamId=Ge.required();playerId=Ge.required();sportId=Ge.required();authService=b($e);userService=b(yn);teamService=b(ce);playerService=b(Ae);player;team;teams=[];firstName;lastName;bio;age;ngOnInit(){this.teamService.getTeam(this.teamId()).subscribe(e=>{this.team=e}),this.playerService.getPlayer(this.playerId()).subscribe(e=>{this.player=e,e.teams.forEach(t=>{this.teamService.getTeam(t).subscribe(r=>this.teams.push(r))})}),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.firstName=e.firstName),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.lastName=e.lastName),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.bio=e.bio),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.age=String(e.age))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-player-view"]],inputs:{teamId:[1,"teamId"],playerId:[1,"playerId"],sportId:[1,"sportId"]},decls:30,vars:6,consts:[[1,"container","p-4",2,"align-self","center"],["alt","Player Photo",1,"h-50","w-50",3,"src"],["src","images/generic-user.png","alt","No Player Photo",1,"h-25","w-25"],[1,"mt-3"],[1,"container"],[1,"row"],[2,"font-weight","bold"],[1,"text-center"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",2,"margin-left","10px",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0),K(1,D4,1,1,"img",1)(2,A4,1,0,"img",2),f(3,"div",3)(4,"h1"),g(5),p(),Y(6,"hr"),p(),f(7,"div",4)(8,"h4"),g(9,"Player Information"),p(),f(10,"div",5)(11,"p")(12,"span",6),g(13,"Age:"),p(),g(14),p()(),f(15,"div",5)(16,"p")(17,"span",6),g(18,"Bio:"),p(),g(19),p()(),f(20,"div",5)(21,"p")(22,"span",6),g(23,"Playing for:"),p(),J(24,x4,1,1,null,null,_e),p()(),f(26,"div",7),K(27,R4,2,5,"button",8),f(28,"button",9),O("click",function(){return r.userService.goBack()}),g(29," Back to team "),p()()()()),t&2&&(_(),$(r.player.photoUrl?1:2),_(4),De("",r.firstName," ",r.lastName,""),_(9),Ve(" ",r.age,""),_(5),Ve(" ",r.bio,""),_(5),X(r.teams),_(3),$(r.authService.token=="true"?27:-1))},dependencies:[je],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.container[_ngcontent-%COMP%]{margin:1rem}"]})};var Et=(i=>(i[i.Football=0]="Football",i[i.Basketball=1]="Basketball",i[i.Volleyball=2]="Volleyball",i[i.RainbowSixSiege=3]="RainbowSixSiege",i))(Et||{});var wr=class n{sportInfo;constructor(){}getSports(){return[{name:"Football",imageUrl:"images/football.jpg",sportID:0},{name:"Basketball",imageUrl:"images/basketball.jpg",sportID:1},{name:"Volleyball",imageUrl:"images/volleyball.jpg",sportID:2},{name:"Rainbow Six Siege",imageUrl:"images/rainbow-six-seige.jpg",sportID:3}]}getSportInfo(e){return this.sportInfo=this.getSports(),this.sportInfo.filter(t=>t.sportID==e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var M4=n=>["/sport",n];function P4(n,e){if(n&1&&(f(0,"div",2)(1,"div",3),Y(2,"img",4),f(3,"div",5)(4,"h4",6),g(5),p(),f(6,"p",7),g(7),p(),Y(8,"div",8),f(9,"button",9),g(10," Select Sport "),p()()()()),n&2){let t=e.$implicit;_(2),pn("src",t.imageUrl,dt),pn("alt",t.name),_(3),z(t.name),_(2),Ve(" Click the button below to view all ",t.name," teams. "),_(2),W("routerLink",rn(5,M4,t.sportID))}}var Sa=class n{userService=b(yn);sportService=b(wr);teamService=b(ce);authService=b($e);sports=[];sp;ngOnInit(){this.sports=this.sportService.getSports(),this.teamService.getTeams().subscribe(e=>console.log(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-sport-selection"]],inputs:{sp:"sp"},decls:6,vars:0,consts:[["id","sport-selection",1,"container"],[1,"row"],[1,"col-md-4","mt-3"],[1,"card","h-100"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text",2,"min-height","50px"],[1,"mt-auto"],[1,"btn","btn-dark","mt-auto",3,"routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h2"),g(2,"All Sports"),p(),f(3,"div",1),J(4,P4,11,7,"div",2,_e),p()()),t&2&&(_(4),X(r.sports))},dependencies:[Rs,je],encapsulation:2})};function N4(n,e){n&1&&(f(0,"a",12),g(1,"Admin Management Portal"),p())}var tp=class n{authService=b($e);ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-home"]],decls:23,vars:1,consts:[[1,"container-fluid","p-5","bg-custom","text-center"],["src","images/ndsu-logo.jpg","alt","NDSU Logo",1,"mb-3"],["href","#sport-selection",1,"btn","btn-dark"],[1,"container-fluid","p-4"],[1,"row"],[1,"col-md-3"],[1,"card","text-center","mt-2","bg-light"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"d-flex","flex-column","gap-2","mt-auto"],["routerLink","/login",1,"btn","btn-danger","w-100"],["routerLink","/admin-management",1,"btn","btn-primary","w-100"],[1,"col-md-9"]],template:function(t,r){t&1&&(f(0,"div",0),Y(1,"img",1),f(2,"h1"),g(3,"Welcome to Bison Base!"),p(),f(4,"p"),g(5,"The go-to location for NDSU Sports updates"),p(),f(6,"a",2),g(7,"Start Browsing"),p()(),f(8,"div",3)(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",7)(13,"h5",8),g(14,"Administrators & Statisticians"),p(),f(15,"p",9),g(16," Please use the button below to login using a registered account. "),p(),f(17,"div",10)(18,"a",11),g(19,"Login"),p(),K(20,N4,2,0,"a",12),p()()()(),f(21,"div",13),Y(22,"app-sport-selection"),p()()()),t&2&&(_(20),$(r.authService.token=="true"?20:-1))},dependencies:[Sa,je],styles:[".bg-custom[_ngcontent-%COMP%]{background-color:#ffc72a}"]})};var WR=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(xe(_i),xe(jr))};static \u0275dir=ht({type:n})}return n})(),lp=(()=>{class n extends WR{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275dir=ht({type:n,features:[Fn]})}return n})(),Jl=new ee(""),k4={provide:Jl,useExisting:or(()=>cI),multi:!0},cI=(()=>{class n extends lp{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&O("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[wi([k4]),Fn]})}return n})(),O4={provide:Jl,useExisting:or(()=>Pt),multi:!0};function F4(){let n=Vn()?Vn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var V4=new ee(""),Pt=(()=>{class n extends WR{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!F4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(xe(_i),xe(jr),xe(V4,8))};static \u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&O("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[wi([O4]),Fn]})}return n})();function L4(n){return n==null||j4(n)===0}function j4(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var lI=new ee(""),KR=new ee("");function B4(n){return L4(n.value)?{required:!0}:null}function LR(n){return null}function QR(n){return n!=null}function YR(n){return Ds(n)?nt(n):n}function ZR(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function JR(n,e){return e.map(t=>t(n))}function U4(n){return!n.validate}function XR(n){return n.map(e=>U4(e)?e:t=>e.validate(t))}function $4(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){return ZR(JR(t,e))}}function uI(n){return n!=null?$4(XR(n)):null}function H4(n){if(!n)return null;let e=n.filter(QR);return e.length==0?null:function(t){let r=JR(t,e).map(YR);return jm(r).pipe(ue(ZR))}}function dI(n){return n!=null?H4(XR(n)):null}function jR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function q4(n){return n._rawValidators}function z4(n){return n._rawAsyncValidators}function aI(n){return n?Array.isArray(n)?n:[n]:[]}function rp(n,e){return Array.isArray(n)?n.includes(e):n===e}function BR(n,e){let t=aI(e);return aI(n).forEach(i=>{rp(t,i)||t.push(i)}),t}function UR(n,e){return aI(e).filter(t=>!rp(n,t))}var ip=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xa=class extends ip{name;get formDirective(){return null}get path(){return null}},Zl=class extends ip{_parent=null;name=null;valueAccessor=null},op=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},G4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Pre=Se(H({},G4),{"[class.ng-submitted]":"isSubmitted"}),Wt=(()=>{class n extends op{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(xe(Zl,2))};static \u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Yd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Fn]})}return n})(),up=(()=>{class n extends op{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(xe(xa,10))};static \u0275dir=ht({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Yd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Fn]})}return n})();var Gl="VALID",np="INVALID",Da="PENDING",Wl="DISABLED",Ra=class{},sp=class extends Ra{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ql=class extends Ra{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Yl=class extends Ra{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Aa=class extends Ra{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function eM(n){return(dp(n)?n.validators:n)||null}function W4(n){return Array.isArray(n)?uI(n):n||null}function tM(n,e){return(dp(e)?e.asyncValidators:n)||null}function K4(n){return Array.isArray(n)?dI(n):n||null}function dp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Q4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function Y4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var ap=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ur(this.statusReactive)}set status(e){Ur(()=>this.statusReactive.set(e))}_status=As(()=>this.statusReactive());statusReactive=Ss(void 0);get valid(){return this.status===Gl}get invalid(){return this.status===np}get pending(){return this.status==Da}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}errors;get pristine(){return Ur(this.pristineReactive)}set pristine(e){Ur(()=>this.pristineReactive.set(e))}_pristine=As(()=>this.pristineReactive());pristineReactive=Ss(!0);get dirty(){return!this.pristine}get touched(){return Ur(this.touchedReactive)}set touched(e){Ur(()=>this.touchedReactive.set(e))}_touched=As(()=>this.touchedReactive());touchedReactive=Ss(!1);get untouched(){return!this.touched}_events=new pt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UR(e,this._rawAsyncValidators))}hasValidator(e){return rp(this._rawValidators,e)}hasAsyncValidator(e){return rp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Yl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Yl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ql(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ql(!0,r))}markAsPending(e={}){this.status=Da;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Se(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(i=>{i.disable(Se(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,r)),this._events.next(new Aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this._forEachChild(r=>{r.enable(Se(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gl||this.status===Da)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,t)),this._events.next(new Aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Se(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:Gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=YR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ct,this.statusChanges=new Ct}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?np:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(np)?np:Gl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ql(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Yl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=W4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=K4(this._rawAsyncValidators)}},cp=class extends ap{constructor(e,t,r){super(eM(t),tM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Y4(this,!0,e),Object.keys(e).forEach(r=>{Q4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hI=new ee("",{providedIn:"root",factory:()=>fI}),fI="always";function Z4(n,e){return[...e.path,n]}function nM(n,e,t=fI){rM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),X4(n,e),tq(n,e),eq(n,e),J4(n,e)}function $R(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function J4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function rM(n,e){let t=q4(n);e.validator!==null?n.setValidators(jR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=z4(n);e.asyncValidator!==null?n.setAsyncValidators(jR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();$R(e._rawValidators,i),$R(e._rawAsyncValidators,i)}function X4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&iM(n,e)})}function eq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&iM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function iM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function nq(n,e){n==null,rM(n,e)}function rq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function iq(n){return Object.getPrototypeOf(n.constructor)===lp}function oq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Pt?t=o:iq(o)?r=o:i=o}),i||r||t||null}var aq={provide:xa,useExisting:or(()=>Xl)},Kl=Promise.resolve(),Xl=(()=>{class n extends xa{callSetDisabledState;get submitted(){return Ur(this.submittedReactive)}_submitted=As(()=>this.submittedReactive());submittedReactive=Ss(!1);_directives=new Set;form;ngSubmit=new Ct;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new cp({},uI(t),dI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Kl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),nM(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Kl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Kl.then(()=>{let r=this._findContainer(t.path),i=new cp({});nq(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Kl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Kl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),oq(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(xe(lI,10),xe(KR,10),xe(hI,8))};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&O("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[wi([aq]),Fn]})}return n})();function HR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var cq=class extends ap{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(eM(t),tM(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(qR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lq={provide:Zl,useExisting:or(()=>Lt)},zR=Promise.resolve(),Lt=(()=>{class n extends Zl{_changeDetectorRef;callSetDisabledState;control=new cq;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ct;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sq(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){zR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Eo(r);zR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Z4(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(xe(xa,9),xe(lI,10),xe(KR,10),xe(Jl,10),xe(Ci,8),xe(hI,8))};static \u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[wi([lq]),Fn,vi]})}return n})();var hp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var uq={provide:Jl,useExisting:or(()=>zi),multi:!0};function oM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dq(n){return n.split(":")[0]}var zi=(()=>{class n extends lp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=oM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=dq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&O("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wi([uq]),Fn]})}return n})(),Ma=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(oM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(xe(jr),xe(_i),xe(zi,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),hq={provide:Jl,useExisting:or(()=>sM),multi:!0};function GR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function fq(n){return n.split(":")[0]}var sM=(()=>{class n extends lp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=fq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&O("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wi([hq]),Fn]})}return n})(),Pa=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(GR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(GR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(xe(jr),xe(_i),xe(sM,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var pq=(()=>{class n{_validator=LR;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):LR,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,features:[vi]})}return n})();var mq={provide:lI,useExisting:or(()=>eu),multi:!0};var eu=(()=>{class n extends pq{required;inputName="required";normalizeInput=Eo;createValidator=t=>B4;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[wi([mq]),Fn]})}return n})();var gq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Br({type:n});static \u0275inj=Nr({})}return n})();var ut=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hI,useValue:t.callSetDisabledState??fI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Br({type:n});static \u0275inj=Nr({imports:[gq]})}return n})();var fp=class n{authService=b($e);email="";password="";login(){if(this.email==""){alert("Please enter email");return}if(this.password==""){alert("Please enter your password");return}this.authService.login(this.email,this.password),this.email="",this.password=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-login"]],decls:27,vars:2,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"container-fluid","text-center",2,"margin-top","40px"],[1,"row","justify-content-center"],[1,"col-5","bg-secondary-subtle",2,"border-radius","20px"],["src","acc_login2.svg","alt","",2,"height","200px"],[1,"text-start","container"],["action","",1,"form"],["for","user_id"],["type","email","name","email","placeholder","email address",1,"form-control",3,"ngModelChange","ngModel"],["for","user_password"],["type","password","name","password","placeholder","password",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-start",2,"margin-top","20px"],["routerLink","/feature_not_supported",1,"link-secondary","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover"],[1,"btn","btn-primary",2,"margin-bottom","30px",3,"click"]],template:function(t,r){t&1&&(f(0,"html",0)(1,"head"),Y(2,"meta",1)(3,"meta",2),f(4,"title"),g(5,"Admin Management"),p()(),f(6,"body")(7,"div",3)(8,"div",4)(9,"div",5),Y(10,"img",6),f(11,"h5"),g(12,"Enter your login details to continue"),p(),Y(13,"hr"),f(14,"div",7)(15,"form",8)(16,"label",9),g(17,"User ID"),p(),f(18,"input",10),Me("ngModelChange",function(o){return Oe(r.email,o)||(r.email=o),o}),p(),f(19,"label",11),g(20,"Password"),p(),f(21,"input",12),Me("ngModelChange",function(o){return Oe(r.password,o)||(r.password=o),o}),p()()(),f(22,"div",13)(23,"a",14),g(24,"Forgot Password?"),p()(),f(25,"button",15),O("click",function(){return r.login()}),g(26,"Login"),p()()()()()()),t&2&&(_(18),Re("ngModel",r.email),_(3),Re("ngModel",r.password))},dependencies:[ut,hp,Pt,Wt,up,Lt,Xl,je],encapsulation:2})};var pp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-admin-page"]],decls:52,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[2,"text-align","center","margin-top","20px"],[1,"container","text-center",2,"margin-top","20px"],[1,"row"],[1,"col"],["type","text","placeholder","Enter Username",1,"form-control"],["type","text","placeholder","Enter Email address",1,"form-control"],["name","","id",""],["value","option1"],["value","option2"],["value","option3"],["type","text","placeholder","Enter User ID",1,"form-control"],[1,"btn","btn-primary"],[1,"row",2,"margin-top","20px"],[1,"col","text-start"],[1,"btn","btn-outline-secondary",2,"border-radius","30px"],[1,"",2,"margin-top","20px"],[1,"float-sm-end"],[1,"btn","btn-primary",2,"border-radius","18px"]],template:function(t,r){t&1&&(f(0,"html",0)(1,"head"),Y(2,"meta",1)(3,"meta",2),f(4,"title"),g(5,"Admin Management"),p()(),f(6,"body")(7,"div")(8,"h2",3),g(9,"ADMIN MANAGEMENT PORTAL"),p(),f(10,"div",4)(11,"div",5)(12,"div",6)(13,"h5"),g(14,"Username"),p()(),f(15,"div",6)(16,"h5"),g(17,"Email"),p()(),f(18,"div",6)(19,"h5"),g(20,"Type"),p()(),f(21,"div",6)(22,"h5"),g(23,"User ID"),p()(),Y(24,"div",6),p(),f(25,"div",5)(26,"div",6),Y(27,"input",7),p(),f(28,"div",6),Y(29,"input",8),p(),f(30,"div",6)(31,"select",9)(32,"option",10),g(33,"1"),p(),f(34,"option",11),g(35,"2"),p(),f(36,"option",12),g(37,"3"),p()()(),f(38,"div",6),Y(39,"input",13),p(),f(40,"div",6)(41,"button",14),g(42,"Delete"),p()()(),f(43,"div",15)(44,"div",16)(45,"button",17)(46,"b"),g(47,"+"),p()()()(),f(48,"div",18)(49,"div",19)(50,"button",20),g(51,"Publish"),p()()()()()()())},encapsulation:2})};var mp=class n{playerService=b(Ae);teamService=b(ce);sportService=b(wr);search(e){let t=e.toLowerCase();return oo([this.playerService.getPlayers(),this.teamService.getTeams(),le(this.sportService.getSports())]).pipe(ue(([r,i,o])=>{let s=r.filter(u=>(u.firstName+" "+u.lastName).toLowerCase().includes(t)).map(u=>({id:u.id,name:u.firstName+" "+u.lastName,imageUrl:u.photoUrl,type:"player"})),a=i.filter(u=>u.name.toLowerCase().includes(t)).map(u=>({id:u.id,name:u.name,imageUrl:u.logoUrl,type:"team"})),l=o.filter(u=>u.name.toLowerCase().includes(t)).map(u=>({id:u.sportID,name:u.name,imageUrl:u.imageUrl,type:"sport"}));return[...s,...a,...l]}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function yq(n,e){n&1&&(f(0,"div")(1,"p"),g(2,"No results found."),p()())}function vq(n,e){if(n&1){let t=et();f(0,"div",2)(1,"div",3),Y(2,"img",4),f(3,"div",5)(4,"h4",6),g(5),p(),f(6,"p")(7,"span",7),g(8),p()()(),f(9,"div",8)(10,"button",9),O("click",function(){let i=B(t).$implicit,o=D(2);return U(o.navigateToResult(i))}),g(11," View Page "),p()()()()}if(n&2){let t=e.$implicit;_(2),pn("alt",t.name),W("src",t.imageUrl,dt),_(3),z(t.name),_(3),z(t.type.toUpperCase())}}function _q(n,e){if(n&1&&(f(0,"div",1),J(1,vq,12,4,"div",2,_e),p()),n&2){let t=D();_(),X(t.results)}}var gp=class n{results=[];query="";router=b(Vt);route=b(bn);searchService=b(mp);playerService=b(Ae);teamService=b(ce);sportService=b(wr);cdr=b(Ci);ngOnInit(){this.route.queryParams.subscribe(e=>{this.query=e.q||"",this.query?this.searchService.search(this.query).subscribe(t=>{this.results=t,console.log("Search results: ",t)}):this.results=[]})}navigateToResult(e){e.type==="player"?this.playerService.getPlayer(e.id.toString()).subscribe(t=>{let r=t.id;console.log("Fetched player:",t);let i=t.teams;if(console.log("Player team IDs:",i),i&&i.length>0){let o=i[0];console.log("Searching for team with ID:",o),this.teamService.getTeam(o).subscribe(s=>{if(console.log("Fetched team:",s),s){let a=s.sport;console.log("Navigating to player page with team:",s,"and sport:",a),this.router.navigate(["/view-player",a,o,r])}else console.warn("Team not found for player, navigating to fallback route"),this.router.navigate(["/view-player","no-sport","no-team",r])})}else console.warn("Player has no team, navigating to fallback route"),this.router.navigate(["/view-player","no-sport","no-team",r])}):e.type==="team"?this.teamService.getTeam(e.id.toString()).subscribe(t=>{let r=t.sport,i=t.id;this.router.navigate(["/team-view",r,i])}):e.type==="sport"&&this.router.navigate(["/sport",e.id])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-search-results"]],decls:6,vars:2,consts:[[1,"container","pt-5"],[1,"row"],[1,"col-md-4","mb-3"],[1,"card","h-100"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[2,"font-style","italic"],[1,"card-footer"],[1,"btn","btn-dark","mt-auto",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h2"),g(2,"Search Results"),p(),Y(3,"br"),K(4,yq,3,0,"div")(5,_q,3,0,"div",1),p()),t&2&&(_(4),$(r.results.length===0?4:-1),_(),$(r.results.length>0?5:-1))},encapsulation:2})};var Eq=(n,e)=>["/team-view",n,e];function Iq(n,e){if(n&1){let t=et();f(0,"button",11),O("click",function(){B(t);let i=D();return U(i.commitChanges())}),g(1,"Save"),p()}if(n&2){let t=D();W("routerLink",tt(1,Eq,t.team.sport,t.id()))}}var yp=class n{id=Ge.required();teamService=b(ce);authService=b($e);userService=b(yn);team;name;league;logo;sport;commitChanges(){console.log("errors to focus on below"),this.teamService.editTeam(this.team,this.name,this.league,this.logo)}ngOnInit(){console.log(this.id()),this.teamService.getTeam(this.id()).subscribe(e=>this.team=e),this.teamService.getTeam(this.id()).subscribe(e=>this.name=e.name),this.teamService.getTeam(this.id()).subscribe(e=>this.league=e.leagueSubsection),this.teamService.getTeam(this.id()).subscribe(e=>this.logo=e.logoUrl),this.teamService.getTeam(this.id()).subscribe(e=>this.sport=e.sport)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-team-edit"]],inputs:{id:[1,"id"]},decls:28,vars:8,consts:[[1,"container",2,"align-self","center"],[1,"containerA"],[1,"card"],[1,"container"],[1,"row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text",1,"inputText",2,"width","90%",3,"ngModelChange","ngModel"],[3,"src","alt"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",2,"margin-left","10px",3,"click"],[1,"btn","btn-primary",3,"click","routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3),p()(),f(4,"div",2)(5,"div",3)(6,"h3"),g(7,"Edit Team"),p(),f(8,"div",4)(9,"div",5),g(10," Team Name: "),p(),f(11,"div",6)(12,"input",7),Me("ngModelChange",function(o){return Oe(r.name,o)||(r.name=o),o}),p()()(),f(13,"div",4)(14,"div",5),g(15," League: "),p(),f(16,"div",6)(17,"input",7),Me("ngModelChange",function(o){return Oe(r.league,o)||(r.league=o),o}),p()()(),f(18,"div",4)(19,"div",5),g(20," Logo: "),p(),f(21,"div",6)(22,"input",7),Me("ngModelChange",function(o){return Oe(r.logo,o)||(r.logo=o),o}),p()()(),f(23,"div",4),Y(24,"img",8),p(),K(25,Iq,2,4,"button",9),f(26,"button",10),O("click",function(){return r.userService.goBack()}),g(27,"Cancel"),p()()()()),t&2&&(_(3),Ve(" ",r.name,""),_(9),Re("ngModel",r.name),_(5),Re("ngModel",r.league),_(5),Re("ngModel",r.logo),_(2),Ei("alt","",r.name,"'s Logo"),W("src",r.logo,dt),_(),$(r.authService.token=="true"?25:-1))},dependencies:[je,ut,Pt,Wt,Lt],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.container[_ngcontent-%COMP%]{margin:1rem}"]})};var pI=(n,e)=>["/team-view",n,e];function wq(n,e){if(n&1){let t=et();f(0,"button",9),O("click",function(){B(t);let i=D();return U(i.commitChanges())}),g(1,"Commit"),p(),f(2,"button",10),O("click",function(){B(t);let i=D();return U(i.removePlayer(i.player))}),g(3,"Remove from team"),p()}if(n&2){let t=D();W("routerLink",tt(2,pI,t.sportId(),t.teamId())),_(2),W("routerLink",tt(5,pI,t.sportId(),t.teamId()))}}var vp=class n{teamId=Ge.required();playerId=Ge.required();sportId=Ge.required();authService=b($e);teamService=b(ce);playerService=b(Ae);player;team;firstName;lastName;bio;age;commitChanges(){this.playerService.editPlayer(this.player,this.firstName,this.lastName,this.bio,this.age)}removePlayer(e){this.playerService.leaveTeam(e,this.team),this.teamService.playerLeave(e,this.team)}ngOnInit(){this.teamService.getTeam(this.teamId()).subscribe(e=>this.team=e),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.player=e),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.firstName=e.firstName),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.lastName=e.lastName),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.bio=e.bio),this.playerService.getPlayer(this.playerId()).subscribe(e=>this.age=String(e.age))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-player-edit"]],inputs:{teamId:[1,"teamId"],playerId:[1,"playerId"],sportId:[1,"sportId"]},decls:31,vars:12,consts:[[1,"container",2,"align-self","center"],[1,"containerA"],[1,"card"],[1,"container"],[1,"row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text",1,"inputText",2,"width","90%",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click","routerLink"],[1,"btn","btn-danger",3,"click","routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3),p()(),f(4,"div",2)(5,"div",3)(6,"h3"),g(7,"Edit Player"),p(),f(8,"div",4)(9,"div",5),g(10," First Name: "),p(),f(11,"div",6)(12,"input",7),Me("ngModelChange",function(o){return Oe(r.firstName,o)||(r.firstName=o),o}),p()()(),f(13,"div",4)(14,"div",5),g(15," Last Name: "),p(),f(16,"div",6)(17,"input",7),Me("ngModelChange",function(o){return Oe(r.lastName,o)||(r.lastName=o),o}),p()()(),f(18,"div",4)(19,"div",5),g(20," Bio: "),p(),f(21,"div",6)(22,"input",7),Me("ngModelChange",function(o){return Oe(r.bio,o)||(r.bio=o),o}),p()()(),f(23,"div",4)(24,"div",5),g(25," Age: "),p(),f(26,"div",6)(27,"input",7),Me("ngModelChange",function(o){return Oe(r.age,o)||(r.age=o),o}),p()()(),f(28,"button",8),g(29,"Cancel"),p(),K(30,wq,4,8),p()()()),t&2&&(_(3),Ii(" ",r.team.name," ",r.firstName," ",r.lastName,""),_(9),Re("ngModel",r.firstName),_(5),Re("ngModel",r.lastName),_(5),Re("ngModel",r.bio),_(5),Re("ngModel",r.age),_(),W("routerLink",tt(9,pI,r.sportId(),r.teamId())),_(2),$(r.authService.token=="true"?30:-1))},dependencies:[je,ut,Pt,Wt,Lt],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.container[_ngcontent-%COMP%]{margin:1rem}"]})};var _p=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-roster-edit"]],decls:2,vars:0,template:function(t,r){t&1&&(f(0,"p"),g(1,"roster-edit works!"),p())},encapsulation:2})};var it=class n{addPlayToMatch(e,t){e.quarterOrRoundResults[e.quarterOrRound-1].plays.push(t),this.updateMatch(e.id,e)}firestore=b(xn);matchCollection=wa(this.firestore,"match-data");constructor(){}removePlayFromMatch(e,t,r){r.plays=r.plays.filter(i=>i!=t),this.updateMatch(e.id,e)}removeQuarterOrRoundFromMatch(e,t){e.quarterOrRoundResults=e.quarterOrRoundResults.filter(r=>r!=t),this.updateMatch(e.id,e)}getMatchById(e){let t=cn(this.firestore,`match-data/${e}`);return Ia(t,{idField:"id"})}getMatches(){return Ea(this.matchCollection,{idField:"id"})}addMatch(e,t,r){let i={id:"notreasigned",date:r,team1ID:e.id,team2ID:t.id,team1Score:0,team2Score:0,hasStarted:!1,hasFinished:!1,timeRemaining:0,quarterOrRound:0,quarterOrRoundResults:[]},o=cn(this.matchCollection),s=o.id;return i.id=s,ba(o,i),s}updateMatch(e,t){let r=cn(this.firestore,`match-data/${e}`);return Ta(r,H({},t))}deleteTeam(e){let t=cn(this.firestore,"match-data/${id}");return Ca(t)}calculateMatchScore(e){let t=0,r=0;e.quarterOrRoundResults.forEach(i=>{t+=i.team1Score,r+=i.team2Score}),e.team1Score=t,e.team2Score=r,this.updateMatch(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var mI=(s=>(s.EnteredGame="Entered Game",s.ExitedGame="Exited Game",s.FGMade="Made a Field Goal",s.P3Made="Made a 3 Point Field Goal",s.FTMade="Made a Free Throw",s.Rebound="Got a rebound",s))(mI||{}),Wi=class n{statCategories=["GP","MIN","PTS","FG","3P","FT","REB","AST"];teams=[];teamData=b(ce);matchService=b(it);playerService=b(Ae);constructor(){}onInit(){this.teams=this.teamData.teams.filter(e=>e.sport===1)}playDescriptionBuilderAssist(e,t,r){let i=this.playDescriptionBuilderSolo(e,r);return i+=", assisted by "+t.firstName+" "+t.lastName,i}playDescriptionBuilder(e,t,r){let i=e.firstName+" "+e.lastName;return i+=" "+r+" "+t.firstName+" "+t.lastName,i}playDescriptionBuilderSolo(e,t){let r=e.firstName+" "+e.lastName;return r+=" "+t,r}basketballPlayBuilder(e,t,r,i,o,s){let a="";o!=null?(a=this.playDescriptionBuilderAssist(r,o,s),o.stats[e.id][7]++):i!=null?a=this.playDescriptionBuilder(r,i,s):a=this.playDescriptionBuilderSolo(r,s),s=="Made a Field Goal"&&(r.stats[e.id][3]++,r.stats[e.id][2]+=2),s=="Made a 3 Point Field Goal"&&(r.stats[e.id][4]++,r.stats[e.id][2]+=3),s=="Made a Free Throw"&&(r.stats[e.id][5]++,r.stats[e.id][2]++),s=="Got a rebound"&&r.stats[e.id][6]++;let l={playerActing:r,playerEffected:i,playerAssisting:o,playAction:s,time:t,description:a};this.matchService.addPlayToMatch(e,l),this.playerService.updatePlayer(r.id,r),this.playerService.updatePlayer(i.id,i),o!=null&&this.playerService.updatePlayer(o.id,o)}reverseBasketballAction(e,t,r){t.playerAssisting!=null&&t.playerAssisting.stats[e.id][7]++,t.playerActing!=null&&(t.playAction=="Made a Field Goal"&&(t.playerActing.stats[e.id][3]++,t.playerActing.stats[e.id][2]+=2),t.playAction=="Made a 3 Point Field Goal"&&(t.playerActing.stats[e.id][4]++,t.playerActing.stats[e.id][2]+=3),t.playAction=="Made a Free Throw"&&(t.playerActing.stats[e.id][5]++,t.playerActing.stats[e.id][2]++),t.playAction=="Got a rebound"&&t.playerActing.stats[e.id][6]++),this.matchService.removePlayFromMatch(e,t,r),t.playerActing!=null&&this.playerService.updatePlayer(t.playerActing.id,t.playerActing),t.playerEffected!=null&&this.playerService.updatePlayer(t.playerEffected.id,t.playerEffected),t.playerAssisting!=null&&this.playerService.updatePlayer(t.playerAssisting.id,t.playerAssisting)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var gI=(h=>(h.EnteredGame="Entered Game",h.ExitedGame="Exited Game",h.FGMade="Made a Field Goal",h.FGMissed="Missed a Field Goal",h.Tackle="Tackled",h.Penalty="Commited a Penalty",h.Passed="Threw a Pass to",h.Incomplete="Threw an Incomplete Pass",h.Run="Ran the Ball",h.Touchdown="Scored a Touchdown",h))(gI||{}),Ki=class n{constructor(){}statCategories=["Yards Gained","Tackles","Penalties","Completions","Passes Attempted","TDs","FGs Made","FGs Missed"];teams=[];teamData=b(ce);matchService=b(it);playerService=b(Ae);onInit(){this.teams=this.teamData.teams.filter(e=>e.sport===0)}playDescriptionBuilderAssist(e,t,r,i){let o=this.playDescriptionBuilder(e,t,i);return o+=", assisted by "+r.firstName+" "+r.lastName,o}playDescriptionBuilder(e,t,r){let i=e.firstName+" "+e.lastName;return i+=" "+r+" "+t.firstName+" "+t.lastName,i}playDescriptionBuilderYardage(e,t,r,i){let o=this.playDescriptionBuilder(e,t,r);return o+=" for"+i+" yards",o}playDescriptionBuilderSolo(e,t){let r=e.firstName+" "+e.lastName;return r+=" "+t,r}footballPlayBuilder(e,t,r,i,o,s,a){let l="";i!=null?a!=null?this.playDescriptionBuilderYardage(r,i,s,a):l=this.playDescriptionBuilder(r,i,s):l=this.playDescriptionBuilderSolo(r,s),(s=="Threw a Pass to"||s=="Threw an Incomplete Pass")&&a!=null&&(r.stats[e.id][4]++,s=="Threw a Pass to"&&(r.stats[e.id][3]++,r.stats[e.id][0]+=a,i.stats[e.id][0]+=a)),s=="Ran the Ball"&&a!=null&&(r.stats[e.id][0]+=a),s=="Scored a Touchdown"&&r.stats[e.id][5]++,s=="Made a Field Goal"&&r.stats[e.id][6]++,s=="Missed a Field Goal"&&r.stats[e.id][7]++,s=="Entered Game"&&(r.currentlyInMatch=!0),s=="Exited Game"&&(r.currentlyInMatch=!1),s=="Tackled"&&r.stats[e.id][1]++,s=="Commited a Penalty"&&r.stats[e.id][2]++;let u={playerActing:r,playerEffected:i,playerAssisting:o,playAction:s,time:t,description:l,yards:a};this.matchService.addPlayToMatch(e,u),this.playerService.updatePlayer(r.id,r),this.playerService.updatePlayer(i.id,i),o!=null&&this.playerService.updatePlayer(o.id,o)}reverseFootballAction(e,t,r){t.playerActing!=null&&(t.yards!=null&&((t.playAction=="Threw a Pass to"||t.playAction=="Threw an Incomplete Pass")&&(t.playerActing.stats[e.id][4]++,t.playAction=="Threw a Pass to"&&(t.playerActing.stats[e.id][3]++,t.playerActing.stats[e.id][0]-=t.yards,t.playerEffected!=null&&(t.playerEffected.stats[e.id][0]-=t.yards))),t.playAction=="Ran the Ball"&&(t.playerActing.stats[e.id][0]-=t.yards)),t.playAction=="Scored a Touchdown"&&t.playerActing.stats[e.id][5]--,t.playAction=="Made a Field Goal"&&t.playerActing.stats[e.id][6]--,t.playAction=="Missed a Field Goal"&&t.playerActing.stats[e.id][7]--,t.playAction=="Entered Game"&&(t.playerActing.currentlyInMatch=!0),t.playAction=="Exited Game"&&(t.playerActing.currentlyInMatch=!1),t.playAction=="Tackled"&&t.playerActing.stats[e.id][1]--,t.playAction=="Commited a Penalty"&&t.playerActing.stats[e.id][2]--),this.matchService.removePlayFromMatch(e,t,r),t.playerActing!=null&&this.playerService.updatePlayer(t.playerActing.id,t.playerActing),t.playerEffected!=null&&this.playerService.updatePlayer(t.playerEffected.id,t.playerEffected),t.playerAssisting!=null&&this.playerService.updatePlayer(t.playerAssisting.id,t.playerAssisting)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var yI=(u=>(u.EnteredGame="Entered Game",u.ExitedGame="Exited Game",u.Serve="Served",u.Kill="Scored a Kill",u.Ace="Scored an Ace",u.Dig="Dug a Ball",u.Receptions="Received a Serve",u.Error="Made an Error",u.Blocked="Blocked a Ball",u))(yI||{}),Qi=class n{statCategories=["Serves","Aces","Kills","Digs","Receptions","Assists","Errors","Solo Blocks","Block Assists"];teams=[];teamData=b(ce);matchService=b(it);playerService=b(Ae);constructor(){}onInit(){this.teams=this.teamData.teams.filter(e=>e.sport===2)}playDescriptionBuilderAssist(e,t,r){let i=this.playDescriptionBuilderSolo(e,r);return i+=", assisted by "+t.firstName+" "+t.lastName,i}playDescriptionBuilder(e,t,r){let i=e.firstName+" "+e.lastName;return i+=" "+r+" "+t.firstName+" "+t.lastName,i}playDescriptionBuilderSolo(e,t){let r=e.firstName+" "+e.lastName;return r+=" "+t,r}volleyballPlayBuilder(e,t,r,i,o,s){let a="";o!=null?(a=this.playDescriptionBuilderAssist(r,o,s),s!="Blocked a Ball"&&o.stats[e.id][5]++):i!=null?a=this.playDescriptionBuilder(r,i,s):a=this.playDescriptionBuilderSolo(r,s),s=="Served"&&r.stats[e.id][0]++,s=="Scored a Kill"&&r.stats[e.id][2]++,s=="Scored an Ace"&&r.stats[e.id][1]++,s=="Dug a Ball"&&r.stats[e.id][3]++,s=="Received a Serve"&&r.stats[e.id][4]++,s=="Made an Error"&&r.stats[e.id][6]++,s=="Blocked a Ball"&&(o!=null?(r.stats[e.id][8]++,o.stats[e.id][8]++):r.stats[e.id][7]++);let l={playerActing:r,playerEffected:i,playerAssisting:o,playAction:s,time:t,description:a};this.matchService.addPlayToMatch(e,l),this.playerService.updatePlayer(r.id,r),this.playerService.updatePlayer(i.id,i),o!=null&&this.playerService.updatePlayer(o.id,o)}reverseVolleyballAction(e,t,r){t.playerAssisting!=null&&t.playAction!="Blocked a Ball"&&t.playerAssisting.stats[e.id][5]--,t.playerActing!=null&&(t.playAction=="Served"&&t.playerActing.stats[e.id][0]--,t.playAction=="Scored a Kill"&&t.playerActing.stats[e.id][2]++,t.playAction=="Scored an Ace"&&t.playerActing.stats[e.id][1]++,t.playAction=="Dug a Ball"&&t.playerActing.stats[e.id][3]++,t.playAction=="Received a Serve"&&t.playerActing.stats[e.id][4]++,t.playAction=="Made an Error"&&t.playerActing.stats[e.id][6]++,t.playAction=="Blocked a Ball"&&(t.playerAssisting!=null?(t.playerActing.stats[e.id][8]++,t.playerAssisting.stats[e.id][8]++):t.playerActing.stats[e.id][7]++)),this.matchService.removePlayFromMatch(e,t,r),t.playerActing!=null&&this.playerService.updatePlayer(t.playerActing.id,t.playerActing),t.playerEffected!=null&&this.playerService.updatePlayer(t.playerEffected.id,t.playerEffected),t.playerAssisting!=null&&this.playerService.updatePlayer(t.playerAssisting.id,t.playerAssisting)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yi=(s=>(s.TEAM1_OBJ="/ATK_OBJ.png",s.TEAM1_KILL="/ATK_KILL.png",s.TEAM1_TIME="/ATK_TIME.png",s.TEAM2_OBJ="/DEF_OBJ.png",s.TEAM2_KILL="/DEF_KILL.png",s.TEAM2_TIME="/DEF_TIME.png",s))(Yi||{});var Na=(o=>(o.Killed="Killed",o.Headshot="Headshot",o.Revived="Revived",o.Planted="Planted/Disabled the Defuser",o.Clutch="Clutched",o))(Na||{}),vn=class n{statCategories=["Kills","Deaths","Assists","Objective Plays","Rounds Survied","Trades","Revives","Clutches","K/D","HS%"];teams=[];teamService=b(ce);matchService=b(it);playerService=b(Ae);constructor(){}onInit(){this.teamService.getTeams().subscribe(e=>this.teams=e.filter(t=>t.sport===3))}playDescriptionBuilderAssist(e,t,r,i){let o=this.playDescriptionBuilder(e,t,i);return o+=", assisted by "+r.firstName+" "+r.lastName,o}playDescriptionBuilder(e,t,r){let i=e.firstName+" "+e.lastName;return i+=" "+r+" "+t.firstName+" "+t.lastName,i}playDescriptionBuilderSolo(e,t){let r=e.firstName+" "+e.lastName;return r+=" "+t,r}siegePlayBuilder(e,t,r,i,o,s,a){let l="";o!=null?(l=this.playDescriptionBuilderAssist(r,i,o,s),o.stats[e.id][2]++):i!=null?l=this.playDescriptionBuilder(r,i,s):l=this.playDescriptionBuilderSolo(r,s),(s=="Killed"||s=="Headshot")&&(r.stats[e.id][0]++,i.stats[e.id][1]++,a&&r.stats[e.id][5]++,s=="Headshot"&&r.stats[e.id][10]++),s=="Revived"&&r.stats[e.id][6]++,s=="Planted/Disabled the Defuser"&&r.stats[e.id][3]++,s=="Clutched"&&r.stats[e.id][7]++;let u={playerActing:r,playerEffected:i,playerAssisting:o,playAction:s,time:t,description:l};this.matchService.addPlayToMatch(e,u),this.playerService.updatePlayer(r.id,r),this.playerService.updatePlayer(i.id,i),o!=null&&this.playerService.updatePlayer(o.id,o)}reverseSiegeAction(e,t,r){t.playerAssisting!=null&&t.playerAssisting.stats[e.id][2]--,t.playerActing!=null&&(t.playerEffected!=null&&((t.playAction=="Killed"||t.playAction=="Headshot")&&(t.playerActing.stats[e.id][0]--,t.playerEffected.stats[e.id][1]--),t.playAction=="Headshot"&&t.playerActing.stats[e.id][10]--,t.playAction=="Revived"&&t.playerActing.stats[e.id][6]--),t.playAction=="Clutched"&&t.playerActing.stats[e.id][7]--,t.playAction=="Planted/Disabled the Defuser"&&t.playerActing.stats[e.id][3]--),this.matchService.removePlayFromMatch(e,t,r),t.playerActing!=null&&this.playerService.updatePlayer(t.playerActing.id,t.playerActing),t.playerEffected!=null&&this.playerService.updatePlayer(t.playerEffected.id,t.playerEffected),t.playerAssisting!=null&&this.playerService.updatePlayer(t.playerAssisting.id,t.playerAssisting)}setSiegeRoundResult(e,t){e.quarterOrRoundResults[e.quarterOrRound-1].result=t,t=="/ATK_OBJ.png"||t=="/ATK_KILL.png"||t=="/ATK_TIME.png"?(e.quarterOrRoundResults[e.quarterOrRound-1].team1Score=1,e.quarterOrRoundResults[e.quarterOrRound-1].team2Score=0):(t=="/DEF_OBJ.png"||t=="/DEF_KILL.png"||t=="/DEF_TIME.png")&&(e.quarterOrRoundResults[e.quarterOrRound-1].team1Score=0,e.quarterOrRoundResults[e.quarterOrRound-1].team2Score=1),this.matchService.updateMatch(e.id,e)}calculateStats(e,t){let r=e.stats[t.id][1];e.stats[t.id][4]=t.quarterOrRoundResults.length-r,e.stats[t.id][1]==0?e.stats[t.id][8]=e.stats[t.id][0]:e.stats[t.id][8]=Number(Number(e.stats[t.id][0])/Number(e.stats[t.id][1])),e.stats[t.id][10]==0?e.stats[t.id][9]=0:e.stats[t.id][9]=e.stats[t.id][10]/e.stats[t.id][0]*100,this.playerService.updatePlayer(e.id,e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var aM=(n,e,t)=>["/view-player",n,e,t],cM=(n,e,t)=>["/edit-player",n,e,t],Cq=(n,e)=>["/add-player-roster",n,e];function bq(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t)}}function Tq(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t)}}function Sq(n,e){if(n&1&&(f(0,"a",4),g(1,"Edit"),p()),n&2){let t=D(2).$implicit,r=D();W("routerLink",ar(1,cM,r.team.sport,r.team.id,t.id))}}function Dq(n,e){if(n&1&&(f(0,"tr",3)(1,"td"),g(2),p(),J(3,Tq,2,1,"td",null,_e),f(5,"td"),K(6,Sq,2,5,"a",4),f(7,"a",4),g(8,"View"),p()()()),n&2){let t=D().$implicit,r=D();_(2),De("",t.firstName," ",t.lastName,""),_(),X(r.getAverages(t)),_(3),$(r.authService.token=="true"?6:-1),_(),W("routerLink",ar(4,aM,r.team.sport,r.team.id,t.id))}}function Aq(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t)}}function xq(n,e){if(n&1&&(f(0,"a",4),g(1,"Edit"),p()),n&2){let t=D(2).$implicit,r=D();W("routerLink",ar(1,cM,r.team.sport,r.team.id,t.id))}}function Rq(n,e){if(n&1&&(f(0,"tr")(1,"td"),g(2),p(),J(3,Aq,2,1,"td",null,_e),f(5,"td"),K(6,xq,2,5,"a",4),f(7,"a",4),g(8,"View"),p()()()),n&2){let t=D().$implicit,r=D();_(2),De("",t.firstName," ",t.lastName,""),_(),X(r.getAverages(t)),_(3),$(r.authService.token=="true"?6:-1),_(),W("routerLink",ar(4,aM,r.team.sport,r.team.id,t.id))}}function Mq(n,e){if(n&1&&K(0,Dq,9,8,"tr",3)(1,Rq,9,8,"tr"),n&2){let t=e.$index;$(t%2==0?0:1)}}function Pq(n,e){if(n&1&&(f(0,"a",2),g(1,"Add to Roster"),p()),n&2){let t=D();W("routerLink",tt(1,Cq,t.team.sport,t.team.id))}}var Ep=class n{teamService=b(ce);playerService=b(Ae);authService=b($e);bb=b(Wi);fb=b(Ki);vb=b(Qi);rss=b(vn);teamId;team;players;sport;categories;getAverages(e){return this.playerService.calculateAvg(e,this.team)}ngOnInit(){console.log(this.teamId),this.teamService.getTeam(this.teamId).subscribe(e=>this.team=e),this.playerService.getPlayers().subscribe(e=>this.players=e.filter(t=>t.teams.includes(this.teamId))),this.sport=this.team.sport,console.log(this.team.sport),this.sport==1&&(this.categories=this.bb.statCategories),this.sport==2&&(this.categories=this.vb.statCategories),this.sport==0&&(this.categories=this.fb.statCategories),this.sport==3&&(this.categories=this.rss.statCategories)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-team-roster"]],inputs:{teamId:"teamId"},decls:12,vars:1,consts:[[1,"row"],[1,"text-center"],[1,"btn","btn-primary",3,"routerLink"],[2,"background-color","lightgrey"],[1,"btn","btn-primary",2,"float","right",3,"routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"table")(2,"tr")(3,"td"),g(4,"Name"),p(),J(5,bq,2,1,"td",null,_e),Y(7,"td"),p(),J(8,Mq,2,1,null,null,_e),p()(),f(10,"div",1),K(11,Pq,2,4,"a",2),p()),t&2&&(_(5),X(r.categories),_(3),X(r.players),_(3),$(r.authService.token=="true"?11:-1))},dependencies:[je],styles:["td[_ngcontent-%COMP%]{font-size:small}table[_ngcontent-%COMP%]{table-layout:fixed}.spec[_ngcontent-%COMP%]{margin:1rem}"]})};var lM=n=>["/game-view",n],Nq=(n,e)=>["/add-match-schedule",n,e];function kq(n,e){n&1&&(f(0,"td"),g(1,"TBD"),p())}function Oq(n,e){n&1&&(f(0,"td"),g(1,"TIE"),p())}function Fq(n,e){n&1&&(f(0,"td",5),g(1,"W"),p())}function Vq(n,e){n&1&&(f(0,"td",6),g(1,"L"),p())}function Lq(n,e){if(n&1&&(f(0,"tr",3)(1,"td")(2,"a",4),g(3),p()(),f(4,"td"),g(5),p(),f(6,"td"),g(7),p(),f(8,"td"),g(9),p(),f(10,"td"),g(11),p(),K(12,kq,2,0,"td")(13,Oq,2,0,"td")(14,Fq,2,0,"td",5)(15,Vq,2,0,"td",6),p()),n&2){let t=D().$implicit,r=D();_(2),W("routerLink",rn(12,lM,t.id)),_(),Ii("",t.date.toDate().getMonth()+1,"/",t.date.toDate().getDate(),"/",t.date.toDate().getFullYear(),""),_(2),z(r.getAgainst(t)),_(2),z(r.homeOrAway(t)),_(2),z(r.displayScore(t)),_(2),z(r.getStatus(t)),_(),$(r.getResult(t)=="TBD"?12:-1),_(),$(r.getResult(t)=="TIE"?13:-1),_(),$(r.getResult(t)=="W"?14:-1),_(),$(r.getResult(t)=="L"?15:-1)}}function jq(n,e){n&1&&(f(0,"td"),g(1,"TBD"),p())}function Bq(n,e){n&1&&(f(0,"td"),g(1,"TIE"),p())}function Uq(n,e){n&1&&(f(0,"td",5),g(1,"W"),p())}function $q(n,e){n&1&&(f(0,"td",6),g(1,"L"),p())}function Hq(n,e){if(n&1&&(f(0,"tr")(1,"td")(2,"a",4),g(3),p()(),f(4,"td"),g(5),p(),f(6,"td"),g(7),p(),f(8,"td"),g(9),p(),f(10,"td"),g(11),p(),K(12,jq,2,0,"td")(13,Bq,2,0,"td")(14,Uq,2,0,"td",5)(15,$q,2,0,"td",6),p()),n&2){let t=D().$implicit,r=D();_(2),W("routerLink",rn(12,lM,t.id)),_(),Ii("",t.date.toDate().getMonth()+1,"/",t.date.toDate().getDate(),"/",t.date.toDate().getFullYear(),""),_(2),z(r.getAgainst(t)),_(2),z(r.homeOrAway(t)),_(2),z(r.displayScore(t)),_(2),z(r.getStatus(t)),_(),$(r.getResult(t)=="TBD"?12:-1),_(),$(r.getResult(t)=="TIE"?13:-1),_(),$(r.getResult(t)=="W"?14:-1),_(),$(r.getResult(t)=="L"?15:-1)}}function qq(n,e){if(n&1&&K(0,Lq,16,14,"tr",3)(1,Hq,16,14,"tr"),n&2){let t=e.$index;$(t%2==0?0:1)}}function zq(n,e){if(n&1&&(f(0,"a",2),g(1,"Add Match"),p()),n&2){let t=D();W("routerLink",tt(1,Nq,t.team.sport,t.team.id))}}var Ip=class n{matchService=b(it);teamService=b(ce);authService=b($e);matches;teams1=[];teams2=[];teamId;team;homeOrAway(e){return e.team1ID==this.teamId?"Home":"Away"}getAgainst(e){if(e.team2ID==this.teamId){for(let t of this.teams1)if(t.id=e.team1ID)return t.name}else for(let t of this.teams2)if(t.id=e.team2ID)return t.name;return"not found"}getAgainstTeam(e){if(e.team2ID==this.teamId){for(let t of this.teams1)if(t.id=e.team1ID)return t}else for(let t of this.teams2)if(t.id=e.team2ID)return t;return this.teams1[0]}displayScore(e){return e.team1ID==this.teamId?e.team1Score.toString()+"-"+e.team2Score.toString():e.team2Score.toString()+"-"+e.team1Score.toString()}getResult(e){return e.hasFinished==!1?"TBD":e.team1Score==e.team2Score?"TIE":e.team1ID==this.teamId?e.team1Score>e.team2Score?"W":"L":e.team2Score>e.team1Score?"W":"L"}getStatus(e){return e.hasFinished?"Completed":e.hasStarted?"In Progress":"Scheduled"}ngOnInit(){this.matchService.getMatches().subscribe(e=>{this.teamService.getTeam(this.teamId).subscribe(t=>this.team=t),this.matches=e.filter(t=>t.team1ID==this.teamId||t.team2ID==this.teamId).sort((t,r)=>r.date.toDate().getTime()-t.date.toDate().getTime());for(let t of this.matches)this.teamService.getTeam(t.team1ID).subscribe(r=>{this.teams1.push(r)}),this.teamService.getTeam(t.team2ID).subscribe(r=>{this.teams2.push(r)})})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-team-schedule"]],inputs:{teamId:"teamId"},decls:19,vars:1,consts:[[1,"row"],[1,"text-center"],[1,"btn","btn-primary",3,"routerLink"],[2,"background-color","lightgrey"],[3,"routerLink"],[2,"color","green"],[2,"color","red"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"table")(2,"tr")(3,"td"),g(4,"Date"),p(),f(5,"td"),g(6,"Against"),p(),f(7,"td"),g(8,"At"),p(),f(9,"td"),g(10,"Score"),p(),f(11,"td"),g(12,"Status"),p(),f(13,"td"),g(14,"Result"),p()(),J(15,qq,2,1,null,null,_e),p()(),f(17,"div",1),K(18,zq,2,4,"a",2),p()),t&2&&(_(15),X(r.matches),_(3),$(r.authService.token=="true"?18:-1))},dependencies:[je],styles:["table[_ngcontent-%COMP%]{table-layout:fixed}.btn[_ngcontent-%COMP%]{margin-top:2rem}"]})};var Gq=n=>["/edit-team",n];function Wq(n,e){if(n&1&&(f(0,"button",2),g(1,"Edit Team"),p()),n&2){let t=D();W("routerLink",rn(1,Gq,t.team.id))}}var wp=class n{teamId;teamService=b(ce);authService=b($e);team;getSport(e){return e.sport==1?"Basketball":e.sport==2?"Volleyball":e.sport==0?"Football":e.sport==3?"Rainbow Six Siege":"Not Found"}ngOnInit(){this.teamService.getTeam(this.teamId).subscribe(e=>this.team=e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-team-header"]],inputs:{teamId:"teamId"},decls:12,vars:5,consts:[[1,"row"],[1,"col-sm-10"],[1,"btn","btn-primary",2,"margin-top","2rem",3,"routerLink"]],template:function(t,r){t&1&&(f(0,"div",0),Y(1,"td",1),f(2,"td")(3,"h2"),g(4),p(),f(5,"h2"),g(6),p(),f(7,"h2"),g(8),p(),f(9,"h2"),g(10),p()()(),K(11,Wq,2,3,"button",2)),t&2&&(_(4),Ve("Sport: ",r.getSport(r.team),""),_(2),Ve("League: ",r.team.leagueSubsection,""),_(2),Ve("Wins: ",r.team.wins,""),_(2),Ve("Losses: ",r.team.losses,""),_(),$(r.authService.token=="true"?11:-1))},dependencies:[je],styles:[".img[_ngcontent-%COMP%]{height:5rem;width:auto}"]})};function Kq(n,e){if(n&1&&Y(0,"app-team-header",5),n&2){let t=D();W("teamId",t.team.id)}}function Qq(n,e){if(n&1&&Y(0,"app-team-roster",5),n&2){let t=D();W("teamId",t.team.id)}}function Yq(n,e){if(n&1&&Y(0,"app-team-schedule",5),n&2){let t=D();W("teamId",t.team.id)}}var Cp=class n{sportId=Ge.required();teamId=Ge.required();team;teamService=b(ce);authService=b($e);focus="info";allTeams;changeFocus(e){this.focus=e}ngOnInit(){this.teamService.getTeam(this.teamId()).subscribe(e=>this.team=e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-team-view"]],inputs:{sportId:[1,"sportId"],teamId:[1,"teamId"]},decls:18,vars:10,consts:[[1,"container"],[1,"containerA"],[1,"icon",3,"src","alt"],[1,"row"],[1,"btn","btn-secondary",3,"click"],[3,"teamId"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1),Y(2,"img",2),f(3,"h1"),g(4),p(),f(5,"h3"),g(6),p()(),f(7,"div",3)(8,"button",4),O("click",function(){return r.changeFocus("info")}),g(9,"Info"),p(),f(10,"button",4),O("click",function(){return r.changeFocus("roster")}),g(11,"Roster"),p(),f(12,"button",4),O("click",function(){return r.changeFocus("schedule")}),g(13,"Schedule"),p()(),f(14,"div",3),K(15,Kq,1,1,"app-team-header",5)(16,Qq,1,1,"app-team-roster",5)(17,Yq,1,1,"app-team-schedule",5),p()()),t&2&&(_(2),Ei("alt","",r.team.name,"'s Logo"),W("src",r.team.logoUrl,dt),_(2),z(r.team.name),_(2),Ii("",r.team.wins," -",r.team.losses," - ",r.team.draws,""),_(9),$(r.focus=="info"?15:-1),_(),$(r.focus=="roster"?16:-1),_(),$(r.focus=="schedule"?17:-1))},dependencies:[Ep,Ip,wp,ut],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.btn[_ngcontent-%COMP%]{float:left;width:6rem}.custom-badge[_ngcontent-%COMP%]{height:150px;width:150px;margin-right:10px}.custom-ico[_ngcontent-%COMP%]{height:50px;width:50px;margin-right:10px}.icon[_ngcontent-%COMP%]{width:100px;height:100px}"]})};var Zq=(n,e)=>["/team-view",n,e],Jq=n=>["/create-team",n];function Xq(n,e){if(n&1&&(f(0,"tr")(1,"td")(2,"a",11),Y(3,"img",12),g(4),p()(),f(5,"td"),g(6),p(),f(7,"td"),g(8),p(),f(9,"td"),g(10),p(),f(11,"td"),g(12),p()()),n&2){let t=e.$implicit;_(2),W("routerLink",tt(7,Zq,t.sport,t.id)),_(),W("src",t.logoUrl,dt),_(),Ve("",t.name," "),_(2),z(t.wins),_(2),z(t.draws),_(2),z(t.losses),_(2),z(t.leagueSubsection)}}function ez(n,e){if(n&1&&(f(0,"button",10),g(1,"Create team"),p()),n&2){let t=D();W("routerLink",rn(1,Jq,t.sp))}}var bp=class n{teamService=b(ce);sportsService=b(wr);authService=b($e);sp;id;sportInfo;sportTeams;ngOnInit(){this.sportInfo=this.sportsService.getSportInfo(this.sp),this.teamService.getTeams().subscribe(e=>this.sportTeams=e.filter(t=>t.sport==this.sp))}ngOnDestroy(){console.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-sports-home"]],inputs:{sp:"sp",id:"id"},decls:30,vars:3,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"container","text-center",2,"margin-top","20px"],[1,"text-start",2,"margin-bottom","30px"],[1,"text-start"],[1,"table","table-striped","table-hover"],[1,"table-success"],["scope","col"],[1,"table-group-divider"],[1,"btn","btn-primary",3,"routerLink"],[1,"link-offset-2","link-offset-3-hover","link-underline","link-underline-opacity-0","link-underline-opacity-75-hover","link-dark",3,"routerLink"],["alt","",1,"custom-ico","img-fluid","img-thumbnail","rounded","thumbnail-bg",3,"src"]],template:function(t,r){t&1&&(f(0,"html",0)(1,"head"),Y(2,"meta",1)(3,"meta",2),p(),f(4,"body")(5,"div",3)(6,"div",4)(7,"h2"),g(8),p(),Y(9,"hr"),p(),f(10,"h4"),g(11),p(),f(12,"div",5)(13,"table",6)(14,"thead",7)(15,"tr")(16,"th",8),g(17,"Teams"),p(),f(18,"th",8),g(19,"Win"),p(),f(20,"th",8),g(21,"Draw"),p(),f(22,"th",8),g(23,"Loss"),p(),f(24,"th",8),g(25,"League"),p()()(),f(26,"tbody",9),J(27,Xq,13,10,"tr",null,_e),p()()(),K(29,ez,2,3,"button",10),p()()()),t&2&&(_(8),z(r.sportInfo[0].name),_(3),Ve("",r.sportInfo[0].name," Standings"),_(16),X(r.sportTeams),_(2),$(r.authService.token=="true"?29:-1))},dependencies:[je],styles:[".custom-ico[_ngcontent-%COMP%]{height:50px;width:50px;margin-right:10px}"]})};var vI=(n,e)=>["/team-view",n,e],tz=(n,e)=>["/create-player",n,e];function nz(n,e){if(n&1){let t=et();f(0,"td")(1,"a",6),O("click",function(){B(t);let i=D(2).$implicit,o=D();return U(o.onConfirm(i))}),g(2,"Add"),p()()}if(n&2){let t=D(3);_(),W("routerLink",tt(1,vI,t.team.sport,t.teamId()))}}function rz(n,e){if(n&1&&(f(0,"tr",5)(1,"td"),g(2),p(),K(3,nz,3,4,"td"),p()),n&2){let t=D().$implicit,r=D();_(2),De("",t.firstName," ",t.lastName,""),_(),$(r.authService.token=="true"?3:-1)}}function iz(n,e){if(n&1){let t=et();f(0,"td")(1,"a",6),O("click",function(){B(t);let i=D(2).$implicit,o=D();return U(o.onConfirm(i))}),g(2,"Add"),p()()}if(n&2){let t=D(3);_(),W("routerLink",tt(1,vI,t.team.sport,t.teamId()))}}function oz(n,e){if(n&1&&(f(0,"tr")(1,"td"),g(2),p(),K(3,iz,3,4,"td"),p()),n&2){let t=D().$implicit,r=D();_(2),De("",t.firstName," ",t.lastName,""),_(),$(r.authService.token=="true"?3:-1)}}function sz(n,e){if(n&1&&K(0,rz,4,3,"tr",5)(1,oz,4,3,"tr"),n&2){let t=e.$index;$(t%2==0?0:1)}}function az(n,e){if(n&1&&(f(0,"button",4),g(1,"Create Player"),p()),n&2){let t=D();W("routerLink",tt(1,tz,t.team.sport,t.teamId()))}}var Tp=class n{teamId=Ge.required();teamService=b(ce);playerService=b(Ae);authService=b($e);team;playersFiltered;playersToAdd;onConfirm(e){console.log(e.firstName),this.teamService.playerJoin(e,this.team),this.playerService.joinTeam(e,this.team)}ngOnInit(){this.teamService.getTeam(this.teamId()).subscribe(e=>this.team=e),this.playerService.getPlayers().subscribe(e=>this.playersFiltered=e.filter(t=>!t.teams.includes(this.teamId())))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-add-player-roster"]],inputs:{teamId:[1,"teamId"]},decls:16,vars:7,consts:[[1,"container"],[1,"containerA"],[1,"row"],[1,"container","text-center"],[1,"btn","btn-primary","spec",3,"routerLink"],[2,"background-color","lightgrey"],[1,"btn","btn-success",2,"float","right",3,"click","routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3),p()(),f(4,"div",2)(5,"table")(6,"tr")(7,"td"),g(8,"Name"),p(),Y(9,"td"),p(),J(10,sz,2,1,null,null,_e),p()(),f(12,"div",3),K(13,az,2,4,"button",4),f(14,"button",4),g(15,"Cancel"),p()()()),t&2&&(_(3),De("Add Players to ",r.team.name," ",r.team.id,""),_(7),X(r.playersFiltered),_(3),$(r.authService.token=="true"?13:-1),_(),W("routerLink",tt(4,vI,r.team.sport,r.teamId())))},dependencies:[je],styles:[".spec[_ngcontent-%COMP%]{margin:1rem}.containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}"]})};function cz(n,e){if(n&1&&(f(0,"th",4),g(1),p()),n&2){let t=e.$implicit;_(),z(t)}}function lz(n,e){if(n&1&&(f(0,"td",4),g(1),p()),n&2){let t=D().$implicit;_(),z(t)}}function uz(n,e){if(n&1&&K(0,lz,2,1,"td",4),n&2){let t=e.$index,r=D(2);$(t<r.categories.length?0:-1)}}function dz(n,e){if(n&1&&(f(0,"tr")(1,"td",4),g(2),p(),J(3,uz,1,1,null,null,_e),p()),n&2){let t=e.$implicit,r=D();_(2),De("",t.firstName[0],". ",t.lastName,""),_(),X(t.stats[r.matchID])}}function hz(n,e){if(n&1&&(f(0,"th",4),g(1),p()),n&2){let t=e.$implicit;_(),z(t)}}function fz(n,e){if(n&1&&(f(0,"td",4),g(1),p()),n&2){let t=D().$implicit;_(),z(t)}}function pz(n,e){if(n&1&&K(0,fz,2,1,"td",4),n&2){let t=e.$index,r=D(2);$(t<r.categories.length?0:-1)}}function mz(n,e){if(n&1&&(f(0,"tr")(1,"td",4),g(2),p(),J(3,pz,1,1,null,null,_e),p()),n&2){let t=e.$implicit,r=D();_(2),De("",t.firstName[0],". ",t.lastName,""),_(),X(t.stats[r.matchID])}}var ka=class n{categories=[];matchID;match;team1;team2;team1Players;team2Players;constructor(){}siegeService=b(vn);footballService=b(Ki);volleyballService=b(Qi);basketballService=b(Wi);teamService=b(ce);matchService=b(it);playerService=b(Ae);ngOnInit(){this.matchService.getMatchById(this.matchID).subscribe(e=>{this.match=e,this.teamService.getTeam(this.match.team1ID).subscribe(t=>{this.team1=t,this.playerService.getPlayers().subscribe(r=>this.team1Players=r.filter(i=>i.teams.includes(this.team1.id))),this.setCategories(this.team1.sport)}),this.teamService.getTeam(this.match.team2ID).subscribe(t=>{this.team2=t,this.playerService.getPlayers().subscribe(r=>this.team2Players=r.filter(i=>i.teams.includes(this.team2.id)))})})}setCategories(e){switch(e){case 3:this.categories=this.siegeService.statCategories;break;case 0:this.categories=this.footballService.statCategories;break;case 2:this.categories=this.volleyballService.statCategories;break;case 1:this.categories=this.basketballService.statCategories;break;default:this.categories=[]}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-game-statistics"]],inputs:{matchID:"matchID"},decls:26,vars:2,consts:[[1,"container-fluid"],[1,"row",2,"background-color","lightgrey","margin-bottom","2rem"],[1,"col-md-6"],[1,"table"],["scope","col"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),g(4),p(),f(5,"table",3)(6,"thead")(7,"tr")(8,"th"),g(9,"Name"),p(),J(10,cz,2,1,"th",4,ft),p(),J(12,dz,5,2,"tr",null,ft),p()()(),f(14,"div",2)(15,"h2"),g(16),p(),f(17,"table",3)(18,"thead")(19,"tr")(20,"th"),g(21,"Name"),p(),J(22,hz,2,1,"th",4,ft),p(),J(24,mz,5,2,"tr",null,ft),p()()()()()),t&2&&(_(4),z(r.team1.name),_(6),X(r.categories),_(2),X(r.team1Players),_(4),z(r.team2.name),_(6),X(r.categories),_(2),X(r.team2Players))},styles:[".table[_ngcontent-%COMP%]{margin-top:1rem}.text-center[_ngcontent-%COMP%]{text-align:center}"]})};var Oa=class n{transform(e){if(isNaN(e))return"00:00";e=Math.abs(e);let t=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60,o=t>0?String(t).padStart(2,"0")+":":"",s=String(r).padStart(2,"0"),a=String(i).padStart(2,"0");return`${o}${s}:${a}`}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=My({name:"secondsToTime",type:n,pure:!0})};var gz=n=>["/game-play-entry",n];function yz(n,e){if(n&1&&(f(0,"td",13),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function vz(n,e){if(n&1&&(f(0,"td",14),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function _z(n,e){if(n&1&&(f(0,"tr"),K(1,yz,2,2,"td",13)(2,vz,2,2,"td",14),p()),n&2){let t=e.$implicit;_(),$(t.currentlyInMatch?1:2)}}function Ez(n,e){if(n&1&&(f(0,"table",5)(1,"thead")(2,"tr")(3,"h2"),g(4),p()()(),f(5,"tbody"),J(6,_z,3,1,"tr",null,ft),p()()),n&2){let t=D();_(4),z(t.team1.name),_(2),X(t.team1Players)}}function Iz(n,e){n&1&&(f(0,"h1"),g(1,"Upcoming"),p())}function wz(n,e){n&1&&(f(0,"h3",6),g(1,"Final"),p())}function Cz(n,e){}function bz(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(2);_(),De("Round ",t.match.quarterOrRound," - ",sn(2,2,t.match.timeRemaining),"")}}function Tz(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("1st Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function Sz(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("2nd Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function Dz(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("3rd Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function Az(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("4th Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function xz(n,e){if(n&1&&K(0,Tz,3,3,"h3")(1,Sz,3,3,"h3")(2,Dz,3,3,"h3")(3,Az,3,3,"h3"),n&2){let t=D(3);$(t.match.quarterOrRound==1?0:t.match.quarterOrRound==2?1:t.match.quarterOrRound==2?2:3)}}function Rz(n,e){if(n&1&&K(0,xz,4,1),n&2){let t=D(2);$(t.sportEnum.Basketball||t.sportEnum.Football?0:-1)}}function Mz(n,e){if(n&1&&(f(0,"h1",15),g(1),p(),K(2,Cz,0,0)(3,bz,3,4,"h3")(4,Rz,1,1)),n&2){let t,r=D();_(),De("",r.match.team1Score," - ",r.match.team2Score,""),_(),$((t=r.team1.sport)===r.sportEnum.Volleyball?2:t===r.sportEnum.RainbowSixSiege?3:4)}}function Pz(n,e){if(n&1&&(f(0,"tr")(1,"td",13),g(2),p(),f(3,"td",13),g(4),on(5,"secondsToTime"),p()()),n&2){let t=e.$implicit;_(2),z(t.description),_(2),z(sn(5,2,t.time))}}function Nz(n,e){if(n&1&&J(0,Pz,6,4,"tr",null,ft),n&2){let t=e.$implicit;X(t.plays)}}function kz(n,e){if(n&1&&(f(0,"div",8)(1,"table",16)(2,"thead")(3,"tr")(4,"th"),g(5,"Play"),p(),f(6,"th"),g(7,"Time"),p()()(),f(8,"tbody"),J(9,Nz,2,0,null,null,_e),p()()()),n&2){let t=D();_(9),X(t.match.quarterOrRoundResults)}}function Oz(n,e){if(n&1&&(f(0,"button",9),g(1,"Edit"),p()),n&2){let t=D();W("routerLink",rn(1,gz,t.match.id))}}function Fz(n,e){if(n&1&&(f(0,"td",13),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function Vz(n,e){if(n&1&&(f(0,"td",14),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function Lz(n,e){if(n&1&&(f(0,"tr"),K(1,Fz,2,2,"td",13)(2,Vz,2,2,"td",14),p()),n&2){let t=e.$implicit;_(),$(t.currentlyInMatch?1:2)}}function jz(n,e){if(n&1&&(f(0,"table",5)(1,"thead")(2,"tr")(3,"h2"),g(4),p()(),J(5,Lz,3,1,"tr",null,ft),p()()),n&2){let t=D();_(4),z(t.team2.name),_(),X(t.team2Players)}}function Bz(n,e){if(n&1&&(f(0,"th",19),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function Uz(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function $z(n,e){if(n&1&&K(0,Bz,2,1,"th",19)(1,Uz,2,1,"th"),n&2){let t=e.$index;$(t%12>=6||t==13?0:1)}}function Hz(n,e){if(n&1&&(f(0,"td",14),Y(1,"img",20),p()),n&2){let t=D().$implicit;_(),pn("src",t.result,dt)}}function qz(n,e){if(n&1&&(f(0,"td",13),Y(1,"img",20),p()),n&2){let t=D().$implicit;_(),pn("src",t.result,dt)}}function zz(n,e){if(n&1&&K(0,Hz,2,1,"td",14)(1,qz,2,1,"td",13),n&2){let t=e.$index;$(t%12>=6||t==13?0:1)}}function Gz(n,e){if(n&1&&(f(0,"h2",17),g(1,"Round History"),p(),f(2,"table",18)(3,"thead")(4,"tr"),J(5,$z,2,1,null,null,_e),p()(),f(7,"tbody")(8,"tr"),J(9,zz,2,1,null,null,_e),p()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(4),X(t.match.quarterOrRoundResults)}}function Wz(n,e){if(n&1&&(f(0,"th",22),g(1),p()),n&2){let t=D().$index;_(),Ve("",t+1," - Active")}}function Kz(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function Qz(n,e){if(n&1&&K(0,Wz,2,1,"th",22)(1,Kz,2,1,"th"),n&2){let t=e.$index,r=D(2);$(t+1==r.match.quarterOrRound?0:1)}}function Yz(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team1Score)}}function Zz(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team2Score)}}function Jz(n,e){if(n&1&&(f(0,"h2",17),g(1,"Score by Set"),p(),f(2,"table",21)(3,"thead")(4,"tr"),J(5,Qz,2,1,null,null,_e),f(7,"th",19),g(8,"Total"),p()()(),f(9,"tbody")(10,"tr"),J(11,Yz,2,1,"td",null,_e),f(13,"td",19),g(14),p()(),f(15,"tr"),J(16,Zz,2,1,"td",null,_e),f(18,"td",19),g(19),p()()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(6),X(t.match.quarterOrRoundResults),_(3),z(t.match.team1Score),_(2),X(t.match.quarterOrRoundResults),_(3),z(t.match.team2Score)}}function Xz(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function eG(n,e){n&1&&(f(0,"th"),g(1,"OT"),p())}function tG(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),Ve("OT ",t-3,"")}}function nG(n,e){if(n&1&&K(0,Xz,2,1,"th")(1,eG,2,0,"th")(2,tG,2,1,"th"),n&2){let t=e.$index;$(t+1<=4?0:t+1==5?1:2)}}function rG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team1Score)}}function iG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team2Score)}}function oG(n,e){if(n&1&&(f(0,"h2",17),g(1,"Score by Quarter"),p(),f(2,"table",21)(3,"thead")(4,"tr"),J(5,nG,3,1,null,null,_e),f(7,"th",19),g(8,"Total"),p()()(),f(9,"tbody")(10,"tr"),J(11,rG,2,1,"td",null,_e),f(13,"td",19),g(14),p()(),f(15,"tr"),J(16,iG,2,1,"td",null,_e),f(18,"td",19),g(19),p()()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(6),X(t.match.quarterOrRoundResults),_(3),z(t.match.team1Score),_(2),X(t.match.quarterOrRoundResults),_(3),z(t.match.team2Score)}}var Sp=class n{categories=[];matchID=Ge.required();match;team1;team2;team1Players;team2Players;sportEnum=Et;constructor(){}siegeService=b(vn);teamService=b(ce);matchService=b(it);firestore=b(xn);playerService=b(Ae);authService=b($e);ngOnInit(){this.categories=this.siegeService.statCategories,this.matchService.getMatchById(this.matchID()).subscribe(e=>{this.match=e,console.log(this.match),this.teamService.getTeam(this.match.team1ID).subscribe(t=>{this.team1=t,this.playerService.getPlayers().subscribe(r=>{this.team1Players=r.filter(i=>i.teams.includes(this.team1.id))})}),this.teamService.getTeam(this.match.team2ID).subscribe(t=>{this.team2=t,this.playerService.getPlayers().subscribe(r=>this.team2Players=r.filter(i=>i.teams.includes(this.team2.id)))})})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-game-view"]],inputs:{matchID:[1,"matchID"]},decls:25,vars:11,consts:[[1,"container-fluid"],[1,"row","justify-content-md-center"],[1,"col-md-auto","text-center"],[1,"row"],[1,"col-md-4","text-center"],[1,"table","team-table","table-bordered"],[2,"font-weight","bold"],["my-1","",1,""],[2,"height","300px","overflow-y","auto"],[1,"btn","btn-primary",3,"routerLink"],[1,"row","text-center"],[1,"col-md-12"],[3,"matchID"],["scope","col"],["scope","col",2,"background-color","lightgrey"],[1,"highlight"],[1,"table","table-striped"],[2,"margin-top","2rem"],[1,"table","table-bordered","table-responsive"],[2,"background-color","lightgrey"],[1,"icon",3,"src"],[1,"table","table-bordered","table-responsive",2,"margin","auto","width","25%","margin-bottom","2rem"],[2,"background-color","grey"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),g(4),p(),f(5,"h2"),g(6),p()()()(),f(7,"div",3)(8,"div",4),K(9,Ez,8,1,"table",5),p(),f(10,"div",4),K(11,Iz,2,0,"h1")(12,wz,2,0,"h3",6)(13,Mz,5,3),Y(14,"hr",7),K(15,kz,11,0,"div",8)(16,Oz,2,3,"button",9),p(),f(17,"div",4),K(18,jz,7,1,"table",5),p(),f(19,"div",10)(20,"div",11),K(21,Gz,11,0)(22,Jz,20,2)(23,oG,20,2),p()()(),Y(24,"app-game-statistics",12)),t&2&&(_(4),De("",r.team1.name," VS. ",r.team2.name,""),_(2),De("",r.match.date.toDate().toDateString()," - ",r.match.date.toDate().toLocaleTimeString(),""),_(3),$(r.match.hasStarted?9:-1),_(2),$(r.match.hasStarted?r.match.hasFinished?12:13:11),_(4),$(r.match.hasStarted?15:-1),_(),$(r.authService.token=="true"?16:-1),_(2),$(r.match.hasStarted?18:-1),_(3),$(r.team1.sport==r.sportEnum.RainbowSixSiege&&r.match.hasStarted?21:r.team1.sport==r.sportEnum.Volleyball?22:r.team1.sport==r.sportEnum.Basketball||r.team1.sport==r.sportEnum.Football?23:-1),_(3),W("matchID",r.matchID()))},dependencies:[ka,Oa,je],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}.team-table[_ngcontent-%COMP%]{width:50%;margin:0 auto}.round-table[_ngcontent-%COMP%]{width:80%;margin:0 auto}.highlight[_ngcontent-%COMP%]{background-color:#d3d3d3;font-weight:700}.icon[_ngcontent-%COMP%]{width:100px;height:100px}"]})};function sG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function aG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function cG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function lG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function uG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function dG(n,e){if(n&1&&(f(0,"option",6),g(1),p()),n&2){let t=e.$implicit;W("ngValue",t),_(),De("",t.firstName[0],". ",t.lastName,"")}}function hG(n,e){if(n&1){let t=et();f(0,"input",18),Me("ngModelChange",function(i){B(t);let o=D();return Oe(o.trade,i)||(o.trade=i),U(i)}),p(),f(1,"label",19),g(2,"Trade?"),p(),f(3,"input",20),Me("ngModelChange",function(i){B(t);let o=D();return Oe(o.playOvertime,i)||(o.playOvertime=i),U(i)}),p(),f(4,"label",19),g(5,"Overtime?"),p(),Y(6,"input",21,1),f(8,"div",17)(9,"div",22)(10,"button",23),O("click",function(){B(t);let i=D();return U(i.setSiegeAction(i.siegeActionEnum.Killed))}),g(11,"Kill"),p(),f(12,"button",23),O("click",function(){B(t);let i=D();return U(i.setSiegeAction(i.siegeActionEnum.Headshot))}),g(13,"Headshot Kill"),p(),f(14,"button",23),O("click",function(){B(t);let i=D();return U(i.setSiegeAction(i.siegeActionEnum.Revived))}),g(15,"Revive"),p(),f(16,"button",23),O("click",function(){B(t);let i=D();return U(i.setSiegeAction(i.siegeActionEnum.Planted))}),g(17,"Plant/Defuse"),p(),f(18,"button",23),O("click",function(){B(t);let i=D();return U(i.setSiegeAction(i.siegeActionEnum.Clutch))}),g(19,"Clutch"),p()()()}if(n&2){let t=D();Re("ngModel",t.trade),_(3),Re("ngModel",t.playOvertime)}}function fG(n,e){if(n&1){let t=et();f(0,"label",24),g(1,"Yards"),p(),f(2,"input",25),Me("ngModelChange",function(i){B(t);let o=D();return Oe(o.yards,i)||(o.yards=i),U(i)}),p(),Y(3,"input",21,1),f(5,"div",17)(6,"div",22)(7,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.EnteredGame))}),g(8,"Entered Game"),p(),f(9,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.ExitedGame))}),g(10,"Exited Game"),p(),f(11,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.FGMade))}),g(12,"Made FG"),p(),f(13,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Touchdown))}),g(14,"TD"),p(),f(15,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Incomplete))}),g(16,"Incomplete Pass"),p(),f(17,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Passed))}),g(18,"Completed Pass"),p(),f(19,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Run))}),g(20,"Run"),p(),f(21,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Penalty))}),g(22,"Penalty"),p(),f(23,"button",23),O("click",function(){B(t);let i=D();return U(i.setFootballAction(i.footballActionEnum.Tackle))}),g(24,"Tackle"),p()()()}if(n&2){let t=D();_(2),Re("ngModel",t.yards)}}function pG(n,e){if(n&1){let t=et();f(0,"div",17)(1,"div",22)(2,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.EnteredGame))}),g(3,"Entered Game"),p(),f(4,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.ExitedGame))}),g(5,"Exited Game"),p(),f(6,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Ace))}),g(7,"Ace"),p(),f(8,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Blocked))}),g(9,"Block"),p(),f(10,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Dig))}),g(11,"Dig"),p(),f(12,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Error))}),g(13,"Error"),p(),f(14,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Kill))}),g(15,"Kill"),p(),f(16,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Receptions))}),g(17,"Reception"),p(),f(18,"button",23),O("click",function(){B(t);let i=D();return U(i.setVolleyballAction(i.volleyballActionEnum.Serve))}),g(19,"Served"),p()()()}}function mG(n,e){if(n&1){let t=et();f(0,"div",17)(1,"div",22)(2,"button",23),O("click",function(){B(t);let i=D();return U(i.setBasketballAction(i.basketballlActionEnum.EnteredGame))}),g(3,"Entered Game"),p(),f(4,"button",23),O("click",function(){B(t);let i=D();return U(i.setBasketballAction(i.basketballlActionEnum.ExitedGame))}),g(5,"Exited Game"),p(),f(6,"button",23),O("click",function(){B(t);let i=D();return U(i.setBasketballAction(i.basketballlActionEnum.FGMade))}),g(7,"FG"),p(),f(8,"button",23),O("click",function(){B(t);let i=D();return U(i.setBasketballAction(i.basketballlActionEnum.P3Made))}),g(9,"3PT FG"),p(),f(10,"button",23),O("click",function(){B(t);let i=D();return U(i.setBasketballAction(i.basketballlActionEnum.Rebound))}),g(11,"Rebound"),p()()()}}var Dp=class n{matchID;match;sport;sportEnum=Et;team1;team2;team1Players;team2Players;siegeService=b(vn);footballService=b(Ki);volleyballService=b(Qi);basketballService=b(Wi);teamService=b(ce);matchService=b(it);playerService=b(Ae);playerActing;playerEffected;playerAssisting;playTimeMinutes=0;playTimeSeconds=0;playTime;playOvertime;playDescription;siegeAction;siegeActionEnum=Na;siegeRoundResultEnum=Yi;trade;footballAction;footballActionEnum=gI;yards;volleyballAction;volleyballActionEnum=yI;basketballAction;basketballlActionEnum=mI;ngOnInit(){this.matchService.getMatchById(this.matchID).subscribe(e=>{this.match=e,this.teamService.getTeam(this.match.team1ID).subscribe(t=>{this.team1=t,this.sport=this.team1.sport,this.playerService.getPlayers().subscribe(r=>this.team1Players=r.filter(i=>i.teams.includes(this.team1.id)))}),this.teamService.getTeam(this.match.team2ID).subscribe(t=>{this.team2=t,this.playerService.getPlayers().subscribe(r=>this.team2Players=r.filter(i=>i.teams.includes(this.team2.id)))})})}onSubmit(e){this.playTime=Number(this.playTimeMinutes*60)+Number(this.playTimeSeconds),this.playOvertime&&(this.playTime=-this.playTime),this.sport==3&&this.siegeService.siegePlayBuilder(this.match,this.playTime,this.playerActing,this.playerEffected,this.playerAssisting,this.siegeAction,this.trade),this.sport==0&&this.footballService.footballPlayBuilder(this.match,this.playTime,this.playerActing,this.playerEffected,this.playerAssisting,this.footballAction,this.yards),this.sport==2&&this.volleyballService.volleyballPlayBuilder(this.match,this.playTime,this.playerActing,this.playerEffected,this.playerAssisting,this.volleyballAction),this.sport==1&&this.basketballService.basketballPlayBuilder(this.match,this.playTime,this.playerActing,this.playerEffected,this.playerAssisting,this.basketballAction),this.siegeService.calculateStats(this.playerActing,this.match),this.match.timeRemaining=this.playTime,this.matchService.updateMatch(this.match.id,this.match),e.resetForm(),e.controls.playTimeMinutes.setValue(0),e.controls.playTimeSeconds.setValue(0)}setSiegeAction(e){this.siegeAction=e}setFootballAction(e){this.footballAction=e}setVolleyballAction(e){this.volleyballAction=e}setBasketballAction(e){this.basketballAction=e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-play-entry-form"]],inputs:{matchID:"matchID"},decls:39,vars:10,consts:[["playerActionForm","ngForm"],["buttonValue","ngModel"],[3,"ngSubmit"],[1,"form-group"],["for","playerActing"],["id","playerActing","name","playerActing","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","playerEffected"],["id","playerEffected","name","playerEffected","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","playerAssisting"],["id","playerAssisting","name","playerAssisting","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col"],["for","playerTimeMinutes"],["id","playTimeMinutes","name","playTimeMinutes","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","playerTimeSeconds"],["id","playTimeSeconds","name","playTimeSeconds","required","",1,"form-control",3,"ngModelChange","ngModel"],["role","toolbar","aria-label","Toolbar with button groups",1,"btn-toolbar"],["type","checkbox","name","trade","value","true","id","trade",1,"form-check-input",3,"ngModelChange","ngModel"],["for","trade",1,"form-check-label"],["type","checkbox","name","playOvertime","value","true","id","playOvertime",1,"form-check-input",3,"ngModelChange","ngModel"],["type","hidden","name","clickedButton","ngModel",""],["role","group","aria-label","First group",1,"btn-group","mr-2",2,"margin","auto"],["type","submit",1,"btn","btn-secondary",3,"click"],["for","yards"],["id","yards","name","yards",1,"form-control",3,"ngModelChange","ngModel"]],template:function(t,r){if(t&1){let i=et();f(0,"form",2,0),O("ngSubmit",function(){B(i);let s=JT(1);return U(r.onSubmit(s))}),f(2,"div",3)(3,"label",4),g(4,"Player Acting"),p(),f(5,"select",5),Me("ngModelChange",function(s){return B(i),Oe(r.playerActing,s)||(r.playerActing=s),U(s)}),J(6,sG,2,3,"option",6,ft),J(8,aG,2,3,"option",6,ft),p(),f(10,"label",7),g(11,"Player Effected"),p(),f(12,"select",8),Me("ngModelChange",function(s){return B(i),Oe(r.playerEffected,s)||(r.playerEffected=s),U(s)}),J(13,cG,2,3,"option",6,ft),J(15,lG,2,3,"option",6,ft),p(),f(17,"label",9),g(18,"Player Assisting"),p(),f(19,"select",10),Me("ngModelChange",function(s){return B(i),Oe(r.playerAssisting,s)||(r.playerAssisting=s),U(s)}),J(20,uG,2,3,"option",6,ft),J(22,dG,2,3,"option",6,ft),f(24,"option",6),g(25,"None"),p()(),f(26,"div",11)(27,"div",12)(28,"label",13),g(29,"Minutes"),p(),f(30,"input",14),Me("ngModelChange",function(s){return B(i),Oe(r.playTimeMinutes,s)||(r.playTimeMinutes=s),U(s)}),p()(),f(31,"div",12)(32,"label",15),g(33,"Seconds"),p(),f(34,"input",16),Me("ngModelChange",function(s){return B(i),Oe(r.playTimeSeconds,s)||(r.playTimeSeconds=s),U(s)}),p()()(),K(35,hG,20,2)(36,fG,25,1)(37,pG,20,0,"div",17)(38,mG,12,0,"div",17),p()()}t&2&&(_(5),Re("ngModel",r.playerActing),_(),X(r.team1Players),_(2),X(r.team2Players),_(4),Re("ngModel",r.playerEffected),_(),X(r.team1Players),_(2),X(r.team2Players),_(4),Re("ngModel",r.playerAssisting),_(),X(r.team1Players),_(2),X(r.team2Players),_(2),W("ngValue",null),_(6),Re("ngModel",r.playTimeMinutes),_(4),Re("ngModel",r.playTimeSeconds),_(),$(r.sport==r.sportEnum.RainbowSixSiege?35:-1),_(),$(r.sport==r.sportEnum.Football?36:-1),_(),$(r.sport==r.sportEnum.Volleyball?37:-1),_(),$(r.sport==r.sportEnum.Basketball?38:-1))},dependencies:[ut,hp,Ma,Pa,Pt,cI,zi,Wt,up,eu,Lt,Xl],encapsulation:2})};function gG(n,e){if(n&1&&(f(0,"th",7),g(1),p()),n&2){let t=D().$index;_(),Ve("",t+1," - Active")}}function yG(n,e){if(n&1&&(f(0,"th",8),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function vG(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function _G(n,e){if(n&1&&K(0,gG,2,1,"th",7)(1,yG,2,1,"th",8)(2,vG,2,1,"th"),n&2){let t=e.$index,r=D(2);$(t+1==r.match.quarterOrRound?0:t%12>=6||t==13?1:2)}}function EG(n,e){if(n&1&&(f(0,"td",9),Y(1,"img",11),p()),n&2){let t=D().$implicit;_(),pn("src",t.result,dt)}}function IG(n,e){if(n&1&&(f(0,"td",10),Y(1,"img",11),p()),n&2){let t=D().$implicit;_(),pn("src",t.result,dt)}}function wG(n,e){if(n&1&&K(0,EG,2,1,"td",9)(1,IG,2,1,"td",10),n&2){let t=e.$index;$(t%12>=6||t==13?0:1)}}function CG(n,e){if(n&1&&(f(0,"h2",5),g(1,"Round History"),p(),f(2,"table",6)(3,"thead")(4,"tr"),J(5,_G,3,1,null,null,_e),p()(),f(7,"tbody")(8,"tr"),J(9,wG,2,1,null,null,_e),p()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(4),X(t.match.quarterOrRoundResults)}}function bG(n,e){if(n&1&&(f(0,"th",7),g(1),p()),n&2){let t=D().$index;_(),Ve("",t+1," - Active")}}function TG(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function SG(n,e){if(n&1&&K(0,bG,2,1,"th",7)(1,TG,2,1,"th"),n&2){let t=e.$index,r=D(2);$(t+1==r.match.quarterOrRound?0:1)}}function DG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team1Score)}}function AG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team2Score)}}function xG(n,e){if(n&1&&(f(0,"h2",5),g(1,"Score by Set"),p(),f(2,"table",12)(3,"thead")(4,"tr"),J(5,SG,2,1,null,null,_e),f(7,"th",8),g(8,"Total"),p()()(),f(9,"tbody")(10,"tr"),J(11,DG,2,1,"td",null,_e),f(13,"td",8),g(14),p()(),f(15,"tr"),J(16,AG,2,1,"td",null,_e),f(18,"td",8),g(19),p()()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(6),X(t.match.quarterOrRoundResults),_(3),z(t.match.team1Score),_(2),X(t.match.quarterOrRoundResults),_(3),z(t.match.team2Score)}}function RG(n,e){if(n&1&&(f(0,"th",7),g(1),p()),n&2){let t=D().$index;_(),Ve("",t+1," - Active")}}function MG(n,e){if(n&1&&(f(0,"th"),g(1),p()),n&2){let t=D().$index;_(),z(t+1)}}function PG(n,e){if(n&1&&K(0,RG,2,1,"th",7)(1,MG,2,1,"th"),n&2){let t=e.$index,r=D(2);$(t+1==r.match.quarterOrRound?0:1)}}function NG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team1Score)}}function kG(n,e){if(n&1&&(f(0,"td"),g(1),p()),n&2){let t=e.$implicit;_(),z(t.team2Score)}}function OG(n,e){if(n&1&&(f(0,"h2",5),g(1,"Score by Quarter"),p(),f(2,"table",12)(3,"thead")(4,"tr"),J(5,PG,2,1,null,null,_e),f(7,"th",8),g(8,"Total"),p()()(),f(9,"tbody")(10,"tr"),J(11,NG,2,1,"td",null,_e),f(13,"td",8),g(14),p()(),f(15,"tr"),J(16,kG,2,1,"td",null,_e),f(18,"td",8),g(19),p()()()()),n&2){let t=D();_(5),X(t.match.quarterOrRoundResults),_(6),X(t.match.quarterOrRoundResults),_(3),z(t.match.team1Score),_(2),X(t.match.quarterOrRoundResults),_(3),z(t.match.team2Score)}}function FG(n,e){if(n&1){let t=et();f(0,"div",1)(1,"h2"),g(2,"Team 1 Win"),p(),f(3,"div",2)(4,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM1_KILL))}),g(5,"Elimination"),p(),f(6,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM1_TIME))}),g(7,"Time"),p(),f(8,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM1_OBJ))}),g(9,"Objective"),p()()(),f(10,"div",1)(11,"h2"),g(12,"Team 2 Win"),p(),f(13,"div",2)(14,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM2_KILL))}),g(15,"Elimination"),p(),f(16,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM2_TIME))}),g(17,"Time"),p(),f(18,"button",3),O("click",function(){B(t);let i=D();return U(i.setSiegeRoundResult(i.siegeRoundResultEnum.TEAM2_OBJ))}),g(19,"Objective"),p()()()}}function VG(n,e){if(n&1){let t=et();f(0,"div",1)(1,"h2"),g(2,"Team 1 Scoring Event"),p(),f(3,"div",2)(4,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,6))}),g(5,"TD"),p(),f(6,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,3))}),g(7,"FG"),p(),f(8,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,1))}),g(9,"XP"),p(),f(10,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,2))}),g(11,"2PT/Saftey"),p()(),f(12,"h2"),g(13,"Team 1 Undo Scoring"),p(),f(14,"div",2)(15,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-6))}),g(16,"TD"),p(),f(17,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-3))}),g(18,"FG"),p(),f(19,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-1))}),g(20,"XP"),p(),f(21,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-2))}),g(22,"2PT/Saftey"),p()()(),f(23,"div",1)(24,"h2"),g(25,"Team 2 Scoring Event"),p(),f(26,"div",2)(27,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,6))}),g(28,"TD"),p(),f(29,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,3))}),g(30,"FG"),p(),f(31,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,1))}),g(32,"XP"),p(),f(33,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,2))}),g(34,"2PT/Saftey"),p()(),f(35,"h2"),g(36,"Team 2 Undo Scoring"),p(),f(37,"div",2)(38,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-6))}),g(39,"TD"),p(),f(40,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-3))}),g(41,"FG"),p(),f(42,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-1))}),g(43,"XP"),p(),f(44,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-2))}),g(45,"2PT/Saftey"),p()()()}}function LG(n,e){if(n&1){let t=et();f(0,"div",1)(1,"h2"),g(2,"Team 1 Scoring Event"),p(),f(3,"div",2)(4,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,1))}),g(5,"+1"),p()(),f(6,"h2"),g(7,"Team 1 Undo Scoring"),p(),f(8,"div",2)(9,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-1))}),g(10,"-1"),p()()(),f(11,"div",1)(12,"h2"),g(13,"Team 2 Scoring Event"),p(),f(14,"div",2)(15,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,1))}),g(16,"+1"),p()(),f(17,"h2"),g(18,"Team 2 Undo Scoring"),p(),f(19,"div",2)(20,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-1))}),g(21,"-1"),p()()()}}function jG(n,e){if(n&1){let t=et();f(0,"div",1)(1,"h2"),g(2,"Team 1 Scoring Event"),p(),f(3,"div",2)(4,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,2))}),g(5,"FG"),p(),f(6,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,3))}),g(7,"3PT FG"),p(),f(8,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,1))}),g(9,"FT"),p()(),f(10,"h2"),g(11,"Team 1 Undo Scoring"),p(),f(12,"div",2)(13,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-2))}),g(14,"FG"),p(),f(15,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-3))}),g(16,"3PT FG"),p(),f(17,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(1,-1))}),g(18,"FT"),p()()(),f(19,"div",1)(20,"h2"),g(21,"Team 2 Scoring Event"),p(),f(22,"div",2)(23,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,2))}),g(24,"FG"),p(),f(25,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,3))}),g(26,"3PT FG"),p(),f(27,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,1))}),g(28,"FT"),p()(),f(29,"h2"),g(30,"Team 2 Undo Scoring"),p(),f(31,"div",2)(32,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-2))}),g(33,"FG"),p(),f(34,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-3))}),g(35,"3PT FG"),p(),f(36,"button",3),O("click",function(){B(t);let i=D();return U(i.changeScore(2,-1))}),g(37,"FT"),p()()()}}var Ap=class n{matchID;match;sport;team1;team2;siegeService=b(vn);teamService=b(ce);matchService=b(it);playerService=b(Ae);siegeRoundResultEnum=Yi;sportEnum=Et;ngOnInit(){this.matchService.getMatchById(this.matchID).subscribe(e=>{this.match=e,this.teamService.getTeam(this.match.team1ID).subscribe(t=>{this.team1=t,this.sport=this.team1.sport}),this.teamService.getTeam(this.match.team2ID).subscribe(t=>{this.team2=t})})}nextRound(){if(this.match.quarterOrRound++,this.match.quarterOrRound>this.match.quarterOrRoundResults.length&&(this.match.quarterOrRoundResults.push({team1Score:0,team2Score:0,plays:[]}),this.sport==this.sportEnum.RainbowSixSiege)){for(let e=0;e<this.team1.players.length;e++)this.siegeService.calculateStats(this.playerService.getPlayerById(this.team1.players[e]),this.match);for(let e=0;e<this.team2.players.length;e++)this.siegeService.calculateStats(this.playerService.getPlayerById(this.team2.players[e]),this.match)}this.matchService.updateMatch(this.match.id,this.match)}previousRound(){this.match.quarterOrRound>1&&(this.match.quarterOrRound--,this.matchService.updateMatch(this.match.id,this.match))}deleteQuarterOrRound(){if(this.match.quarterOrRoundResults.length>1&&(this.matchService.removeQuarterOrRoundFromMatch(this.match,this.match.quarterOrRoundResults[this.match.quarterOrRound-1]),this.team1.sport==3)){for(let e=0;e<this.match.quarterOrRoundResults[this.match.quarterOrRound-1].plays.length;e++)this.siegeService.reverseSiegeAction(this.match,this.match.quarterOrRoundResults[this.match.quarterOrRound-1].plays[e],this.match.quarterOrRoundResults[this.match.quarterOrRound-1]);for(let e=0;e<this.team1.players.length;e++)this.siegeService.calculateStats(this.playerService.getPlayerById(this.team1.players[e]),this.match);for(let e=0;e<this.team2.players.length;e++)this.siegeService.calculateStats(this.playerService.getPlayerById(this.team2.players[e]),this.match)}this.match.quarterOrRound>1&&this.match.quarterOrRound--,this.matchService.updateMatch(this.match.id,this.match),this.matchService.calculateMatchScore(this.match)}setSiegeRoundResult(e){this.siegeService.setSiegeRoundResult(this.match,e),this.matchService.calculateMatchScore(this.match)}changeScore(e,t){e==1&&(this.match.quarterOrRoundResults[this.match.quarterOrRound-1].team1Score+=t,this.matchService.updateMatch(this.match.id,this.match)),e==2&&(this.match.quarterOrRoundResults[this.match.quarterOrRound-1].team2Score+=t,this.matchService.updateMatch(this.match.id,this.match)),this.matchService.calculateMatchScore(this.match)}toggleStarted(){this.match.hasStarted=!this.match.hasStarted,this.matchService.updateMatch(this.match.id,this.match)}toggleFinished(){this.match.hasFinished=!this.match.hasFinished,this.matchService.updateMatch(this.match.id,this.match)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-play-entry-round-history"]],inputs:{matchID:"matchID"},decls:25,vars:5,consts:[[1,"row"],[1,"col-md-4"],["role","group","aria-label","First group",1,"btn-group","mr-2"],["type","submit",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-danger",3,"click"],[2,"margin-top","2rem"],[1,"table","table-bordered","table-responsive"],[2,"background-color","grey"],[2,"background-color","lightgrey"],["scope","col",2,"background-color","lightgrey"],["scope","col"],["alt","In Progress",1,"icon",3,"src"],[1,"table","table-bordered","table-responsive",2,"margin","auto","width","25%","margin-bottom","2rem"]],template:function(t,r){t&1&&(K(0,CG,11,0)(1,xG,20,2)(2,OG,20,2),f(3,"div",0),K(4,FG,20,0)(5,VG,46,0)(6,LG,22,0)(7,jG,38,0),f(8,"div",1)(9,"h2"),g(10,"Round/Quarter/Set Controls"),p(),f(11,"div",2)(12,"button",3),O("click",function(){return r.previousRound()}),g(13,"Previous Round"),p(),f(14,"button",3),O("click",function(){return r.nextRound()}),g(15,"Next Round"),p(),f(16,"button",4),O("click",function(){return r.deleteQuarterOrRound()}),g(17,"Delete Round"),p()(),f(18,"h2"),g(19,"Match Controls"),p(),f(20,"div",2)(21,"button",3),O("click",function(){return r.toggleStarted()}),g(22,"Toggle Started"),p(),f(23,"button",3),O("click",function(){return r.toggleFinished()}),g(24,"Toggle Finished"),p()()()()),t&2&&($(r.sport==r.sportEnum.RainbowSixSiege?0:r.sport==r.sportEnum.Volleyball?1:r.team1.sport==r.sportEnum.Basketball||r.team1.sport==r.sportEnum.Football?2:-1),_(4),$(r.sport==r.sportEnum.RainbowSixSiege?4:-1),_(),$(r.sport==r.sportEnum.Football?5:-1),_(),$(r.sport==r.sportEnum.Volleyball?6:-1),_(),$(r.sport==r.sportEnum.Basketball?7:-1))},styles:[".icon[_ngcontent-%COMP%]{width:100px;height:100px}"]})};function BG(n,e){if(n&1&&(f(0,"td",15),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function UG(n,e){if(n&1&&(f(0,"td",16),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function $G(n,e){if(n&1&&(f(0,"tr"),K(1,BG,2,2,"td",15)(2,UG,2,2,"td",16),p()),n&2){let t=e.$implicit;_(),$(t.currentlyInMatch?1:2)}}function HG(n,e){if(n&1&&(f(0,"td",15),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function qG(n,e){if(n&1&&(f(0,"td",16),g(1),p()),n&2){let t=D().$implicit;_(),De("",t.firstName[0],". ",t.lastName,"")}}function zG(n,e){if(n&1&&(f(0,"tr"),K(1,HG,2,2,"td",15)(2,qG,2,2,"td",16),p()),n&2){let t=e.$implicit;_(),$(t.currentlyInMatch?1:2)}}function GG(n,e){n&1&&(f(0,"h1"),g(1,"Upcoming"),p())}function WG(n,e){n&1&&(f(0,"h3",9),g(1,"Final"),p())}function KG(n,e){}function QG(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(2);_(),De("Round ",t.match.quarterOrRound," - ",sn(2,2,t.match.timeRemaining),"")}}function YG(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("1st Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function ZG(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("2nd Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function JG(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("3rd Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function XG(n,e){if(n&1&&(f(0,"h3"),g(1),on(2,"secondsToTime"),p()),n&2){let t=D(4);_(),Ve("4th Quarter - ",sn(2,1,t.match.timeRemaining),"")}}function e6(n,e){if(n&1&&K(0,YG,3,3,"h3")(1,ZG,3,3,"h3")(2,JG,3,3,"h3")(3,XG,3,3,"h3"),n&2){let t=D(3);$(t.match.quarterOrRound==1&&t.match.timeRemaining?0:t.match.quarterOrRound==2?1:t.match.quarterOrRound==2?2:3)}}function t6(n,e){if(n&1&&K(0,e6,4,1),n&2){let t=D(2);$(t.sportEnum.Basketball||t.sportEnum.Football?0:-1)}}function n6(n,e){if(n&1&&K(0,KG,0,0)(1,QG,3,4,"h3")(2,t6,1,1),n&2){let t,r=D();$((t=r.team1.sport)===r.sportEnum.Volleyball?0:t===r.sportEnum.RainbowSixSiege?1:2)}}function r6(n,e){if(n&1&&(f(0,"td",15),g(1),on(2,"secondsToTime"),p()),n&2){let t=D().$implicit;_(),Ve("-",sn(2,1,t.time),"")}}function i6(n,e){if(n&1&&(f(0,"td",15),g(1),on(2,"secondsToTime"),p()),n&2){let t=D().$implicit;_(),z(sn(2,1,t.time))}}function o6(n,e){if(n&1){let t=et();f(0,"tr")(1,"td",15),g(2),p(),K(3,r6,3,3,"td",15)(4,i6,3,3,"td",15),f(5,"td")(6,"button",17),O("click",function(){let i=B(t).$implicit,o=D().$implicit,s=D();return U(s.onPlayDelete(i,o))}),g(7,"Delete"),p()()()}if(n&2){let t=e.$implicit;_(2),z(t.description),_(),$(t.time<0?3:4)}}function s6(n,e){if(n&1&&J(0,o6,8,2,"tr",null,ft),n&2){let t=e.$implicit;X(t.plays)}}var xp=class n{matchID=Ge.required();match;team1;team2;team1Players;team2Players;sportEnum=Et;siegeActionEnum=Na;siegeRoundResultEnum=Yi;constructor(){}siegeService=b(vn);teamService=b(ce);matchService=b(it);playerService=b(Ae);ngOnInit(){this.matchService.getMatchById(this.matchID()).subscribe(e=>{this.match=e,this.teamService.getTeam(this.match.team1ID).subscribe(t=>{this.team1=t,this.playerService.getPlayers().subscribe(r=>this.team1Players=r.filter(i=>i.teams.includes(this.team1.id)))}),this.teamService.getTeam(this.match.team2ID).subscribe(t=>{this.team2=t,this.playerService.getPlayers().subscribe(r=>this.team2Players=r.filter(i=>i.teams.includes(this.team2.id)))})})}onPlayDelete(e,t){typeof e.playerActing==typeof Na&&this.siegeService.reverseSiegeAction(this.match,e,t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-game-play-entry"]],inputs:{matchID:[1,"matchID"]},decls:51,vars:12,consts:[[1,"container-fluid"],[1,"row","justify-content-md-center"],[1,"col-md-auto","text-center"],[1,"row"],[1,"col-md-4","text-center"],[1,"col-md-6"],[1,"table","team-table","table-bordered"],[3,"matchID"],[1,"highlight"],[2,"font-weight","bold"],["my-1","",1,""],[2,"height","300px","overflow-y","auto"],[1,"table","table-striped"],[1,"row","text-center"],[1,"col-md-12"],["scope","col"],["scope","col",2,"background-color","lightgrey"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),g(4),p(),f(5,"h2"),g(6),p()()()(),f(7,"div",3)(8,"div",4)(9,"div",3)(10,"div",5)(11,"table",6)(12,"thead")(13,"tr")(14,"h2"),g(15),p()()(),f(16,"tbody"),J(17,$G,3,1,"tr",null,ft),p()()(),f(19,"div",5)(20,"table",6)(21,"thead")(22,"tr")(23,"h2"),g(24),p()(),J(25,zG,3,1,"tr",null,ft),p()()()()(),f(27,"div",4),Y(28,"app-play-entry-form",7),p(),f(29,"div",4)(30,"h1",8),g(31),p(),K(32,GG,2,0,"h1")(33,WG,2,0,"h3",9)(34,n6,3,1),Y(35,"hr",10),f(36,"div",11)(37,"table",12)(38,"thead")(39,"tr")(40,"th"),g(41,"Play"),p(),f(42,"th"),g(43,"Time"),p()()(),f(44,"tbody"),J(45,s6,2,0,null,null,ft),p()()()(),f(47,"div",13)(48,"div",14),Y(49,"app-play-entry-round-history",7),p()()(),Y(50,"app-game-statistics",7)),t&2&&(_(4),De("",r.team1.name," VS. ",r.team2.name,""),_(2),De("",r.match.date.toDate().toDateString()," - ",r.match.date.toDate().toLocaleTimeString(),""),_(9),z(r.team1.name),_(2),X(r.team1Players),_(7),z(r.team2.name),_(),X(r.team2Players),_(3),W("matchID",r.match.id),_(3),De("",r.match.team1Score," - ",r.match.team2Score,""),_(),$(r.match.hasStarted?r.match.hasFinished?33:34:32),_(13),X(r.match.quarterOrRoundResults),_(4),W("matchID",r.match.id),_(),W("matchID",r.matchID()))},dependencies:[Oa,ut,ka,Dp,Ap],styles:[".text-center[_ngcontent-%COMP%]{text-align:center}.icon[_ngcontent-%COMP%]{width:100px;height:100px}.form-check-input[_ngcontent-%COMP%]{margin:10px}label[_ngcontent-%COMP%]{margin:5px}"]})};var a6=n=>["/sport",n],Rp=class n{id=Ge.required();teamService=b(ce);userService=b(yn);sportEnum=Et;team;name="";league="";logo="";sport=1;commitChanges(){this.teamService.createTeam(this.name,this.sport,this.logo,this.league)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-create-team"]],inputs:{id:[1,"id"]},decls:42,vars:14,consts:[[1,"container",2,"align-self","center"],[1,"containerA"],[1,"card"],[1,"container"],[1,"row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text",1,"inputText",2,"width","90%",3,"ngModelChange","ngModel"],["name","Sport",3,"ngModelChange","ngModel"],[3,"value"],[3,"src","alt"],[1,"btn","btn-primary",3,"click","routerLink"],[1,"btn","btn-primary",2,"margin-left","10px",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3,"Create Team"),p()(),f(4,"div",2)(5,"div",3)(6,"h3"),g(7,"Create Team"),p(),f(8,"div",4)(9,"div",5),g(10," Team Name: "),p(),f(11,"div",6)(12,"input",7),Me("ngModelChange",function(o){return Oe(r.name,o)||(r.name=o),o}),p()()(),f(13,"div",4)(14,"div",5),g(15," League: "),p(),f(16,"div",6)(17,"input",7),Me("ngModelChange",function(o){return Oe(r.league,o)||(r.league=o),o}),p()()(),f(18,"div",4)(19,"div",5),g(20," Sport: "),p(),f(21,"div",6)(22,"select",8),Me("ngModelChange",function(o){return Oe(r.sport,o)||(r.sport=o),o}),f(23,"option",9),g(24,"Basketball"),p(),f(25,"option",9),g(26,"Volleyball"),p(),f(27,"option",9),g(28,"Football"),p(),f(29,"option",9),g(30,"Rainbow Six Seige"),p()()()(),f(31,"div",4)(32,"div",5),g(33," Logo: "),p(),f(34,"div",6)(35,"input",7),Me("ngModelChange",function(o){return Oe(r.logo,o)||(r.logo=o),o}),p()()(),f(36,"div",4),Y(37,"img",10),p(),f(38,"button",11),O("click",function(){return r.commitChanges()}),g(39,"Save"),p(),f(40,"button",12),O("click",function(){return r.userService.goBack()}),g(41,"Cancel"),p()()()()),t&2&&(_(12),Re("ngModel",r.name),_(5),Re("ngModel",r.league),_(5),Re("ngModel",r.sport),_(),W("value",r.sportEnum.Basketball),_(2),W("value",r.sportEnum.Volleyball),_(2),W("value",r.sportEnum.Football),_(2),W("value",r.sportEnum.RainbowSixSiege),_(6),Re("ngModel",r.logo),_(2),Ei("alt","",r.name,"'s Logo"),W("src",r.logo,dt),_(),W("routerLink",rn(12,a6,r.sport)))},dependencies:[je,ut,Ma,Pa,Pt,zi,Wt,Lt],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}"]})};var uM=(n,e)=>["/team-view",n,e],Mp=class n{sportId=Ge.required();teamId=Ge.required();playerService=b(Ae);firstName="";lastName="";bio="";age="";commitChanges(){this.playerService.createPlayer(this.firstName,this.lastName,this.bio,this.age)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-create-player"]],inputs:{sportId:[1,"sportId"],teamId:[1,"teamId"]},decls:32,vars:12,consts:[[1,"container",2,"align-self","center"],[1,"containerA"],[1,"card"],[1,"container"],[1,"row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text",1,"inputText",2,"width","90%",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click","routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1"),g(3," Create Player:"),p()(),f(4,"div",2)(5,"div",3)(6,"h3"),g(7,"Create Player"),p(),f(8,"div",4)(9,"div",5),g(10," First Name: "),p(),f(11,"div",6)(12,"input",7),Me("ngModelChange",function(o){return Oe(r.firstName,o)||(r.firstName=o),o}),p()()(),f(13,"div",4)(14,"div",5),g(15," Last Name: "),p(),f(16,"div",6)(17,"input",7),Me("ngModelChange",function(o){return Oe(r.lastName,o)||(r.lastName=o),o}),p()()(),f(18,"div",4)(19,"div",5),g(20," Bio: "),p(),f(21,"div",6)(22,"input",7),Me("ngModelChange",function(o){return Oe(r.bio,o)||(r.bio=o),o}),p()()(),f(23,"div",4)(24,"div",5),g(25," Age: "),p(),f(26,"div",6)(27,"input",7),Me("ngModelChange",function(o){return Oe(r.age,o)||(r.age=o),o}),p()()(),f(28,"button",8),g(29,"Cancel"),p(),f(30,"button",9),O("click",function(){return r.commitChanges()}),g(31,"Create"),p()()()()),t&2&&(_(12),Re("ngModel",r.firstName),_(5),Re("ngModel",r.lastName),_(5),Re("ngModel",r.bio),_(5),Re("ngModel",r.age),_(),W("routerLink",tt(6,uM,r.sportId(),r.teamId())),_(2),W("routerLink",tt(9,uM,r.sportId(),r.teamId())))},dependencies:[je,ut,Pt,Wt,Lt],styles:[".containerA[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}"]})};var Pp=class n{userService=b(yn);email="fixityourself@bisonbase.com";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-coming-soon"]],decls:24,vars:1,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"container","text-center",2,"margin-top","20px"],[2,"font-weight","bold"],["href","mailto:fixityourself@bisonbase.com"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){t&1&&(f(0,"html",0)(1,"head"),Y(2,"meta",1)(3,"meta",2),f(4,"title"),g(5,"Thank You"),p()(),f(6,"body")(7,"div",3)(8,"h5"),g(9,"Info Center"),p(),f(10,"p"),g(11,"Hi there! if you are seeing this page it means that the feature you are tring to access isn't yet supported by the developers of this app."),p(),f(12,"p"),g(13,"If you are in need of urgent services please contact our helpline at either: "),f(14,"span",4)(15,"a",5),g(16),p()(),g(17," or "),f(18,"span",4),g(19,"801-211-9887"),p()(),f(20,"p"),g(21,"Sorry for any inconvienece caused. Thank You."),p(),f(22,"button",6),O("click",function(){return r.userService.goBack()}),g(23,"Back"),p()()()()),t&2&&(_(16),z(r.email))},encapsulation:2})};var c6=ue(n=>!!n),Cr=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>c6);return r1(this.auth).pipe(Hn(1),i(t,r),ue(o=>typeof o=="boolean"?o:Array.isArray(o)?this.router.createUrlTree(o):this.router.parseUrl(o)))};static \u0275fac=function(r){return new(r||n)(de(Vt),de(Kr))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var dM=(n,e)=>["/team-view",n,e];function l6(n,e){if(n&1&&(f(0,"option",7),g(1),p()),n&2){let t=e.$implicit,r=e.$index,i=D();W("ngValue",t),_(),z(i.otherTeams[r].name)}}var Np=class n{sportId=Ge.required();teamId=Ge.required();matchService=b(it);teamService=b(ce);playerService=b(Ae);team;otherTeams;opponent;date;teamPlayers;opponentPlayers;ngOnInit(){this.teamService.getTeams().subscribe(e=>this.otherTeams=e.filter(t=>t.id!==this.teamId()&&t.sport==this.sportId())),this.teamService.getTeam(this.teamId()).subscribe(e=>this.team=e)}commitChanges(){let e=new Date(this.date),t=this.matchService.addMatch(this.team,this.opponent,St.fromDate(e));this.updatePlayerStats(t)}updatePlayerStats(e){this.playerService.getPlayers().subscribe(t=>{this.teamPlayers=t.filter(r=>r.teams.includes(this.teamId())),this.opponentPlayers=t.filter(r=>r.teams.includes(this.opponent.id));for(let r=0;r<this.teamPlayers.length;r++)this.sportId()==3?this.teamPlayers[r].stats[e]=[0,0,0,0,0,0,0,0,0,0]:this.sportId()==1?this.teamPlayers[r].stats[e]=[0,0,0,0,0,0,0,0]:this.sportId()==0?this.teamPlayers[r].stats[e]=[0,0,0,0,0,0,0,0]:this.sportId()==2&&(this.teamPlayers[r].stats[e]=[0,0,0,0,0,0,0,0,0]),this.playerService.updatePlayer(this.teamPlayers[r].id,this.teamPlayers[r]);for(let r=0;r<this.opponentPlayers.length;r++)this.sportId()==3?this.opponentPlayers[r].stats[e]=[0,0,0,0,0,0,0,0,0,0,0]:this.sportId()==1?this.opponentPlayers[r].stats[e]=[0,0,0,0,0,0,0,0]:this.sportId()==0?this.opponentPlayers[r].stats[e]=[0,0,0,0,0,0,0,0]:this.sportId()==2&&(this.opponentPlayers[r].stats[e]=[0,0,0,0,0,0,0,0,0]),this.playerService.updatePlayer(this.opponentPlayers[r].id,this.opponentPlayers[r])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-match-create"]],inputs:{sportId:[1,"sportId"],teamId:[1,"teamId"]},decls:21,vars:10,consts:[[1,"container",2,"align-self","center"],[1,"card"],[1,"container"],[1,"row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","opponent","name","playerActing","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],["type","datetime-local",1,"datetime-local",2,"width","90%",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",3,"click","routerLink"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),g(4,"Create Match"),p(),f(5,"div",3)(6,"div",4),g(7," Opponent "),p(),f(8,"div",5)(9,"select",6),Me("ngModelChange",function(o){return Oe(r.opponent,o)||(r.opponent=o),o}),J(10,l6,2,2,"option",7,_e),p()()(),f(12,"div",3)(13,"div",4),g(14," Date: "),p(),f(15,"div",5)(16,"input",8),Me("ngModelChange",function(o){return Oe(r.date,o)||(r.date=o),o}),p()()(),f(17,"button",9),g(18,"Cancel"),p(),f(19,"button",10),O("click",function(){return r.commitChanges()}),g(20,"Create"),p()()()()),t&2&&(_(9),Re("ngModel",r.opponent),_(),X(r.otherTeams),_(6),Re("ngModel",r.date),_(),W("routerLink",tt(4,dM,r.sportId(),r.teamId())),_(2),W("routerLink",tt(7,dM,r.sportId(),r.teamId())))},dependencies:[je,ut,Ma,Pa,Pt,zi,Wt,eu,Lt],styles:[".card[_ngcontent-%COMP%]{margin-top:2rem}.btn[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin:1rem}"]})};var hM=[{path:"",component:tp,title:"Bison Base"},{path:"all-sports",component:Sa},{path:"player/:sport/:team/:player",component:zl},{path:"admin-management",component:pp,canActivate:[Cr]},{path:"search",component:gp},{path:"login",component:fp,title:"Login"},{path:"sport/:sp",component:bp},{path:"edit-roster/:id",component:_p,title:"Edit Roster",canActivate:[Cr]},{path:"edit-player/:sportId/:teamId/:playerId",component:vp,title:"Edit Player",canActivate:[Cr]},{path:"view-player/:sportId/:teamId/:playerId",component:zl,title:"View Player"},{path:"add-player-roster/:sportId/:teamId",component:Tp,title:"Add Player to Roster",canActivate:[Cr]},{path:"team-view/:sportId/:teamId",component:Cp,title:"Team View"},{path:"edit-team/:id",component:yp,title:"Edit Team",canActivate:[Cr]},{path:"game-view/:matchID",component:Sp,title:"Game View"},{path:"game-play-entry/:matchID",component:xp,title:"Game Play Entry",canActivate:[Cr]},{path:"create-team/:sportId",component:Rp,title:"Create Team",canActivate:[Cr]},{path:"create-player/:sportId/:teamId",component:Mp,title:"Create Player",canActivate:[Cr]},{path:"feature_not_supported",component:Pp,title:"Sorry"},{path:"add-match-schedule/:sportId/:teamId",component:Np,title:"Create Match",canActivate:[Cr]}];var u6={apiKey:"AIzaSyBm2GfZCaMECX8w9JILeSrtdrXe_dI8x3w",authDomain:"bisonbase-e2ae4.firebaseapp.com",projectId:"bisonbase-e2ae4",storageBucket:"bisonbase-e2ae4.firebasestorage.app",messagingSenderId:"1058085099612",appId:"1:1058085099612:web:4afd6d011ebb2c0f13ae99"},fM={providers:[iS({eventCoalescing:!0}),Ev(hM,Iv()),KD(()=>QD(u6)),FR(()=>VR()),n1(()=>i1())]};var kp=class n{searchTerm="";previousSearchTerm="";router=b(Vt);constructor(){}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ln&&!this.router.url.startsWith("/search")&&(this.previousSearchTerm="")})}onSearch(){let e=this.searchTerm.trim();e&&e!==this.previousSearchTerm?(this.previousSearchTerm=e,this.router.navigate(["/search"],{queryParams:{q:e}})):e||(this.previousSearchTerm="",this.router.navigate(["/"]))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-search"]],decls:5,vars:1,consts:[[1,"ms-auto","d-flex",2,"width","100%"],["role","search",1,"d-flex","ms-auto"],["type","search","placeholder","Search players, teams, sports...","aria-label","Search","name","searchTerm",1,"form-control","me-2","flex-grow-1",2,"min-width","250px",3,"ngModelChange","keyup.enter","ngModel"],["type","submit",1,"btn","btn-outline-light",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"input",2),Me("ngModelChange",function(o){return Oe(r.searchTerm,o)||(r.searchTerm=o),o}),O("keyup.enter",function(){return r.onSearch()}),p(),f(3,"button",3),O("click",function(){return r.onSearch()}),g(4," Search "),p()()()),t&2&&(_(2),Re("ngModel",r.searchTerm))},dependencies:[ut,Pt,Wt,Lt,Rs],encapsulation:2})};var d6=()=>["/","/#sport-selection"],h6=n=>["/teams",n],f6=(n,e)=>["/team",n,e],p6=(n,e,t)=>["/game",n,e,t],m6=(n,e,t)=>["/player",n,e,t];function g6(n,e){if(n&1){let t=et();f(0,"button",10),O("click",function(){B(t);let i=D();return U(i.userService.goBack())}),g(1,"<<"),p()}}function y6(n,e){if(n&1&&(f(0,"li",7)(1,"a",11),g(2),p()()),n&2){let t=D();_(),W("routerLink",rn(2,h6,t.selectedSport)),_(),z(t.selectedSport)}}function v6(n,e){if(n&1&&(f(0,"li",7)(1,"a",11),g(2),p()()),n&2){let t=D();_(),W("routerLink",tt(2,f6,t.selectedSport,t.selectedTeam)),_(),z(t.selectedTeam)}}function _6(n,e){if(n&1&&(f(0,"li",7)(1,"a",11),g(2),p()()),n&2){let t=D();_(),W("routerLink",ar(2,p6,t.selectedSport,t.selectedTeam,t.selectedGame)),_(),z(t.selectedGame)}}function E6(n,e){if(n&1&&(f(0,"li",7)(1,"a",11),g(2),p()()),n&2){let t=D();_(),W("routerLink",ar(2,m6,t.selectedSport,t.selectedTeam,t.selectedPlayer)),_(),z(t.selectedPlayer)}}function I6(n,e){if(n&1){let t=et();f(0,"div",9)(1,"a",12),Y(2,"i",13),g(3," My Account "),p(),f(4,"ul",14)(5,"li")(6,"a",15),g(7,"Admin Management Portal"),p()(),f(8,"li"),Y(9,"hr",16),p(),f(10,"li")(11,"a",17),O("click",function(){B(t);let i=D();return U(i.logOut())}),g(12,"Log Out"),p()()()()}}var Op=class n{constructor(e,t){this.activatedRoute=e;this.router=t}selectedSport=null;selectedTeam=null;selectedPlayer=null;selectedGame=null;authService=b($e);userService=b(yn);routeR=b(Vt);ngOnInit(){this.router.events.subscribe(()=>{this.selectedSport=this.activatedRoute.snapshot.paramMap.get("sport"),this.selectedTeam=this.activatedRoute.snapshot.paramMap.get("team"),this.selectedPlayer=this.activatedRoute.snapshot.paramMap.get("player"),this.selectedGame=this.activatedRoute.snapshot.paramMap.get("game")})}logOut(){this.authService.logOut()}static \u0275fac=function(t){return new(t||n)(xe(bn),xe(Vt))};static \u0275cmp=ne({type:n,selectors:[["app-navbar"]],decls:15,vars:8,consts:[[1,"navbar","fixed-top","navbar-expand-lg","custom-navbar"],[1,"btn","btn-outline-warning",2,"margin-left","10px"],[1,"container-fluid"],[1,"navbar-brand","d-flex","align-items-center","text-white",3,"routerLink"],["src","/images/bison logo.png","alt","Logo","width","80","height","40",1,"me-2"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"d-flex","align-items-center","ms-auto"],[1,"dropdown","ms-3"],[1,"btn","btn-outline-warning",2,"margin-left","10px",3,"click"],[3,"routerLink"],["href","","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"d-flex","align-items-center","text-white","text-decoration-none","dropdown-toggle"],[1,"bi","bi-person-circle","me-2","fs-4"],["aria-labelledby","userDropdown",1,"dropdown-menu","dropdown-menu-end"],["routerLink","/admin-management",1,"dropdown-item"],[1,"dropdown-divider"],["href","",1,"dropdown-item",3,"click"]],template:function(t,r){t&1&&(f(0,"nav",0),K(1,g6,2,0,"button",1),f(2,"div",2)(3,"a",3),Y(4,"img",4),g(5," Bison Base "),p(),f(6,"nav",5)(7,"ol",6),K(8,y6,3,4,"li",7)(9,v6,3,5,"li",7)(10,_6,3,6,"li",7)(11,E6,3,6,"li",7),p()(),f(12,"div",8),Y(13,"app-search"),K(14,I6,13,0,"div",9),p()()()),t&2&&(_(),$(eS(7,d6).includes(r.routeR.url)?-1:1),_(2),W("routerLink","/"),_(5),$(r.selectedSport?8:-1),_(),$(r.selectedTeam?9:-1),_(),$(r.selectedGame?10:-1),_(),$(r.selectedPlayer?11:-1),_(3),$(r.authService.token=="true"?14:-1))},dependencies:[ut,je,kp],styles:[".custom-navbar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#005643,#00ab85)}"]})};var Fp=class n{authService=b($e);title="Bison Base";ngOnDestroy(){this.authService.logOut()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"pt-5"]],template:function(t,r){t&1&&(Y(0,"app-navbar"),f(1,"div",0),Y(2,"router-outlet"),p())},dependencies:[el,Op],styles:[".pt-5[_ngcontent-%COMP%]{margin-top:1rem}"]})};Qy(Fp,fM).catch(n=>console.error(n));
